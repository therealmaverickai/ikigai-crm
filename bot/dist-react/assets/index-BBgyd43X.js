(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function s(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(c){if(c.ep)return;c.ep=!0;const d=s(c);fetch(c.href,d)}})();function T0(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}function _x(u){if(Object.prototype.hasOwnProperty.call(u,"__esModule"))return u;var l=u.default;if(typeof l=="function"){var s=function i(){var c=!1;try{c=this instanceof i}catch{}return c?Reflect.construct(l,arguments,this.constructor):l.apply(this,arguments)};s.prototype=l.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(u).forEach(function(i){var c=Object.getOwnPropertyDescriptor(u,i);Object.defineProperty(s,i,c.get?c:{enumerable:!0,get:function(){return u[i]}})}),s}var co={exports:{}},dl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zh;function wx(){if(zh)return dl;zh=1;var u=Symbol.for("react.transitional.element"),l=Symbol.for("react.fragment");function s(i,c,d){var h=null;if(d!==void 0&&(h=""+d),c.key!==void 0&&(h=""+c.key),"key"in c){d={};for(var m in c)m!=="key"&&(d[m]=c[m])}else d=c;return c=d.ref,{$$typeof:u,type:i,key:h,ref:c!==void 0?c:null,props:d}}return dl.Fragment=l,dl.jsx=s,dl.jsxs=s,dl}var Lh;function Sx(){return Lh||(Lh=1,co.exports=wx()),co.exports}var r=Sx(),oo={exports:{}},ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qh;function Nx(){if(qh)return ge;qh=1;var u=Symbol.for("react.transitional.element"),l=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),b=Symbol.iterator;function j(E){return E===null||typeof E!="object"?null:(E=b&&E[b]||E["@@iterator"],typeof E=="function"?E:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,R={};function D(E,Y,A){this.props=E,this.context=Y,this.refs=R,this.updater=A||S}D.prototype.isReactComponent={},D.prototype.setState=function(E,Y){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,Y,"setState")},D.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function N(){}N.prototype=D.prototype;function X(E,Y,A){this.props=E,this.context=Y,this.refs=R,this.updater=A||S}var q=X.prototype=new N;q.constructor=X,_(q,D.prototype),q.isPureReactComponent=!0;var L=Array.isArray,H={H:null,A:null,T:null,S:null,V:null},V=Object.prototype.hasOwnProperty;function F(E,Y,A,Q,ce,we){return A=we.ref,{$$typeof:u,type:E,key:Y,ref:A!==void 0?A:null,props:we}}function xe(E,Y){return F(E.type,Y,void 0,void 0,void 0,E.props)}function J(E){return typeof E=="object"&&E!==null&&E.$$typeof===u}function K(E){var Y={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(A){return Y[A]})}var B=/\/+/g;function ie(E,Y){return typeof E=="object"&&E!==null&&E.key!=null?K(""+E.key):Y.toString(36)}function le(){}function ae(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then(le,le):(E.status="pending",E.then(function(Y){E.status==="pending"&&(E.status="fulfilled",E.value=Y)},function(Y){E.status==="pending"&&(E.status="rejected",E.reason=Y)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function ne(E,Y,A,Q,ce){var we=typeof E;(we==="undefined"||we==="boolean")&&(E=null);var he=!1;if(E===null)he=!0;else switch(we){case"bigint":case"string":case"number":he=!0;break;case"object":switch(E.$$typeof){case u:case l:he=!0;break;case p:return he=E._init,ne(he(E._payload),Y,A,Q,ce)}}if(he)return ce=ce(E),he=Q===""?"."+ie(E,0):Q,L(ce)?(A="",he!=null&&(A=he.replace(B,"$&/")+"/"),ne(ce,Y,A,"",function(ha){return ha})):ce!=null&&(J(ce)&&(ce=xe(ce,A+(ce.key==null||E&&E.key===ce.key?"":(""+ce.key).replace(B,"$&/")+"/")+he)),Y.push(ce)),1;he=0;var xt=Q===""?".":Q+":";if(L(E))for(var qe=0;qe<E.length;qe++)Q=E[qe],we=xt+ie(Q,qe),he+=ne(Q,Y,A,we,ce);else if(qe=j(E),typeof qe=="function")for(E=qe.call(E),qe=0;!(Q=E.next()).done;)Q=Q.value,we=xt+ie(Q,qe++),he+=ne(Q,Y,A,we,ce);else if(we==="object"){if(typeof E.then=="function")return ne(ae(E),Y,A,Q,ce);throw Y=String(E),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return he}function T(E,Y,A){if(E==null)return E;var Q=[],ce=0;return ne(E,Q,"","",function(we){return Y.call(A,we,ce++)}),Q}function I(E){if(E._status===-1){var Y=E._result;Y=Y(),Y.then(function(A){(E._status===0||E._status===-1)&&(E._status=1,E._result=A)},function(A){(E._status===0||E._status===-1)&&(E._status=2,E._result=A)}),E._status===-1&&(E._status=0,E._result=Y)}if(E._status===1)return E._result.default;throw E._result}var W=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)};function Ne(){}return ge.Children={map:T,forEach:function(E,Y,A){T(E,function(){Y.apply(this,arguments)},A)},count:function(E){var Y=0;return T(E,function(){Y++}),Y},toArray:function(E){return T(E,function(Y){return Y})||[]},only:function(E){if(!J(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},ge.Component=D,ge.Fragment=s,ge.Profiler=c,ge.PureComponent=X,ge.StrictMode=i,ge.Suspense=x,ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,ge.__COMPILER_RUNTIME={__proto__:null,c:function(E){return H.H.useMemoCache(E)}},ge.cache=function(E){return function(){return E.apply(null,arguments)}},ge.cloneElement=function(E,Y,A){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var Q=_({},E.props),ce=E.key,we=void 0;if(Y!=null)for(he in Y.ref!==void 0&&(we=void 0),Y.key!==void 0&&(ce=""+Y.key),Y)!V.call(Y,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&Y.ref===void 0||(Q[he]=Y[he]);var he=arguments.length-2;if(he===1)Q.children=A;else if(1<he){for(var xt=Array(he),qe=0;qe<he;qe++)xt[qe]=arguments[qe+2];Q.children=xt}return F(E.type,ce,void 0,void 0,we,Q)},ge.createContext=function(E){return E={$$typeof:h,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:d,_context:E},E},ge.createElement=function(E,Y,A){var Q,ce={},we=null;if(Y!=null)for(Q in Y.key!==void 0&&(we=""+Y.key),Y)V.call(Y,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(ce[Q]=Y[Q]);var he=arguments.length-2;if(he===1)ce.children=A;else if(1<he){for(var xt=Array(he),qe=0;qe<he;qe++)xt[qe]=arguments[qe+2];ce.children=xt}if(E&&E.defaultProps)for(Q in he=E.defaultProps,he)ce[Q]===void 0&&(ce[Q]=he[Q]);return F(E,we,void 0,void 0,null,ce)},ge.createRef=function(){return{current:null}},ge.forwardRef=function(E){return{$$typeof:m,render:E}},ge.isValidElement=J,ge.lazy=function(E){return{$$typeof:p,_payload:{_status:-1,_result:E},_init:I}},ge.memo=function(E,Y){return{$$typeof:g,type:E,compare:Y===void 0?null:Y}},ge.startTransition=function(E){var Y=H.T,A={};H.T=A;try{var Q=E(),ce=H.S;ce!==null&&ce(A,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(Ne,W)}catch(we){W(we)}finally{H.T=Y}},ge.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},ge.use=function(E){return H.H.use(E)},ge.useActionState=function(E,Y,A){return H.H.useActionState(E,Y,A)},ge.useCallback=function(E,Y){return H.H.useCallback(E,Y)},ge.useContext=function(E){return H.H.useContext(E)},ge.useDebugValue=function(){},ge.useDeferredValue=function(E,Y){return H.H.useDeferredValue(E,Y)},ge.useEffect=function(E,Y,A){var Q=H.H;if(typeof A=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Q.useEffect(E,Y)},ge.useId=function(){return H.H.useId()},ge.useImperativeHandle=function(E,Y,A){return H.H.useImperativeHandle(E,Y,A)},ge.useInsertionEffect=function(E,Y){return H.H.useInsertionEffect(E,Y)},ge.useLayoutEffect=function(E,Y){return H.H.useLayoutEffect(E,Y)},ge.useMemo=function(E,Y){return H.H.useMemo(E,Y)},ge.useOptimistic=function(E,Y){return H.H.useOptimistic(E,Y)},ge.useReducer=function(E,Y,A){return H.H.useReducer(E,Y,A)},ge.useRef=function(E){return H.H.useRef(E)},ge.useState=function(E){return H.H.useState(E)},ge.useSyncExternalStore=function(E,Y,A){return H.H.useSyncExternalStore(E,Y,A)},ge.useTransition=function(){return H.H.useTransition()},ge.version="19.1.1",ge}var Bh;function ko(){return Bh||(Bh=1,oo.exports=Nx()),oo.exports}var Z=ko();const qi=T0(Z);var uo={exports:{}},fl={},fo={exports:{}},ho={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hh;function Tx(){return Hh||(Hh=1,function(u){function l(T,I){var W=T.length;T.push(I);e:for(;0<W;){var Ne=W-1>>>1,E=T[Ne];if(0<c(E,I))T[Ne]=I,T[W]=E,W=Ne;else break e}}function s(T){return T.length===0?null:T[0]}function i(T){if(T.length===0)return null;var I=T[0],W=T.pop();if(W!==I){T[0]=W;e:for(var Ne=0,E=T.length,Y=E>>>1;Ne<Y;){var A=2*(Ne+1)-1,Q=T[A],ce=A+1,we=T[ce];if(0>c(Q,W))ce<E&&0>c(we,Q)?(T[Ne]=we,T[ce]=W,Ne=ce):(T[Ne]=Q,T[A]=W,Ne=A);else if(ce<E&&0>c(we,W))T[Ne]=we,T[ce]=W,Ne=ce;else break e}}return I}function c(T,I){var W=T.sortIndex-I.sortIndex;return W!==0?W:T.id-I.id}if(u.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;u.unstable_now=function(){return d.now()}}else{var h=Date,m=h.now();u.unstable_now=function(){return h.now()-m}}var x=[],g=[],p=1,b=null,j=3,S=!1,_=!1,R=!1,D=!1,N=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function L(T){for(var I=s(g);I!==null;){if(I.callback===null)i(g);else if(I.startTime<=T)i(g),I.sortIndex=I.expirationTime,l(x,I);else break;I=s(g)}}function H(T){if(R=!1,L(T),!_)if(s(x)!==null)_=!0,V||(V=!0,ie());else{var I=s(g);I!==null&&ne(H,I.startTime-T)}}var V=!1,F=-1,xe=5,J=-1;function K(){return D?!0:!(u.unstable_now()-J<xe)}function B(){if(D=!1,V){var T=u.unstable_now();J=T;var I=!0;try{e:{_=!1,R&&(R=!1,X(F),F=-1),S=!0;var W=j;try{t:{for(L(T),b=s(x);b!==null&&!(b.expirationTime>T&&K());){var Ne=b.callback;if(typeof Ne=="function"){b.callback=null,j=b.priorityLevel;var E=Ne(b.expirationTime<=T);if(T=u.unstable_now(),typeof E=="function"){b.callback=E,L(T),I=!0;break t}b===s(x)&&i(x),L(T)}else i(x);b=s(x)}if(b!==null)I=!0;else{var Y=s(g);Y!==null&&ne(H,Y.startTime-T),I=!1}}break e}finally{b=null,j=W,S=!1}I=void 0}}finally{I?ie():V=!1}}}var ie;if(typeof q=="function")ie=function(){q(B)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,ae=le.port2;le.port1.onmessage=B,ie=function(){ae.postMessage(null)}}else ie=function(){N(B,0)};function ne(T,I){F=N(function(){T(u.unstable_now())},I)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(T){T.callback=null},u.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):xe=0<T?Math.floor(1e3/T):5},u.unstable_getCurrentPriorityLevel=function(){return j},u.unstable_next=function(T){switch(j){case 1:case 2:case 3:var I=3;break;default:I=j}var W=j;j=I;try{return T()}finally{j=W}},u.unstable_requestPaint=function(){D=!0},u.unstable_runWithPriority=function(T,I){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var W=j;j=T;try{return I()}finally{j=W}},u.unstable_scheduleCallback=function(T,I,W){var Ne=u.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Ne+W:Ne):W=Ne,T){case 1:var E=-1;break;case 2:E=250;break;case 5:E=1073741823;break;case 4:E=1e4;break;default:E=5e3}return E=W+E,T={id:p++,callback:I,priorityLevel:T,startTime:W,expirationTime:E,sortIndex:-1},W>Ne?(T.sortIndex=W,l(g,T),s(x)===null&&T===s(g)&&(R?(X(F),F=-1):R=!0,ne(H,W-Ne))):(T.sortIndex=E,l(x,T),_||S||(_=!0,V||(V=!0,ie()))),T},u.unstable_shouldYield=K,u.unstable_wrapCallback=function(T){var I=j;return function(){var W=j;j=I;try{return T.apply(this,arguments)}finally{j=W}}}}(ho)),ho}var $h;function Ex(){return $h||($h=1,fo.exports=Tx()),fo.exports}var mo={exports:{}},rt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gh;function Cx(){if(Gh)return rt;Gh=1;var u=ko();function l(x){var g="https://react.dev/errors/"+x;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)g+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+x+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(l(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},c=Symbol.for("react.portal");function d(x,g,p){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:b==null?null:""+b,children:x,containerInfo:g,implementation:p}}var h=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(x,g){if(x==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return rt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,rt.createPortal=function(x,g){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(l(299));return d(x,g,null,p)},rt.flushSync=function(x){var g=h.T,p=i.p;try{if(h.T=null,i.p=2,x)return x()}finally{h.T=g,i.p=p,i.d.f()}},rt.preconnect=function(x,g){typeof x=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(x,g))},rt.prefetchDNS=function(x){typeof x=="string"&&i.d.D(x)},rt.preinit=function(x,g){if(typeof x=="string"&&g&&typeof g.as=="string"){var p=g.as,b=m(p,g.crossOrigin),j=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;p==="style"?i.d.S(x,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:j,fetchPriority:S}):p==="script"&&i.d.X(x,{crossOrigin:b,integrity:j,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},rt.preinitModule=function(x,g){if(typeof x=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var p=m(g.as,g.crossOrigin);i.d.M(x,{crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(x)},rt.preload=function(x,g){if(typeof x=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var p=g.as,b=m(p,g.crossOrigin);i.d.L(x,p,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},rt.preloadModule=function(x,g){if(typeof x=="string")if(g){var p=m(g.as,g.crossOrigin);i.d.m(x,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(x)},rt.requestFormReset=function(x){i.d.r(x)},rt.unstable_batchedUpdates=function(x,g){return x(g)},rt.useFormState=function(x,g,p){return h.H.useFormState(x,g,p)},rt.useFormStatus=function(){return h.H.useHostTransitionStatus()},rt.version="19.1.1",rt}var Ih;function Ax(){if(Ih)return mo.exports;Ih=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(l){console.error(l)}}return u(),mo.exports=Cx(),mo.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ph;function Dx(){if(Ph)return fl;Ph=1;var u=Ex(),l=ko(),s=Ax();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(d(e)!==e)throw Error(i(188))}function x(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(i(188));return t!==e?null:e}for(var a=e,n=t;;){var o=a.return;if(o===null)break;var f=o.alternate;if(f===null){if(n=o.return,n!==null){a=n;continue}break}if(o.child===f.child){for(f=o.child;f;){if(f===a)return m(o),e;if(f===n)return m(o),t;f=f.sibling}throw Error(i(188))}if(a.return!==n.return)a=o,n=f;else{for(var y=!1,v=o.child;v;){if(v===a){y=!0,a=o,n=f;break}if(v===n){y=!0,n=o,a=f;break}v=v.sibling}if(!y){for(v=f.child;v;){if(v===a){y=!0,a=f,n=o;break}if(v===n){y=!0,n=f,a=o;break}v=v.sibling}if(!y)throw Error(i(189))}}if(a.alternate!==n)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?e:t}function g(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=g(e),t!==null)return t;e=e.sibling}return null}var p=Object.assign,b=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),X=Symbol.for("react.consumer"),q=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),xe=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function ie(e){return e===null||typeof e!="object"?null:(e=B&&e[B]||e["@@iterator"],typeof e=="function"?e:null)}var le=Symbol.for("react.client.reference");function ae(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===le?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _:return"Fragment";case D:return"Profiler";case R:return"StrictMode";case H:return"Suspense";case V:return"SuspenseList";case J:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case S:return"Portal";case q:return(e.displayName||"Context")+".Provider";case X:return(e._context.displayName||"Context")+".Consumer";case L:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case F:return t=e.displayName||null,t!==null?t:ae(e.type)||"Memo";case xe:t=e._payload,e=e._init;try{return ae(e(t))}catch{}}return null}var ne=Array.isArray,T=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},Ne=[],E=-1;function Y(e){return{current:e}}function A(e){0>E||(e.current=Ne[E],Ne[E]=null,E--)}function Q(e,t){E++,Ne[E]=e.current,e.current=t}var ce=Y(null),we=Y(null),he=Y(null),xt=Y(null);function qe(e,t){switch(Q(he,t),Q(we,e),Q(ce,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?uh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=uh(t),e=dh(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}A(ce),Q(ce,e)}function ha(){A(ce),A(we),A(he)}function Qi(e){e.memoizedState!==null&&Q(xt,e);var t=ce.current,a=dh(t,e.type);t!==a&&(Q(we,e),Q(ce,a))}function wl(e){we.current===e&&(A(ce),A(we)),xt.current===e&&(A(xt),il._currentValue=W)}var Xi=Object.prototype.hasOwnProperty,Ki=u.unstable_scheduleCallback,Zi=u.unstable_cancelCallback,em=u.unstable_shouldYield,tm=u.unstable_requestPaint,$t=u.unstable_now,am=u.unstable_getCurrentPriorityLevel,Io=u.unstable_ImmediatePriority,Po=u.unstable_UserBlockingPriority,Sl=u.unstable_NormalPriority,sm=u.unstable_LowPriority,Yo=u.unstable_IdlePriority,nm=u.log,lm=u.unstable_setDisableYieldValue,mn=null,yt=null;function ma(e){if(typeof nm=="function"&&lm(e),yt&&typeof yt.setStrictMode=="function")try{yt.setStrictMode(mn,e)}catch{}}var pt=Math.clz32?Math.clz32:cm,im=Math.log,rm=Math.LN2;function cm(e){return e>>>=0,e===0?32:31-(im(e)/rm|0)|0}var Nl=256,Tl=4194304;function Ia(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function El(e,t,a){var n=e.pendingLanes;if(n===0)return 0;var o=0,f=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var v=n&134217727;return v!==0?(n=v&~f,n!==0?o=Ia(n):(y&=v,y!==0?o=Ia(y):a||(a=v&~e,a!==0&&(o=Ia(a))))):(v=n&~f,v!==0?o=Ia(v):y!==0?o=Ia(y):a||(a=n&~e,a!==0&&(o=Ia(a)))),o===0?0:t!==0&&t!==o&&(t&f)===0&&(f=o&-o,a=t&-t,f>=a||f===32&&(a&4194048)!==0)?t:o}function gn(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function om(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vo(){var e=Nl;return Nl<<=1,(Nl&4194048)===0&&(Nl=256),e}function Qo(){var e=Tl;return Tl<<=1,(Tl&62914560)===0&&(Tl=4194304),e}function Ji(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function xn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function um(e,t,a,n,o,f){var y=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var v=e.entanglements,w=e.expirationTimes,M=e.hiddenUpdates;for(a=y&~a;0<a;){var $=31-pt(a),P=1<<$;v[$]=0,w[$]=-1;var k=M[$];if(k!==null)for(M[$]=null,$=0;$<k.length;$++){var z=k[$];z!==null&&(z.lane&=-536870913)}a&=~P}n!==0&&Xo(e,n,0),f!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=f&~(y&~t))}function Xo(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-pt(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|a&4194090}function Ko(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var n=31-pt(a),o=1<<n;o&t|e[n]&t&&(e[n]|=t),a&=~o}}function Fi(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Wi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Zo(){var e=I.p;return e!==0?e:(e=window.event,e===void 0?32:Dh(e.type))}function dm(e,t){var a=I.p;try{return I.p=e,t()}finally{I.p=a}}var ga=Math.random().toString(36).slice(2),lt="__reactFiber$"+ga,ut="__reactProps$"+ga,fs="__reactContainer$"+ga,er="__reactEvents$"+ga,fm="__reactListeners$"+ga,hm="__reactHandles$"+ga,Jo="__reactResources$"+ga,yn="__reactMarker$"+ga;function tr(e){delete e[lt],delete e[ut],delete e[er],delete e[fm],delete e[hm]}function hs(e){var t=e[lt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[fs]||a[lt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=gh(e);e!==null;){if(a=e[lt])return a;e=gh(e)}return t}e=a,a=e.parentNode}return null}function ms(e){if(e=e[lt]||e[fs]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function pn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function gs(e){var t=e[Jo];return t||(t=e[Jo]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ze(e){e[yn]=!0}var Fo=new Set,Wo={};function Pa(e,t){xs(e,t),xs(e+"Capture",t)}function xs(e,t){for(Wo[e]=t,e=0;e<t.length;e++)Fo.add(t[e])}var mm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),eu={},tu={};function gm(e){return Xi.call(tu,e)?!0:Xi.call(eu,e)?!1:mm.test(e)?tu[e]=!0:(eu[e]=!0,!1)}function Cl(e,t,a){if(gm(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function Al(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Qt(e,t,a,n){if(n===null)e.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+n)}}var ar,au;function ys(e){if(ar===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);ar=t&&t[1]||"",au=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ar+e+au}var sr=!1;function nr(e,t){if(!e||sr)return"";sr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var P=function(){throw Error()};if(Object.defineProperty(P.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(P,[])}catch(z){var k=z}Reflect.construct(e,[],P)}else{try{P.call()}catch(z){k=z}e.call(P.prototype)}}else{try{throw Error()}catch(z){k=z}(P=e())&&typeof P.catch=="function"&&P.catch(function(){})}}catch(z){if(z&&k&&typeof z.stack=="string")return[z.stack,k.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=n.DetermineComponentFrameRoot(),y=f[0],v=f[1];if(y&&v){var w=y.split(`
`),M=v.split(`
`);for(o=n=0;n<w.length&&!w[n].includes("DetermineComponentFrameRoot");)n++;for(;o<M.length&&!M[o].includes("DetermineComponentFrameRoot");)o++;if(n===w.length||o===M.length)for(n=w.length-1,o=M.length-1;1<=n&&0<=o&&w[n]!==M[o];)o--;for(;1<=n&&0<=o;n--,o--)if(w[n]!==M[o]){if(n!==1||o!==1)do if(n--,o--,0>o||w[n]!==M[o]){var $=`
`+w[n].replace(" at new "," at ");return e.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",e.displayName)),$}while(1<=n&&0<=o);break}}}finally{sr=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?ys(a):""}function xm(e){switch(e.tag){case 26:case 27:case 5:return ys(e.type);case 16:return ys("Lazy");case 13:return ys("Suspense");case 19:return ys("SuspenseList");case 0:case 15:return nr(e.type,!1);case 11:return nr(e.type.render,!1);case 1:return nr(e.type,!0);case 31:return ys("Activity");default:return""}}function su(e){try{var t="";do t+=xm(e),e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Tt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function nu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ym(e){var t=nu(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var o=a.get,f=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(y){n=""+y,f.call(this,y)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(y){n=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Dl(e){e._valueTracker||(e._valueTracker=ym(e))}function lu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),n="";return e&&(n=nu(e)?e.checked?"true":"false":e.value),e=n,e!==a?(t.setValue(e),!0):!1}function Ol(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var pm=/[\n"\\]/g;function Et(e){return e.replace(pm,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function lr(e,t,a,n,o,f,y,v){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),t!=null?y==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Tt(t)):e.value!==""+Tt(t)&&(e.value=""+Tt(t)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),t!=null?ir(e,y,Tt(t)):a!=null?ir(e,y,Tt(a)):n!=null&&e.removeAttribute("value"),o==null&&f!=null&&(e.defaultChecked=!!f),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.name=""+Tt(v):e.removeAttribute("name")}function iu(e,t,a,n,o,f,y,v){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||t!=null))return;a=a!=null?""+Tt(a):"",t=t!=null?""+Tt(t):a,v||t===e.value||(e.value=t),e.defaultValue=t}n=n??o,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=v?e.checked:!!n,e.defaultChecked=!!n,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y)}function ir(e,t,a){t==="number"&&Ol(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function ps(e,t,a,n){if(e=e.options,t){t={};for(var o=0;o<a.length;o++)t["$"+a[o]]=!0;for(a=0;a<e.length;a++)o=t.hasOwnProperty("$"+e[a].value),e[a].selected!==o&&(e[a].selected=o),o&&n&&(e[a].defaultSelected=!0)}else{for(a=""+Tt(a),t=null,o=0;o<e.length;o++){if(e[o].value===a){e[o].selected=!0,n&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function ru(e,t,a){if(t!=null&&(t=""+Tt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Tt(a):""}function cu(e,t,a,n){if(t==null){if(n!=null){if(a!=null)throw Error(i(92));if(ne(n)){if(1<n.length)throw Error(i(93));n=n[0]}a=n}a==null&&(a=""),t=a}a=Tt(t),e.defaultValue=a,n=e.textContent,n===a&&n!==""&&n!==null&&(e.value=n)}function vs(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var vm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ou(e,t,a){var n=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,a):typeof a!="number"||a===0||vm.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function uu(e,t,a){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,a!=null){for(var n in a)!a.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var o in t)n=t[o],t.hasOwnProperty(o)&&a[o]!==n&&ou(e,o,n)}else for(var f in t)t.hasOwnProperty(f)&&ou(e,f,t[f])}function rr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rl(e){return jm.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var cr=null;function or(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bs=null,js=null;function du(e){var t=ms(e);if(t&&(e=t.stateNode)){var a=e[ut]||null;e:switch(e=t.stateNode,t.type){case"input":if(lr(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Et(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var n=a[t];if(n!==e&&n.form===e.form){var o=n[ut]||null;if(!o)throw Error(i(90));lr(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<a.length;t++)n=a[t],n.form===e.form&&lu(n)}break e;case"textarea":ru(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&ps(e,!!a.multiple,t,!1)}}}var ur=!1;function fu(e,t,a){if(ur)return e(t,a);ur=!0;try{var n=e(t);return n}finally{if(ur=!1,(bs!==null||js!==null)&&(yi(),bs&&(t=bs,e=js,js=bs=null,du(t),e)))for(t=0;t<e.length;t++)du(e[t])}}function vn(e,t){var a=e.stateNode;if(a===null)return null;var n=a[ut]||null;if(n===null)return null;a=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(i(231,t,typeof a));return a}var Xt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dr=!1;if(Xt)try{var bn={};Object.defineProperty(bn,"passive",{get:function(){dr=!0}}),window.addEventListener("test",bn,bn),window.removeEventListener("test",bn,bn)}catch{dr=!1}var xa=null,fr=null,Ul=null;function hu(){if(Ul)return Ul;var e,t=fr,a=t.length,n,o="value"in xa?xa.value:xa.textContent,f=o.length;for(e=0;e<a&&t[e]===o[e];e++);var y=a-e;for(n=1;n<=y&&t[a-n]===o[f-n];n++);return Ul=o.slice(e,1<n?1-n:void 0)}function Ml(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function kl(){return!0}function mu(){return!1}function dt(e){function t(a,n,o,f,y){this._reactName=a,this._targetInst=o,this.type=n,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(a=e[v],this[v]=a?a(f):f[v]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?kl:mu,this.isPropagationStopped=mu,this}return p(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=kl)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=kl)},persist:function(){},isPersistent:kl}),t}var Ya={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zl=dt(Ya),jn=p({},Ya,{view:0,detail:0}),_m=dt(jn),hr,mr,_n,Ll=p({},jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==_n&&(_n&&e.type==="mousemove"?(hr=e.screenX-_n.screenX,mr=e.screenY-_n.screenY):mr=hr=0,_n=e),hr)},movementY:function(e){return"movementY"in e?e.movementY:mr}}),gu=dt(Ll),wm=p({},Ll,{dataTransfer:0}),Sm=dt(wm),Nm=p({},jn,{relatedTarget:0}),gr=dt(Nm),Tm=p({},Ya,{animationName:0,elapsedTime:0,pseudoElement:0}),Em=dt(Tm),Cm=p({},Ya,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Am=dt(Cm),Dm=p({},Ya,{data:0}),xu=dt(Dm),Om={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Um={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Um[e])?!!t[e]:!1}function xr(){return Mm}var km=p({},jn,{key:function(e){if(e.key){var t=Om[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ml(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Rm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xr,charCode:function(e){return e.type==="keypress"?Ml(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ml(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zm=dt(km),Lm=p({},Ll,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yu=dt(Lm),qm=p({},jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xr}),Bm=dt(qm),Hm=p({},Ya,{propertyName:0,elapsedTime:0,pseudoElement:0}),$m=dt(Hm),Gm=p({},Ll,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Im=dt(Gm),Pm=p({},Ya,{newState:0,oldState:0}),Ym=dt(Pm),Vm=[9,13,27,32],yr=Xt&&"CompositionEvent"in window,wn=null;Xt&&"documentMode"in document&&(wn=document.documentMode);var Qm=Xt&&"TextEvent"in window&&!wn,pu=Xt&&(!yr||wn&&8<wn&&11>=wn),vu=" ",bu=!1;function ju(e,t){switch(e){case"keyup":return Vm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _u(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _s=!1;function Xm(e,t){switch(e){case"compositionend":return _u(t);case"keypress":return t.which!==32?null:(bu=!0,vu);case"textInput":return e=t.data,e===vu&&bu?null:e;default:return null}}function Km(e,t){if(_s)return e==="compositionend"||!yr&&ju(e,t)?(e=hu(),Ul=fr=xa=null,_s=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return pu&&t.locale!=="ko"?null:t.data;default:return null}}var Zm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Zm[e.type]:t==="textarea"}function Su(e,t,a,n){bs?js?js.push(n):js=[n]:bs=n,t=wi(t,"onChange"),0<t.length&&(a=new zl("onChange","change",null,a,n),e.push({event:a,listeners:t}))}var Sn=null,Nn=null;function Jm(e){lh(e,0)}function ql(e){var t=pn(e);if(lu(t))return e}function Nu(e,t){if(e==="change")return t}var Tu=!1;if(Xt){var pr;if(Xt){var vr="oninput"in document;if(!vr){var Eu=document.createElement("div");Eu.setAttribute("oninput","return;"),vr=typeof Eu.oninput=="function"}pr=vr}else pr=!1;Tu=pr&&(!document.documentMode||9<document.documentMode)}function Cu(){Sn&&(Sn.detachEvent("onpropertychange",Au),Nn=Sn=null)}function Au(e){if(e.propertyName==="value"&&ql(Nn)){var t=[];Su(t,Nn,e,or(e)),fu(Jm,t)}}function Fm(e,t,a){e==="focusin"?(Cu(),Sn=t,Nn=a,Sn.attachEvent("onpropertychange",Au)):e==="focusout"&&Cu()}function Wm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ql(Nn)}function eg(e,t){if(e==="click")return ql(t)}function tg(e,t){if(e==="input"||e==="change")return ql(t)}function ag(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vt=typeof Object.is=="function"?Object.is:ag;function Tn(e,t){if(vt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var o=a[n];if(!Xi.call(t,o)||!vt(e[o],t[o]))return!1}return!0}function Du(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ou(e,t){var a=Du(e);e=0;for(var n;a;){if(a.nodeType===3){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Du(a)}}function Ru(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ru(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Uu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ol(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Ol(e.document)}return t}function br(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var sg=Xt&&"documentMode"in document&&11>=document.documentMode,ws=null,jr=null,En=null,_r=!1;function Mu(e,t,a){var n=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;_r||ws==null||ws!==Ol(n)||(n=ws,"selectionStart"in n&&br(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),En&&Tn(En,n)||(En=n,n=wi(jr,"onSelect"),0<n.length&&(t=new zl("onSelect","select",null,t,a),e.push({event:t,listeners:n}),t.target=ws)))}function Va(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Ss={animationend:Va("Animation","AnimationEnd"),animationiteration:Va("Animation","AnimationIteration"),animationstart:Va("Animation","AnimationStart"),transitionrun:Va("Transition","TransitionRun"),transitionstart:Va("Transition","TransitionStart"),transitioncancel:Va("Transition","TransitionCancel"),transitionend:Va("Transition","TransitionEnd")},wr={},ku={};Xt&&(ku=document.createElement("div").style,"AnimationEvent"in window||(delete Ss.animationend.animation,delete Ss.animationiteration.animation,delete Ss.animationstart.animation),"TransitionEvent"in window||delete Ss.transitionend.transition);function Qa(e){if(wr[e])return wr[e];if(!Ss[e])return e;var t=Ss[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in ku)return wr[e]=t[a];return e}var zu=Qa("animationend"),Lu=Qa("animationiteration"),qu=Qa("animationstart"),ng=Qa("transitionrun"),lg=Qa("transitionstart"),ig=Qa("transitioncancel"),Bu=Qa("transitionend"),Hu=new Map,Sr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sr.push("scrollEnd");function kt(e,t){Hu.set(e,t),Pa(t,[e])}var $u=new WeakMap;function Ct(e,t){if(typeof e=="object"&&e!==null){var a=$u.get(e);return a!==void 0?a:(t={value:e,source:t,stack:su(t)},$u.set(e,t),t)}return{value:e,source:t,stack:su(t)}}var At=[],Ns=0,Nr=0;function Bl(){for(var e=Ns,t=Nr=Ns=0;t<e;){var a=At[t];At[t++]=null;var n=At[t];At[t++]=null;var o=At[t];At[t++]=null;var f=At[t];if(At[t++]=null,n!==null&&o!==null){var y=n.pending;y===null?o.next=o:(o.next=y.next,y.next=o),n.pending=o}f!==0&&Gu(a,o,f)}}function Hl(e,t,a,n){At[Ns++]=e,At[Ns++]=t,At[Ns++]=a,At[Ns++]=n,Nr|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function Tr(e,t,a,n){return Hl(e,t,a,n),$l(e)}function Ts(e,t){return Hl(e,null,null,t),$l(e)}function Gu(e,t,a){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a);for(var o=!1,f=e.return;f!==null;)f.childLanes|=a,n=f.alternate,n!==null&&(n.childLanes|=a),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(o=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,o&&t!==null&&(o=31-pt(a),e=f.hiddenUpdates,n=e[o],n===null?e[o]=[t]:n.push(t),t.lane=a|536870912),f):null}function $l(e){if(50<Fn)throw Fn=0,Rc=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Es={};function rg(e,t,a,n){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bt(e,t,a,n){return new rg(e,t,a,n)}function Er(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Kt(e,t){var a=e.alternate;return a===null?(a=bt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Iu(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Gl(e,t,a,n,o,f){var y=0;if(n=e,typeof e=="function")Er(e)&&(y=1);else if(typeof e=="string")y=ox(e,a,ce.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case J:return e=bt(31,a,t,o),e.elementType=J,e.lanes=f,e;case _:return Xa(a.children,o,f,t);case R:y=8,o|=24;break;case D:return e=bt(12,a,t,o|2),e.elementType=D,e.lanes=f,e;case H:return e=bt(13,a,t,o),e.elementType=H,e.lanes=f,e;case V:return e=bt(19,a,t,o),e.elementType=V,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case N:case q:y=10;break e;case X:y=9;break e;case L:y=11;break e;case F:y=14;break e;case xe:y=16,n=null;break e}y=29,a=Error(i(130,e===null?"null":typeof e,"")),n=null}return t=bt(y,a,t,o),t.elementType=e,t.type=n,t.lanes=f,t}function Xa(e,t,a,n){return e=bt(7,e,n,t),e.lanes=a,e}function Cr(e,t,a){return e=bt(6,e,null,t),e.lanes=a,e}function Ar(e,t,a){return t=bt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Cs=[],As=0,Il=null,Pl=0,Dt=[],Ot=0,Ka=null,Zt=1,Jt="";function Za(e,t){Cs[As++]=Pl,Cs[As++]=Il,Il=e,Pl=t}function Pu(e,t,a){Dt[Ot++]=Zt,Dt[Ot++]=Jt,Dt[Ot++]=Ka,Ka=e;var n=Zt;e=Jt;var o=32-pt(n)-1;n&=~(1<<o),a+=1;var f=32-pt(t)+o;if(30<f){var y=o-o%5;f=(n&(1<<y)-1).toString(32),n>>=y,o-=y,Zt=1<<32-pt(t)+o|a<<o|n,Jt=f+e}else Zt=1<<f|a<<o|n,Jt=e}function Dr(e){e.return!==null&&(Za(e,1),Pu(e,1,0))}function Or(e){for(;e===Il;)Il=Cs[--As],Cs[As]=null,Pl=Cs[--As],Cs[As]=null;for(;e===Ka;)Ka=Dt[--Ot],Dt[Ot]=null,Jt=Dt[--Ot],Dt[Ot]=null,Zt=Dt[--Ot],Dt[Ot]=null}var ot=null,$e=null,Ce=!1,Ja=null,Gt=!1,Rr=Error(i(519));function Fa(e){var t=Error(i(418,""));throw Dn(Ct(t,e)),Rr}function Yu(e){var t=e.stateNode,a=e.type,n=e.memoizedProps;switch(t[lt]=e,t[ut]=n,a){case"dialog":je("cancel",t),je("close",t);break;case"iframe":case"object":case"embed":je("load",t);break;case"video":case"audio":for(a=0;a<el.length;a++)je(el[a],t);break;case"source":je("error",t);break;case"img":case"image":case"link":je("error",t),je("load",t);break;case"details":je("toggle",t);break;case"input":je("invalid",t),iu(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),Dl(t);break;case"select":je("invalid",t);break;case"textarea":je("invalid",t),cu(t,n.value,n.defaultValue,n.children),Dl(t)}a=n.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||n.suppressHydrationWarning===!0||oh(t.textContent,a)?(n.popover!=null&&(je("beforetoggle",t),je("toggle",t)),n.onScroll!=null&&je("scroll",t),n.onScrollEnd!=null&&je("scrollend",t),n.onClick!=null&&(t.onclick=Si),t=!0):t=!1,t||Fa(e)}function Vu(e){for(ot=e.return;ot;)switch(ot.tag){case 5:case 13:Gt=!1;return;case 27:case 3:Gt=!0;return;default:ot=ot.return}}function Cn(e){if(e!==ot)return!1;if(!Ce)return Vu(e),Ce=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Xc(e.type,e.memoizedProps)),a=!a),a&&$e&&Fa(e),Vu(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(t===0){$e=Lt(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++;e=e.nextSibling}$e=null}}else t===27?(t=$e,Ra(e.type)?(e=Fc,Fc=null,$e=e):$e=t):$e=ot?Lt(e.stateNode.nextSibling):null;return!0}function An(){$e=ot=null,Ce=!1}function Qu(){var e=Ja;return e!==null&&(mt===null?mt=e:mt.push.apply(mt,e),Ja=null),e}function Dn(e){Ja===null?Ja=[e]:Ja.push(e)}var Ur=Y(null),Wa=null,Ft=null;function ya(e,t,a){Q(Ur,t._currentValue),t._currentValue=a}function Wt(e){e._currentValue=Ur.current,A(Ur)}function Mr(e,t,a){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===a)break;e=e.return}}function kr(e,t,a,n){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var f=o.dependencies;if(f!==null){var y=o.child;f=f.firstContext;e:for(;f!==null;){var v=f;f=o;for(var w=0;w<t.length;w++)if(v.context===t[w]){f.lanes|=a,v=f.alternate,v!==null&&(v.lanes|=a),Mr(f.return,a,e),n||(y=null);break e}f=v.next}}else if(o.tag===18){if(y=o.return,y===null)throw Error(i(341));y.lanes|=a,f=y.alternate,f!==null&&(f.lanes|=a),Mr(y,a,e),y=null}else y=o.child;if(y!==null)y.return=o;else for(y=o;y!==null;){if(y===e){y=null;break}if(o=y.sibling,o!==null){o.return=y.return,y=o;break}y=y.return}o=y}}function On(e,t,a,n){e=null;for(var o=t,f=!1;o!==null;){if(!f){if((o.flags&524288)!==0)f=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var y=o.alternate;if(y===null)throw Error(i(387));if(y=y.memoizedProps,y!==null){var v=o.type;vt(o.pendingProps.value,y.value)||(e!==null?e.push(v):e=[v])}}else if(o===xt.current){if(y=o.alternate,y===null)throw Error(i(387));y.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(il):e=[il])}o=o.return}e!==null&&kr(t,e,a,n),t.flags|=262144}function Yl(e){for(e=e.firstContext;e!==null;){if(!vt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function es(e){Wa=e,Ft=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function it(e){return Xu(Wa,e)}function Vl(e,t){return Wa===null&&es(e),Xu(e,t)}function Xu(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Ft===null){if(e===null)throw Error(i(308));Ft=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ft=Ft.next=t;return a}var cg=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},og=u.unstable_scheduleCallback,ug=u.unstable_NormalPriority,Qe={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zr(){return{controller:new cg,data:new Map,refCount:0}}function Rn(e){e.refCount--,e.refCount===0&&og(ug,function(){e.controller.abort()})}var Un=null,Lr=0,Ds=0,Os=null;function dg(e,t){if(Un===null){var a=Un=[];Lr=0,Ds=Bc(),Os={status:"pending",value:void 0,then:function(n){a.push(n)}}}return Lr++,t.then(Ku,Ku),t}function Ku(){if(--Lr===0&&Un!==null){Os!==null&&(Os.status="fulfilled");var e=Un;Un=null,Ds=0,Os=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function fg(e,t){var a=[],n={status:"pending",value:null,reason:null,then:function(o){a.push(o)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var o=0;o<a.length;o++)(0,a[o])(t)},function(o){for(n.status="rejected",n.reason=o,o=0;o<a.length;o++)(0,a[o])(void 0)}),n}var Zu=T.S;T.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&dg(e,t),Zu!==null&&Zu(e,t)};var ts=Y(null);function qr(){var e=ts.current;return e!==null?e:ze.pooledCache}function Ql(e,t){t===null?Q(ts,ts.current):Q(ts,t.pool)}function Ju(){var e=qr();return e===null?null:{parent:Qe._currentValue,pool:e}}var Mn=Error(i(460)),Fu=Error(i(474)),Xl=Error(i(542)),Br={then:function(){}};function Wu(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Kl(){}function ed(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Kl,Kl),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ad(e),e;default:if(typeof t.status=="string")t.then(Kl,Kl);else{if(e=ze,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=n}},function(n){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ad(e),e}throw kn=t,Mn}}var kn=null;function td(){if(kn===null)throw Error(i(459));var e=kn;return kn=null,e}function ad(e){if(e===Mn||e===Xl)throw Error(i(483))}var pa=!1;function Hr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $r(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function va(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ba(e,t,a){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(Ae&2)!==0){var o=n.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),n.pending=t,t=$l(e),Gu(e,null,a),t}return Hl(e,n,t,a),$l(e)}function zn(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,Ko(e,a)}}function Gr(e,t){var a=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var o=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var y={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?o=f=y:f=f.next=y,a=a.next}while(a!==null);f===null?o=f=t:f=f.next=t}else o=f=t;a={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:f,shared:n.shared,callbacks:n.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Ir=!1;function Ln(){if(Ir){var e=Os;if(e!==null)throw e}}function qn(e,t,a,n){Ir=!1;var o=e.updateQueue;pa=!1;var f=o.firstBaseUpdate,y=o.lastBaseUpdate,v=o.shared.pending;if(v!==null){o.shared.pending=null;var w=v,M=w.next;w.next=null,y===null?f=M:y.next=M,y=w;var $=e.alternate;$!==null&&($=$.updateQueue,v=$.lastBaseUpdate,v!==y&&(v===null?$.firstBaseUpdate=M:v.next=M,$.lastBaseUpdate=w))}if(f!==null){var P=o.baseState;y=0,$=M=w=null,v=f;do{var k=v.lane&-536870913,z=k!==v.lane;if(z?(Te&k)===k:(n&k)===k){k!==0&&k===Ds&&(Ir=!0),$!==null&&($=$.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var fe=e,oe=v;k=t;var Ue=a;switch(oe.tag){case 1:if(fe=oe.payload,typeof fe=="function"){P=fe.call(Ue,P,k);break e}P=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=oe.payload,k=typeof fe=="function"?fe.call(Ue,P,k):fe,k==null)break e;P=p({},P,k);break e;case 2:pa=!0}}k=v.callback,k!==null&&(e.flags|=64,z&&(e.flags|=8192),z=o.callbacks,z===null?o.callbacks=[k]:z.push(k))}else z={lane:k,tag:v.tag,payload:v.payload,callback:v.callback,next:null},$===null?(M=$=z,w=P):$=$.next=z,y|=k;if(v=v.next,v===null){if(v=o.shared.pending,v===null)break;z=v,v=z.next,z.next=null,o.lastBaseUpdate=z,o.shared.pending=null}}while(!0);$===null&&(w=P),o.baseState=w,o.firstBaseUpdate=M,o.lastBaseUpdate=$,f===null&&(o.shared.lanes=0),Ca|=y,e.lanes=y,e.memoizedState=P}}function sd(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function nd(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)sd(a[e],t)}var Rs=Y(null),Zl=Y(0);function ld(e,t){e=ia,Q(Zl,e),Q(Rs,t),ia=e|t.baseLanes}function Pr(){Q(Zl,ia),Q(Rs,Rs.current)}function Yr(){ia=Zl.current,A(Rs),A(Zl)}var ja=0,pe=null,Oe=null,Ye=null,Jl=!1,Us=!1,as=!1,Fl=0,Bn=0,Ms=null,hg=0;function Ie(){throw Error(i(321))}function Vr(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!vt(e[a],t[a]))return!1;return!0}function Qr(e,t,a,n,o,f){return ja=f,pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,T.H=e===null||e.memoizedState===null?Gd:Id,as=!1,f=a(n,o),as=!1,Us&&(f=rd(t,a,n,o)),id(e),f}function id(e){T.H=ni;var t=Oe!==null&&Oe.next!==null;if(ja=0,Ye=Oe=pe=null,Jl=!1,Bn=0,Ms=null,t)throw Error(i(300));e===null||Je||(e=e.dependencies,e!==null&&Yl(e)&&(Je=!0))}function rd(e,t,a,n){pe=e;var o=0;do{if(Us&&(Ms=null),Bn=0,Us=!1,25<=o)throw Error(i(301));if(o+=1,Ye=Oe=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}T.H=bg,f=t(a,n)}while(Us);return f}function mg(){var e=T.H,t=e.useState()[0];return t=typeof t.then=="function"?Hn(t):t,e=e.useState()[0],(Oe!==null?Oe.memoizedState:null)!==e&&(pe.flags|=1024),t}function Xr(){var e=Fl!==0;return Fl=0,e}function Kr(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Zr(e){if(Jl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Jl=!1}ja=0,Ye=Oe=pe=null,Us=!1,Bn=Fl=0,Ms=null}function ft(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?pe.memoizedState=Ye=e:Ye=Ye.next=e,Ye}function Ve(){if(Oe===null){var e=pe.alternate;e=e!==null?e.memoizedState:null}else e=Oe.next;var t=Ye===null?pe.memoizedState:Ye.next;if(t!==null)Ye=t,Oe=e;else{if(e===null)throw pe.alternate===null?Error(i(467)):Error(i(310));Oe=e,e={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},Ye===null?pe.memoizedState=Ye=e:Ye=Ye.next=e}return Ye}function Jr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Hn(e){var t=Bn;return Bn+=1,Ms===null&&(Ms=[]),e=ed(Ms,e,t),t=pe,(Ye===null?t.memoizedState:Ye.next)===null&&(t=t.alternate,T.H=t===null||t.memoizedState===null?Gd:Id),e}function Wl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Hn(e);if(e.$$typeof===q)return it(e)}throw Error(i(438,String(e)))}function Fr(e){var t=null,a=pe.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var n=pe.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Jr(),pe.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),n=0;n<e;n++)a[n]=K;return t.index++,a}function ea(e,t){return typeof t=="function"?t(e):t}function ei(e){var t=Ve();return Wr(t,Oe,e)}function Wr(e,t,a){var n=e.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=a;var o=e.baseQueue,f=n.pending;if(f!==null){if(o!==null){var y=o.next;o.next=f.next,f.next=y}t.baseQueue=o=f,n.pending=null}if(f=e.baseState,o===null)e.memoizedState=f;else{t=o.next;var v=y=null,w=null,M=t,$=!1;do{var P=M.lane&-536870913;if(P!==M.lane?(Te&P)===P:(ja&P)===P){var k=M.revertLane;if(k===0)w!==null&&(w=w.next={lane:0,revertLane:0,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),P===Ds&&($=!0);else if((ja&k)===k){M=M.next,k===Ds&&($=!0);continue}else P={lane:0,revertLane:M.revertLane,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null},w===null?(v=w=P,y=f):w=w.next=P,pe.lanes|=k,Ca|=k;P=M.action,as&&a(f,P),f=M.hasEagerState?M.eagerState:a(f,P)}else k={lane:P,revertLane:M.revertLane,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null},w===null?(v=w=k,y=f):w=w.next=k,pe.lanes|=P,Ca|=P;M=M.next}while(M!==null&&M!==t);if(w===null?y=f:w.next=v,!vt(f,e.memoizedState)&&(Je=!0,$&&(a=Os,a!==null)))throw a;e.memoizedState=f,e.baseState=y,e.baseQueue=w,n.lastRenderedState=f}return o===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function ec(e){var t=Ve(),a=t.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=e;var n=a.dispatch,o=a.pending,f=t.memoizedState;if(o!==null){a.pending=null;var y=o=o.next;do f=e(f,y.action),y=y.next;while(y!==o);vt(f,t.memoizedState)||(Je=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),a.lastRenderedState=f}return[f,n]}function cd(e,t,a){var n=pe,o=Ve(),f=Ce;if(f){if(a===void 0)throw Error(i(407));a=a()}else a=t();var y=!vt((Oe||o).memoizedState,a);y&&(o.memoizedState=a,Je=!0),o=o.queue;var v=dd.bind(null,n,o,e);if($n(2048,8,v,[e]),o.getSnapshot!==t||y||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,ks(9,ti(),ud.bind(null,n,o,a,t),null),ze===null)throw Error(i(349));f||(ja&124)!==0||od(n,t,a)}return a}function od(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=pe.updateQueue,t===null?(t=Jr(),pe.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function ud(e,t,a,n){t.value=a,t.getSnapshot=n,fd(t)&&hd(e)}function dd(e,t,a){return a(function(){fd(t)&&hd(e)})}function fd(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!vt(e,a)}catch{return!0}}function hd(e){var t=Ts(e,2);t!==null&&Nt(t,e,2)}function tc(e){var t=ft();if(typeof e=="function"){var a=e;if(e=a(),as){ma(!0);try{a()}finally{ma(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:e},t}function md(e,t,a,n){return e.baseState=a,Wr(e,Oe,typeof n=="function"?n:ea)}function gg(e,t,a,n,o){if(si(e))throw Error(i(485));if(e=t.action,e!==null){var f={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){f.listeners.push(y)}};T.T!==null?a(!0):f.isTransition=!1,n(f),a=t.pending,a===null?(f.next=t.pending=f,gd(t,f)):(f.next=a.next,t.pending=a.next=f)}}function gd(e,t){var a=t.action,n=t.payload,o=e.state;if(t.isTransition){var f=T.T,y={};T.T=y;try{var v=a(o,n),w=T.S;w!==null&&w(y,v),xd(e,t,v)}catch(M){ac(e,t,M)}finally{T.T=f}}else try{f=a(o,n),xd(e,t,f)}catch(M){ac(e,t,M)}}function xd(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(n){yd(e,t,n)},function(n){return ac(e,t,n)}):yd(e,t,a)}function yd(e,t,a){t.status="fulfilled",t.value=a,pd(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,gd(e,a)))}function ac(e,t,a){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=a,pd(t),t=t.next;while(t!==n)}e.action=null}function pd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function vd(e,t){return t}function bd(e,t){if(Ce){var a=ze.formState;if(a!==null){e:{var n=pe;if(Ce){if($e){t:{for(var o=$e,f=Gt;o.nodeType!==8;){if(!f){o=null;break t}if(o=Lt(o.nextSibling),o===null){o=null;break t}}f=o.data,o=f==="F!"||f==="F"?o:null}if(o){$e=Lt(o.nextSibling),n=o.data==="F!";break e}}Fa(n)}n=!1}n&&(t=a[0])}}return a=ft(),a.memoizedState=a.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vd,lastRenderedState:t},a.queue=n,a=Bd.bind(null,pe,n),n.dispatch=a,n=tc(!1),f=rc.bind(null,pe,!1,n.queue),n=ft(),o={state:t,dispatch:null,action:e,pending:null},n.queue=o,a=gg.bind(null,pe,o,f,a),o.dispatch=a,n.memoizedState=e,[t,a,!1]}function jd(e){var t=Ve();return _d(t,Oe,e)}function _d(e,t,a){if(t=Wr(e,t,vd)[0],e=ei(ea)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=Hn(t)}catch(y){throw y===Mn?Xl:y}else n=t;t=Ve();var o=t.queue,f=o.dispatch;return a!==t.memoizedState&&(pe.flags|=2048,ks(9,ti(),xg.bind(null,o,a),null)),[n,f,e]}function xg(e,t){e.action=t}function wd(e){var t=Ve(),a=Oe;if(a!==null)return _d(t,a,e);Ve(),t=t.memoizedState,a=Ve();var n=a.queue.dispatch;return a.memoizedState=e,[t,n,!1]}function ks(e,t,a,n){return e={tag:e,create:a,deps:n,inst:t,next:null},t=pe.updateQueue,t===null&&(t=Jr(),pe.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(n=a.next,a.next=e,e.next=n,t.lastEffect=e),e}function ti(){return{destroy:void 0,resource:void 0}}function Sd(){return Ve().memoizedState}function ai(e,t,a,n){var o=ft();n=n===void 0?null:n,pe.flags|=e,o.memoizedState=ks(1|t,ti(),a,n)}function $n(e,t,a,n){var o=Ve();n=n===void 0?null:n;var f=o.memoizedState.inst;Oe!==null&&n!==null&&Vr(n,Oe.memoizedState.deps)?o.memoizedState=ks(t,f,a,n):(pe.flags|=e,o.memoizedState=ks(1|t,f,a,n))}function Nd(e,t){ai(8390656,8,e,t)}function Td(e,t){$n(2048,8,e,t)}function Ed(e,t){return $n(4,2,e,t)}function Cd(e,t){return $n(4,4,e,t)}function Ad(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Dd(e,t,a){a=a!=null?a.concat([e]):null,$n(4,4,Ad.bind(null,t,e),a)}function sc(){}function Od(e,t){var a=Ve();t=t===void 0?null:t;var n=a.memoizedState;return t!==null&&Vr(t,n[1])?n[0]:(a.memoizedState=[e,t],e)}function Rd(e,t){var a=Ve();t=t===void 0?null:t;var n=a.memoizedState;if(t!==null&&Vr(t,n[1]))return n[0];if(n=e(),as){ma(!0);try{e()}finally{ma(!1)}}return a.memoizedState=[n,t],n}function nc(e,t,a){return a===void 0||(ja&1073741824)!==0?e.memoizedState=t:(e.memoizedState=a,e=zf(),pe.lanes|=e,Ca|=e,a)}function Ud(e,t,a,n){return vt(a,t)?a:Rs.current!==null?(e=nc(e,a,n),vt(e,t)||(Je=!0),e):(ja&42)===0?(Je=!0,e.memoizedState=a):(e=zf(),pe.lanes|=e,Ca|=e,t)}function Md(e,t,a,n,o){var f=I.p;I.p=f!==0&&8>f?f:8;var y=T.T,v={};T.T=v,rc(e,!1,t,a);try{var w=o(),M=T.S;if(M!==null&&M(v,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var $=fg(w,n);Gn(e,t,$,St(e))}else Gn(e,t,n,St(e))}catch(P){Gn(e,t,{then:function(){},status:"rejected",reason:P},St())}finally{I.p=f,T.T=y}}function yg(){}function lc(e,t,a,n){if(e.tag!==5)throw Error(i(476));var o=kd(e).queue;Md(e,o,t,W,a===null?yg:function(){return zd(e),a(n)})}function kd(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:W},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function zd(e){var t=kd(e).next.queue;Gn(e,t,{},St())}function ic(){return it(il)}function Ld(){return Ve().memoizedState}function qd(){return Ve().memoizedState}function pg(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=St();e=va(a);var n=ba(t,e,a);n!==null&&(Nt(n,t,a),zn(n,t,a)),t={cache:zr()},e.payload=t;return}t=t.return}}function vg(e,t,a){var n=St();a={lane:n,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},si(e)?Hd(t,a):(a=Tr(e,t,a,n),a!==null&&(Nt(a,e,n),$d(a,t,n)))}function Bd(e,t,a){var n=St();Gn(e,t,a,n)}function Gn(e,t,a,n){var o={lane:n,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(si(e))Hd(t,o);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var y=t.lastRenderedState,v=f(y,a);if(o.hasEagerState=!0,o.eagerState=v,vt(v,y))return Hl(e,t,o,0),ze===null&&Bl(),!1}catch{}finally{}if(a=Tr(e,t,o,n),a!==null)return Nt(a,e,n),$d(a,t,n),!0}return!1}function rc(e,t,a,n){if(n={lane:2,revertLane:Bc(),action:n,hasEagerState:!1,eagerState:null,next:null},si(e)){if(t)throw Error(i(479))}else t=Tr(e,a,n,2),t!==null&&Nt(t,e,2)}function si(e){var t=e.alternate;return e===pe||t!==null&&t===pe}function Hd(e,t){Us=Jl=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function $d(e,t,a){if((a&4194048)!==0){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,Ko(e,a)}}var ni={readContext:it,use:Wl,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useLayoutEffect:Ie,useInsertionEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useSyncExternalStore:Ie,useId:Ie,useHostTransitionStatus:Ie,useFormState:Ie,useActionState:Ie,useOptimistic:Ie,useMemoCache:Ie,useCacheRefresh:Ie},Gd={readContext:it,use:Wl,useCallback:function(e,t){return ft().memoizedState=[e,t===void 0?null:t],e},useContext:it,useEffect:Nd,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,ai(4194308,4,Ad.bind(null,t,e),a)},useLayoutEffect:function(e,t){return ai(4194308,4,e,t)},useInsertionEffect:function(e,t){ai(4,2,e,t)},useMemo:function(e,t){var a=ft();t=t===void 0?null:t;var n=e();if(as){ma(!0);try{e()}finally{ma(!1)}}return a.memoizedState=[n,t],n},useReducer:function(e,t,a){var n=ft();if(a!==void 0){var o=a(t);if(as){ma(!0);try{a(t)}finally{ma(!1)}}}else o=t;return n.memoizedState=n.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},n.queue=e,e=e.dispatch=vg.bind(null,pe,e),[n.memoizedState,e]},useRef:function(e){var t=ft();return e={current:e},t.memoizedState=e},useState:function(e){e=tc(e);var t=e.queue,a=Bd.bind(null,pe,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:sc,useDeferredValue:function(e,t){var a=ft();return nc(a,e,t)},useTransition:function(){var e=tc(!1);return e=Md.bind(null,pe,e.queue,!0,!1),ft().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var n=pe,o=ft();if(Ce){if(a===void 0)throw Error(i(407));a=a()}else{if(a=t(),ze===null)throw Error(i(349));(Te&124)!==0||od(n,t,a)}o.memoizedState=a;var f={value:a,getSnapshot:t};return o.queue=f,Nd(dd.bind(null,n,f,e),[e]),n.flags|=2048,ks(9,ti(),ud.bind(null,n,f,a,t),null),a},useId:function(){var e=ft(),t=ze.identifierPrefix;if(Ce){var a=Jt,n=Zt;a=(n&~(1<<32-pt(n)-1)).toString(32)+a,t=""+t+"R"+a,a=Fl++,0<a&&(t+="H"+a.toString(32)),t+=""}else a=hg++,t=""+t+"r"+a.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:ic,useFormState:bd,useActionState:bd,useOptimistic:function(e){var t=ft();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=rc.bind(null,pe,!0,a),a.dispatch=t,[e,t]},useMemoCache:Fr,useCacheRefresh:function(){return ft().memoizedState=pg.bind(null,pe)}},Id={readContext:it,use:Wl,useCallback:Od,useContext:it,useEffect:Td,useImperativeHandle:Dd,useInsertionEffect:Ed,useLayoutEffect:Cd,useMemo:Rd,useReducer:ei,useRef:Sd,useState:function(){return ei(ea)},useDebugValue:sc,useDeferredValue:function(e,t){var a=Ve();return Ud(a,Oe.memoizedState,e,t)},useTransition:function(){var e=ei(ea)[0],t=Ve().memoizedState;return[typeof e=="boolean"?e:Hn(e),t]},useSyncExternalStore:cd,useId:Ld,useHostTransitionStatus:ic,useFormState:jd,useActionState:jd,useOptimistic:function(e,t){var a=Ve();return md(a,Oe,e,t)},useMemoCache:Fr,useCacheRefresh:qd},bg={readContext:it,use:Wl,useCallback:Od,useContext:it,useEffect:Td,useImperativeHandle:Dd,useInsertionEffect:Ed,useLayoutEffect:Cd,useMemo:Rd,useReducer:ec,useRef:Sd,useState:function(){return ec(ea)},useDebugValue:sc,useDeferredValue:function(e,t){var a=Ve();return Oe===null?nc(a,e,t):Ud(a,Oe.memoizedState,e,t)},useTransition:function(){var e=ec(ea)[0],t=Ve().memoizedState;return[typeof e=="boolean"?e:Hn(e),t]},useSyncExternalStore:cd,useId:Ld,useHostTransitionStatus:ic,useFormState:wd,useActionState:wd,useOptimistic:function(e,t){var a=Ve();return Oe!==null?md(a,Oe,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Fr,useCacheRefresh:qd},zs=null,In=0;function li(e){var t=In;return In+=1,zs===null&&(zs=[]),ed(zs,e,t)}function Pn(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ii(e,t){throw t.$$typeof===b?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Pd(e){var t=e._init;return t(e._payload)}function Yd(e){function t(O,C){if(e){var U=O.deletions;U===null?(O.deletions=[C],O.flags|=16):U.push(C)}}function a(O,C){if(!e)return null;for(;C!==null;)t(O,C),C=C.sibling;return null}function n(O){for(var C=new Map;O!==null;)O.key!==null?C.set(O.key,O):C.set(O.index,O),O=O.sibling;return C}function o(O,C){return O=Kt(O,C),O.index=0,O.sibling=null,O}function f(O,C,U){return O.index=U,e?(U=O.alternate,U!==null?(U=U.index,U<C?(O.flags|=67108866,C):U):(O.flags|=67108866,C)):(O.flags|=1048576,C)}function y(O){return e&&O.alternate===null&&(O.flags|=67108866),O}function v(O,C,U,G){return C===null||C.tag!==6?(C=Cr(U,O.mode,G),C.return=O,C):(C=o(C,U),C.return=O,C)}function w(O,C,U,G){var se=U.type;return se===_?$(O,C,U.props.children,G,U.key):C!==null&&(C.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===xe&&Pd(se)===C.type)?(C=o(C,U.props),Pn(C,U),C.return=O,C):(C=Gl(U.type,U.key,U.props,null,O.mode,G),Pn(C,U),C.return=O,C)}function M(O,C,U,G){return C===null||C.tag!==4||C.stateNode.containerInfo!==U.containerInfo||C.stateNode.implementation!==U.implementation?(C=Ar(U,O.mode,G),C.return=O,C):(C=o(C,U.children||[]),C.return=O,C)}function $(O,C,U,G,se){return C===null||C.tag!==7?(C=Xa(U,O.mode,G,se),C.return=O,C):(C=o(C,U),C.return=O,C)}function P(O,C,U){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return C=Cr(""+C,O.mode,U),C.return=O,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case j:return U=Gl(C.type,C.key,C.props,null,O.mode,U),Pn(U,C),U.return=O,U;case S:return C=Ar(C,O.mode,U),C.return=O,C;case xe:var G=C._init;return C=G(C._payload),P(O,C,U)}if(ne(C)||ie(C))return C=Xa(C,O.mode,U,null),C.return=O,C;if(typeof C.then=="function")return P(O,li(C),U);if(C.$$typeof===q)return P(O,Vl(O,C),U);ii(O,C)}return null}function k(O,C,U,G){var se=C!==null?C.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return se!==null?null:v(O,C,""+U,G);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case j:return U.key===se?w(O,C,U,G):null;case S:return U.key===se?M(O,C,U,G):null;case xe:return se=U._init,U=se(U._payload),k(O,C,U,G)}if(ne(U)||ie(U))return se!==null?null:$(O,C,U,G,null);if(typeof U.then=="function")return k(O,C,li(U),G);if(U.$$typeof===q)return k(O,C,Vl(O,U),G);ii(O,U)}return null}function z(O,C,U,G,se){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return O=O.get(U)||null,v(C,O,""+G,se);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case j:return O=O.get(G.key===null?U:G.key)||null,w(C,O,G,se);case S:return O=O.get(G.key===null?U:G.key)||null,M(C,O,G,se);case xe:var ve=G._init;return G=ve(G._payload),z(O,C,U,G,se)}if(ne(G)||ie(G))return O=O.get(U)||null,$(C,O,G,se,null);if(typeof G.then=="function")return z(O,C,U,li(G),se);if(G.$$typeof===q)return z(O,C,U,Vl(C,G),se);ii(C,G)}return null}function fe(O,C,U,G){for(var se=null,ve=null,re=C,ue=C=0,We=null;re!==null&&ue<U.length;ue++){re.index>ue?(We=re,re=null):We=re.sibling;var Ee=k(O,re,U[ue],G);if(Ee===null){re===null&&(re=We);break}e&&re&&Ee.alternate===null&&t(O,re),C=f(Ee,C,ue),ve===null?se=Ee:ve.sibling=Ee,ve=Ee,re=We}if(ue===U.length)return a(O,re),Ce&&Za(O,ue),se;if(re===null){for(;ue<U.length;ue++)re=P(O,U[ue],G),re!==null&&(C=f(re,C,ue),ve===null?se=re:ve.sibling=re,ve=re);return Ce&&Za(O,ue),se}for(re=n(re);ue<U.length;ue++)We=z(re,O,ue,U[ue],G),We!==null&&(e&&We.alternate!==null&&re.delete(We.key===null?ue:We.key),C=f(We,C,ue),ve===null?se=We:ve.sibling=We,ve=We);return e&&re.forEach(function(La){return t(O,La)}),Ce&&Za(O,ue),se}function oe(O,C,U,G){if(U==null)throw Error(i(151));for(var se=null,ve=null,re=C,ue=C=0,We=null,Ee=U.next();re!==null&&!Ee.done;ue++,Ee=U.next()){re.index>ue?(We=re,re=null):We=re.sibling;var La=k(O,re,Ee.value,G);if(La===null){re===null&&(re=We);break}e&&re&&La.alternate===null&&t(O,re),C=f(La,C,ue),ve===null?se=La:ve.sibling=La,ve=La,re=We}if(Ee.done)return a(O,re),Ce&&Za(O,ue),se;if(re===null){for(;!Ee.done;ue++,Ee=U.next())Ee=P(O,Ee.value,G),Ee!==null&&(C=f(Ee,C,ue),ve===null?se=Ee:ve.sibling=Ee,ve=Ee);return Ce&&Za(O,ue),se}for(re=n(re);!Ee.done;ue++,Ee=U.next())Ee=z(re,O,ue,Ee.value,G),Ee!==null&&(e&&Ee.alternate!==null&&re.delete(Ee.key===null?ue:Ee.key),C=f(Ee,C,ue),ve===null?se=Ee:ve.sibling=Ee,ve=Ee);return e&&re.forEach(function(jx){return t(O,jx)}),Ce&&Za(O,ue),se}function Ue(O,C,U,G){if(typeof U=="object"&&U!==null&&U.type===_&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case j:e:{for(var se=U.key;C!==null;){if(C.key===se){if(se=U.type,se===_){if(C.tag===7){a(O,C.sibling),G=o(C,U.props.children),G.return=O,O=G;break e}}else if(C.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===xe&&Pd(se)===C.type){a(O,C.sibling),G=o(C,U.props),Pn(G,U),G.return=O,O=G;break e}a(O,C);break}else t(O,C);C=C.sibling}U.type===_?(G=Xa(U.props.children,O.mode,G,U.key),G.return=O,O=G):(G=Gl(U.type,U.key,U.props,null,O.mode,G),Pn(G,U),G.return=O,O=G)}return y(O);case S:e:{for(se=U.key;C!==null;){if(C.key===se)if(C.tag===4&&C.stateNode.containerInfo===U.containerInfo&&C.stateNode.implementation===U.implementation){a(O,C.sibling),G=o(C,U.children||[]),G.return=O,O=G;break e}else{a(O,C);break}else t(O,C);C=C.sibling}G=Ar(U,O.mode,G),G.return=O,O=G}return y(O);case xe:return se=U._init,U=se(U._payload),Ue(O,C,U,G)}if(ne(U))return fe(O,C,U,G);if(ie(U)){if(se=ie(U),typeof se!="function")throw Error(i(150));return U=se.call(U),oe(O,C,U,G)}if(typeof U.then=="function")return Ue(O,C,li(U),G);if(U.$$typeof===q)return Ue(O,C,Vl(O,U),G);ii(O,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,C!==null&&C.tag===6?(a(O,C.sibling),G=o(C,U),G.return=O,O=G):(a(O,C),G=Cr(U,O.mode,G),G.return=O,O=G),y(O)):a(O,C)}return function(O,C,U,G){try{In=0;var se=Ue(O,C,U,G);return zs=null,se}catch(re){if(re===Mn||re===Xl)throw re;var ve=bt(29,re,null,O.mode);return ve.lanes=G,ve.return=O,ve}finally{}}}var Ls=Yd(!0),Vd=Yd(!1),Rt=Y(null),It=null;function _a(e){var t=e.alternate;Q(Xe,Xe.current&1),Q(Rt,e),It===null&&(t===null||Rs.current!==null||t.memoizedState!==null)&&(It=e)}function Qd(e){if(e.tag===22){if(Q(Xe,Xe.current),Q(Rt,e),It===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(It=e)}}else wa()}function wa(){Q(Xe,Xe.current),Q(Rt,Rt.current)}function ta(e){A(Rt),It===e&&(It=null),A(Xe)}var Xe=Y(0);function ri(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Jc(a)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function cc(e,t,a,n){t=e.memoizedState,a=a(n,t),a=a==null?t:p({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var oc={enqueueSetState:function(e,t,a){e=e._reactInternals;var n=St(),o=va(n);o.payload=t,a!=null&&(o.callback=a),t=ba(e,o,n),t!==null&&(Nt(t,e,n),zn(t,e,n))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var n=St(),o=va(n);o.tag=1,o.payload=t,a!=null&&(o.callback=a),t=ba(e,o,n),t!==null&&(Nt(t,e,n),zn(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=St(),n=va(a);n.tag=2,t!=null&&(n.callback=t),t=ba(e,n,a),t!==null&&(Nt(t,e,a),zn(t,e,a))}};function Xd(e,t,a,n,o,f,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,f,y):t.prototype&&t.prototype.isPureReactComponent?!Tn(a,n)||!Tn(o,f):!0}function Kd(e,t,a,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,n),t.state!==e&&oc.enqueueReplaceState(t,t.state,null)}function ss(e,t){var a=t;if("ref"in t){a={};for(var n in t)n!=="ref"&&(a[n]=t[n])}if(e=e.defaultProps){a===t&&(a=p({},a));for(var o in e)a[o]===void 0&&(a[o]=e[o])}return a}var ci=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Zd(e){ci(e)}function Jd(e){console.error(e)}function Fd(e){ci(e)}function oi(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Wd(e,t,a){try{var n=e.onCaughtError;n(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function uc(e,t,a){return a=va(a),a.tag=3,a.payload={element:null},a.callback=function(){oi(e,t)},a}function ef(e){return e=va(e),e.tag=3,e}function tf(e,t,a,n){var o=a.type.getDerivedStateFromError;if(typeof o=="function"){var f=n.value;e.payload=function(){return o(f)},e.callback=function(){Wd(t,a,n)}}var y=a.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){Wd(t,a,n),typeof o!="function"&&(Aa===null?Aa=new Set([this]):Aa.add(this));var v=n.stack;this.componentDidCatch(n.value,{componentStack:v!==null?v:""})})}function jg(e,t,a,n,o){if(a.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=a.alternate,t!==null&&On(t,a,o,!0),a=Rt.current,a!==null){switch(a.tag){case 13:return It===null?Mc():a.alternate===null&&Ge===0&&(Ge=3),a.flags&=-257,a.flags|=65536,a.lanes=o,n===Br?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([n]):t.add(n),zc(e,n,o)),!1;case 22:return a.flags|=65536,n===Br?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([n]):a.add(n)),zc(e,n,o)),!1}throw Error(i(435,a.tag))}return zc(e,n,o),Mc(),!1}if(Ce)return t=Rt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,n!==Rr&&(e=Error(i(422),{cause:n}),Dn(Ct(e,a)))):(n!==Rr&&(t=Error(i(423),{cause:n}),Dn(Ct(t,a))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,n=Ct(n,a),o=uc(e.stateNode,n,o),Gr(e,o),Ge!==4&&(Ge=2)),!1;var f=Error(i(520),{cause:n});if(f=Ct(f,a),Jn===null?Jn=[f]:Jn.push(f),Ge!==4&&(Ge=2),t===null)return!0;n=Ct(n,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=o&-o,a.lanes|=e,e=uc(a.stateNode,n,e),Gr(a,e),!1;case 1:if(t=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Aa===null||!Aa.has(f))))return a.flags|=65536,o&=-o,a.lanes|=o,o=ef(o),tf(o,e,a,n),Gr(a,o),!1}a=a.return}while(a!==null);return!1}var af=Error(i(461)),Je=!1;function at(e,t,a,n){t.child=e===null?Vd(t,null,a,n):Ls(t,e.child,a,n)}function sf(e,t,a,n,o){a=a.render;var f=t.ref;if("ref"in n){var y={};for(var v in n)v!=="ref"&&(y[v]=n[v])}else y=n;return es(t),n=Qr(e,t,a,y,f,o),v=Xr(),e!==null&&!Je?(Kr(e,t,o),aa(e,t,o)):(Ce&&v&&Dr(t),t.flags|=1,at(e,t,n,o),t.child)}function nf(e,t,a,n,o){if(e===null){var f=a.type;return typeof f=="function"&&!Er(f)&&f.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=f,lf(e,t,f,n,o)):(e=Gl(a.type,null,n,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!pc(e,o)){var y=f.memoizedProps;if(a=a.compare,a=a!==null?a:Tn,a(y,n)&&e.ref===t.ref)return aa(e,t,o)}return t.flags|=1,e=Kt(f,n),e.ref=t.ref,e.return=t,t.child=e}function lf(e,t,a,n,o){if(e!==null){var f=e.memoizedProps;if(Tn(f,n)&&e.ref===t.ref)if(Je=!1,t.pendingProps=n=f,pc(e,o))(e.flags&131072)!==0&&(Je=!0);else return t.lanes=e.lanes,aa(e,t,o)}return dc(e,t,a,n,o)}function rf(e,t,a){var n=t.pendingProps,o=n.children,f=e!==null?e.memoizedState:null;if(n.mode==="hidden"){if((t.flags&128)!==0){if(n=f!==null?f.baseLanes|a:a,e!==null){for(o=t.child=e.child,f=0;o!==null;)f=f|o.lanes|o.childLanes,o=o.sibling;t.childLanes=f&~n}else t.childLanes=0,t.child=null;return cf(e,t,n,a)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ql(t,f!==null?f.cachePool:null),f!==null?ld(t,f):Pr(),Qd(t);else return t.lanes=t.childLanes=536870912,cf(e,t,f!==null?f.baseLanes|a:a,a)}else f!==null?(Ql(t,f.cachePool),ld(t,f),wa(),t.memoizedState=null):(e!==null&&Ql(t,null),Pr(),wa());return at(e,t,o,a),t.child}function cf(e,t,a,n){var o=qr();return o=o===null?null:{parent:Qe._currentValue,pool:o},t.memoizedState={baseLanes:a,cachePool:o},e!==null&&Ql(t,null),Pr(),Qd(t),e!==null&&On(e,t,n,!0),null}function ui(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function dc(e,t,a,n,o){return es(t),a=Qr(e,t,a,n,void 0,o),n=Xr(),e!==null&&!Je?(Kr(e,t,o),aa(e,t,o)):(Ce&&n&&Dr(t),t.flags|=1,at(e,t,a,o),t.child)}function of(e,t,a,n,o,f){return es(t),t.updateQueue=null,a=rd(t,n,a,o),id(e),n=Xr(),e!==null&&!Je?(Kr(e,t,f),aa(e,t,f)):(Ce&&n&&Dr(t),t.flags|=1,at(e,t,a,f),t.child)}function uf(e,t,a,n,o){if(es(t),t.stateNode===null){var f=Es,y=a.contextType;typeof y=="object"&&y!==null&&(f=it(y)),f=new a(n,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=oc,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=n,f.state=t.memoizedState,f.refs={},Hr(t),y=a.contextType,f.context=typeof y=="object"&&y!==null?it(y):Es,f.state=t.memoizedState,y=a.getDerivedStateFromProps,typeof y=="function"&&(cc(t,a,y,n),f.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(y=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),y!==f.state&&oc.enqueueReplaceState(f,f.state,null),qn(t,n,f,o),Ln(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){f=t.stateNode;var v=t.memoizedProps,w=ss(a,v);f.props=w;var M=f.context,$=a.contextType;y=Es,typeof $=="object"&&$!==null&&(y=it($));var P=a.getDerivedStateFromProps;$=typeof P=="function"||typeof f.getSnapshotBeforeUpdate=="function",v=t.pendingProps!==v,$||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v||M!==y)&&Kd(t,f,n,y),pa=!1;var k=t.memoizedState;f.state=k,qn(t,n,f,o),Ln(),M=t.memoizedState,v||k!==M||pa?(typeof P=="function"&&(cc(t,a,P,n),M=t.memoizedState),(w=pa||Xd(t,a,w,n,k,M,y))?($||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=M),f.props=n,f.state=M,f.context=y,n=w):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{f=t.stateNode,$r(e,t),y=t.memoizedProps,$=ss(a,y),f.props=$,P=t.pendingProps,k=f.context,M=a.contextType,w=Es,typeof M=="object"&&M!==null&&(w=it(M)),v=a.getDerivedStateFromProps,(M=typeof v=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y!==P||k!==w)&&Kd(t,f,n,w),pa=!1,k=t.memoizedState,f.state=k,qn(t,n,f,o),Ln();var z=t.memoizedState;y!==P||k!==z||pa||e!==null&&e.dependencies!==null&&Yl(e.dependencies)?(typeof v=="function"&&(cc(t,a,v,n),z=t.memoizedState),($=pa||Xd(t,a,$,n,k,z,w)||e!==null&&e.dependencies!==null&&Yl(e.dependencies))?(M||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(n,z,w),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(n,z,w)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=z),f.props=n,f.state=z,f.context=w,n=$):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),n=!1)}return f=n,ui(e,t),n=(t.flags&128)!==0,f||n?(f=t.stateNode,a=n&&typeof a.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&n?(t.child=Ls(t,e.child,null,o),t.child=Ls(t,null,a,o)):at(e,t,a,o),t.memoizedState=f.state,e=t.child):e=aa(e,t,o),e}function df(e,t,a,n){return An(),t.flags|=256,at(e,t,a,n),t.child}var fc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hc(e){return{baseLanes:e,cachePool:Ju()}}function mc(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Ut),e}function ff(e,t,a){var n=t.pendingProps,o=!1,f=(t.flags&128)!==0,y;if((y=f)||(y=e!==null&&e.memoizedState===null?!1:(Xe.current&2)!==0),y&&(o=!0,t.flags&=-129),y=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ce){if(o?_a(t):wa(),Ce){var v=$e,w;if(w=v){e:{for(w=v,v=Gt;w.nodeType!==8;){if(!v){v=null;break e}if(w=Lt(w.nextSibling),w===null){v=null;break e}}v=w}v!==null?(t.memoizedState={dehydrated:v,treeContext:Ka!==null?{id:Zt,overflow:Jt}:null,retryLane:536870912,hydrationErrors:null},w=bt(18,null,null,0),w.stateNode=v,w.return=t,t.child=w,ot=t,$e=null,w=!0):w=!1}w||Fa(t)}if(v=t.memoizedState,v!==null&&(v=v.dehydrated,v!==null))return Jc(v)?t.lanes=32:t.lanes=536870912,null;ta(t)}return v=n.children,n=n.fallback,o?(wa(),o=t.mode,v=di({mode:"hidden",children:v},o),n=Xa(n,o,a,null),v.return=t,n.return=t,v.sibling=n,t.child=v,o=t.child,o.memoizedState=hc(a),o.childLanes=mc(e,y,a),t.memoizedState=fc,n):(_a(t),gc(t,v))}if(w=e.memoizedState,w!==null&&(v=w.dehydrated,v!==null)){if(f)t.flags&256?(_a(t),t.flags&=-257,t=xc(e,t,a)):t.memoizedState!==null?(wa(),t.child=e.child,t.flags|=128,t=null):(wa(),o=n.fallback,v=t.mode,n=di({mode:"visible",children:n.children},v),o=Xa(o,v,a,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,Ls(t,e.child,null,a),n=t.child,n.memoizedState=hc(a),n.childLanes=mc(e,y,a),t.memoizedState=fc,t=o);else if(_a(t),Jc(v)){if(y=v.nextSibling&&v.nextSibling.dataset,y)var M=y.dgst;y=M,n=Error(i(419)),n.stack="",n.digest=y,Dn({value:n,source:null,stack:null}),t=xc(e,t,a)}else if(Je||On(e,t,a,!1),y=(a&e.childLanes)!==0,Je||y){if(y=ze,y!==null&&(n=a&-a,n=(n&42)!==0?1:Fi(n),n=(n&(y.suspendedLanes|a))!==0?0:n,n!==0&&n!==w.retryLane))throw w.retryLane=n,Ts(e,n),Nt(y,e,n),af;v.data==="$?"||Mc(),t=xc(e,t,a)}else v.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=w.treeContext,$e=Lt(v.nextSibling),ot=t,Ce=!0,Ja=null,Gt=!1,e!==null&&(Dt[Ot++]=Zt,Dt[Ot++]=Jt,Dt[Ot++]=Ka,Zt=e.id,Jt=e.overflow,Ka=t),t=gc(t,n.children),t.flags|=4096);return t}return o?(wa(),o=n.fallback,v=t.mode,w=e.child,M=w.sibling,n=Kt(w,{mode:"hidden",children:n.children}),n.subtreeFlags=w.subtreeFlags&65011712,M!==null?o=Kt(M,o):(o=Xa(o,v,a,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,v=e.child.memoizedState,v===null?v=hc(a):(w=v.cachePool,w!==null?(M=Qe._currentValue,w=w.parent!==M?{parent:M,pool:M}:w):w=Ju(),v={baseLanes:v.baseLanes|a,cachePool:w}),o.memoizedState=v,o.childLanes=mc(e,y,a),t.memoizedState=fc,n):(_a(t),a=e.child,e=a.sibling,a=Kt(a,{mode:"visible",children:n.children}),a.return=t,a.sibling=null,e!==null&&(y=t.deletions,y===null?(t.deletions=[e],t.flags|=16):y.push(e)),t.child=a,t.memoizedState=null,a)}function gc(e,t){return t=di({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function di(e,t){return e=bt(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function xc(e,t,a){return Ls(t,e.child,null,a),e=gc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function hf(e,t,a){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Mr(e.return,t,a)}function yc(e,t,a,n,o){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:o}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=n,f.tail=a,f.tailMode=o)}function mf(e,t,a){var n=t.pendingProps,o=n.revealOrder,f=n.tail;if(at(e,t,n.children,a),n=Xe.current,(n&2)!==0)n=n&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hf(e,a,t);else if(e.tag===19)hf(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(Q(Xe,n),o){case"forwards":for(a=t.child,o=null;a!==null;)e=a.alternate,e!==null&&ri(e)===null&&(o=a),a=a.sibling;a=o,a===null?(o=t.child,t.child=null):(o=a.sibling,a.sibling=null),yc(t,!1,o,a,f);break;case"backwards":for(a=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&ri(e)===null){t.child=o;break}e=o.sibling,o.sibling=a,a=o,o=e}yc(t,!0,a,null,f);break;case"together":yc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function aa(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Ca|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(On(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,a=Kt(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Kt(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function pc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Yl(e)))}function _g(e,t,a){switch(t.tag){case 3:qe(t,t.stateNode.containerInfo),ya(t,Qe,e.memoizedState.cache),An();break;case 27:case 5:Qi(t);break;case 4:qe(t,t.stateNode.containerInfo);break;case 10:ya(t,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(_a(t),t.flags|=128,null):(a&t.child.childLanes)!==0?ff(e,t,a):(_a(t),e=aa(e,t,a),e!==null?e.sibling:null);_a(t);break;case 19:var o=(e.flags&128)!==0;if(n=(a&t.childLanes)!==0,n||(On(e,t,a,!1),n=(a&t.childLanes)!==0),o){if(n)return mf(e,t,a);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Q(Xe,Xe.current),n)break;return null;case 22:case 23:return t.lanes=0,rf(e,t,a);case 24:ya(t,Qe,e.memoizedState.cache)}return aa(e,t,a)}function gf(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Je=!0;else{if(!pc(e,a)&&(t.flags&128)===0)return Je=!1,_g(e,t,a);Je=(e.flags&131072)!==0}else Je=!1,Ce&&(t.flags&1048576)!==0&&Pu(t,Pl,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var n=t.elementType,o=n._init;if(n=o(n._payload),t.type=n,typeof n=="function")Er(n)?(e=ss(n,e),t.tag=1,t=uf(null,t,n,e,a)):(t.tag=0,t=dc(null,t,n,e,a));else{if(n!=null){if(o=n.$$typeof,o===L){t.tag=11,t=sf(null,t,n,e,a);break e}else if(o===F){t.tag=14,t=nf(null,t,n,e,a);break e}}throw t=ae(n)||n,Error(i(306,t,""))}}return t;case 0:return dc(e,t,t.type,t.pendingProps,a);case 1:return n=t.type,o=ss(n,t.pendingProps),uf(e,t,n,o,a);case 3:e:{if(qe(t,t.stateNode.containerInfo),e===null)throw Error(i(387));n=t.pendingProps;var f=t.memoizedState;o=f.element,$r(e,t),qn(t,n,null,a);var y=t.memoizedState;if(n=y.cache,ya(t,Qe,n),n!==f.cache&&kr(t,[Qe],a,!0),Ln(),n=y.element,f.isDehydrated)if(f={element:n,isDehydrated:!1,cache:y.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=df(e,t,n,a);break e}else if(n!==o){o=Ct(Error(i(424)),t),Dn(o),t=df(e,t,n,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for($e=Lt(e.firstChild),ot=t,Ce=!0,Ja=null,Gt=!0,a=Vd(t,null,n,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(An(),n===o){t=aa(e,t,a);break e}at(e,t,n,a)}t=t.child}return t;case 26:return ui(e,t),e===null?(a=vh(t.type,null,t.pendingProps,null))?t.memoizedState=a:Ce||(a=t.type,e=t.pendingProps,n=Ni(he.current).createElement(a),n[lt]=t,n[ut]=e,nt(n,a,e),Ze(n),t.stateNode=n):t.memoizedState=vh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Qi(t),e===null&&Ce&&(n=t.stateNode=xh(t.type,t.pendingProps,he.current),ot=t,Gt=!0,o=$e,Ra(t.type)?(Fc=o,$e=Lt(n.firstChild)):$e=o),at(e,t,t.pendingProps.children,a),ui(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ce&&((o=n=$e)&&(n=Zg(n,t.type,t.pendingProps,Gt),n!==null?(t.stateNode=n,ot=t,$e=Lt(n.firstChild),Gt=!1,o=!0):o=!1),o||Fa(t)),Qi(t),o=t.type,f=t.pendingProps,y=e!==null?e.memoizedProps:null,n=f.children,Xc(o,f)?n=null:y!==null&&Xc(o,y)&&(t.flags|=32),t.memoizedState!==null&&(o=Qr(e,t,mg,null,null,a),il._currentValue=o),ui(e,t),at(e,t,n,a),t.child;case 6:return e===null&&Ce&&((e=a=$e)&&(a=Jg(a,t.pendingProps,Gt),a!==null?(t.stateNode=a,ot=t,$e=null,e=!0):e=!1),e||Fa(t)),null;case 13:return ff(e,t,a);case 4:return qe(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ls(t,null,n,a):at(e,t,n,a),t.child;case 11:return sf(e,t,t.type,t.pendingProps,a);case 7:return at(e,t,t.pendingProps,a),t.child;case 8:return at(e,t,t.pendingProps.children,a),t.child;case 12:return at(e,t,t.pendingProps.children,a),t.child;case 10:return n=t.pendingProps,ya(t,t.type,n.value),at(e,t,n.children,a),t.child;case 9:return o=t.type._context,n=t.pendingProps.children,es(t),o=it(o),n=n(o),t.flags|=1,at(e,t,n,a),t.child;case 14:return nf(e,t,t.type,t.pendingProps,a);case 15:return lf(e,t,t.type,t.pendingProps,a);case 19:return mf(e,t,a);case 31:return n=t.pendingProps,a=t.mode,n={mode:n.mode,children:n.children},e===null?(a=di(n,a),a.ref=t.ref,t.child=a,a.return=t,t=a):(a=Kt(e.child,n),a.ref=t.ref,t.child=a,a.return=t,t=a),t;case 22:return rf(e,t,a);case 24:return es(t),n=it(Qe),e===null?(o=qr(),o===null&&(o=ze,f=zr(),o.pooledCache=f,f.refCount++,f!==null&&(o.pooledCacheLanes|=a),o=f),t.memoizedState={parent:n,cache:o},Hr(t),ya(t,Qe,o)):((e.lanes&a)!==0&&($r(e,t),qn(t,null,null,a),Ln()),o=e.memoizedState,f=t.memoizedState,o.parent!==n?(o={parent:n,cache:n},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),ya(t,Qe,n)):(n=f.cache,ya(t,Qe,n),n!==o.cache&&kr(t,[Qe],a,!0))),at(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function sa(e){e.flags|=4}function xf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Sh(t)){if(t=Rt.current,t!==null&&((Te&4194048)===Te?It!==null:(Te&62914560)!==Te&&(Te&536870912)===0||t!==It))throw kn=Br,Fu;e.flags|=8192}}function fi(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Qo():536870912,e.lanes|=t,$s|=t)}function Yn(e,t){if(!Ce)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function He(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,n=0;if(t)for(var o=e.child;o!==null;)a|=o.lanes|o.childLanes,n|=o.subtreeFlags&65011712,n|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)a|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=n,e.childLanes=a,t}function wg(e,t,a){var n=t.pendingProps;switch(Or(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(t),null;case 1:return He(t),null;case 3:return a=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Wt(Qe),ha(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Cn(t)?sa(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Qu())),He(t),null;case 26:return a=t.memoizedState,e===null?(sa(t),a!==null?(He(t),xf(t,a)):(He(t),t.flags&=-16777217)):a?a!==e.memoizedState?(sa(t),He(t),xf(t,a)):(He(t),t.flags&=-16777217):(e.memoizedProps!==n&&sa(t),He(t),t.flags&=-16777217),null;case 27:wl(t),a=he.current;var o=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==n&&sa(t);else{if(!n){if(t.stateNode===null)throw Error(i(166));return He(t),null}e=ce.current,Cn(t)?Yu(t):(e=xh(o,n,a),t.stateNode=e,sa(t))}return He(t),null;case 5:if(wl(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&sa(t);else{if(!n){if(t.stateNode===null)throw Error(i(166));return He(t),null}if(e=ce.current,Cn(t))Yu(t);else{switch(o=Ni(he.current),e){case 1:e=o.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=o.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=o.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=o.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof n.is=="string"?o.createElement("select",{is:n.is}):o.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e=typeof n.is=="string"?o.createElement(a,{is:n.is}):o.createElement(a)}}e[lt]=t,e[ut]=n;e:for(o=t.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;o.sibling===null;){if(o.return===null||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=e;e:switch(nt(e,a,n),a){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&sa(t)}}return He(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&sa(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(i(166));if(e=he.current,Cn(t)){if(e=t.stateNode,a=t.memoizedProps,n=null,o=ot,o!==null)switch(o.tag){case 27:case 5:n=o.memoizedProps}e[lt]=t,e=!!(e.nodeValue===a||n!==null&&n.suppressHydrationWarning===!0||oh(e.nodeValue,a)),e||Fa(t)}else e=Ni(e).createTextNode(n),e[lt]=t,t.stateNode=e}return He(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=Cn(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(i(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));o[lt]=t}else An(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;He(t),o=!1}else o=Qu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(ta(t),t):(ta(t),null)}if(ta(t),(t.flags&128)!==0)return t.lanes=a,t;if(a=n!==null,e=e!==null&&e.memoizedState!==null,a){n=t.child,o=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(o=n.alternate.memoizedState.cachePool.pool);var f=null;n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(f=n.memoizedState.cachePool.pool),f!==o&&(n.flags|=2048)}return a!==e&&a&&(t.child.flags|=8192),fi(t,t.updateQueue),He(t),null;case 4:return ha(),e===null&&Ic(t.stateNode.containerInfo),He(t),null;case 10:return Wt(t.type),He(t),null;case 19:if(A(Xe),o=t.memoizedState,o===null)return He(t),null;if(n=(t.flags&128)!==0,f=o.rendering,f===null)if(n)Yn(o,!1);else{if(Ge!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=ri(e),f!==null){for(t.flags|=128,Yn(o,!1),e=f.updateQueue,t.updateQueue=e,fi(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Iu(a,e),a=a.sibling;return Q(Xe,Xe.current&1|2),t.child}e=e.sibling}o.tail!==null&&$t()>gi&&(t.flags|=128,n=!0,Yn(o,!1),t.lanes=4194304)}else{if(!n)if(e=ri(f),e!==null){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,fi(t,e),Yn(o,!0),o.tail===null&&o.tailMode==="hidden"&&!f.alternate&&!Ce)return He(t),null}else 2*$t()-o.renderingStartTime>gi&&a!==536870912&&(t.flags|=128,n=!0,Yn(o,!1),t.lanes=4194304);o.isBackwards?(f.sibling=t.child,t.child=f):(e=o.last,e!==null?e.sibling=f:t.child=f,o.last=f)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$t(),t.sibling=null,e=Xe.current,Q(Xe,n?e&1|2:e&1),t):(He(t),null);case 22:case 23:return ta(t),Yr(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(a&536870912)!==0&&(t.flags&128)===0&&(He(t),t.subtreeFlags&6&&(t.flags|=8192)):He(t),a=t.updateQueue,a!==null&&fi(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==a&&(t.flags|=2048),e!==null&&A(ts),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Wt(Qe),He(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function Sg(e,t){switch(Or(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Wt(Qe),ha(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return wl(t),null;case 13:if(ta(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));An()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return A(Xe),null;case 4:return ha(),null;case 10:return Wt(t.type),null;case 22:case 23:return ta(t),Yr(),e!==null&&A(ts),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Wt(Qe),null;case 25:return null;default:return null}}function yf(e,t){switch(Or(t),t.tag){case 3:Wt(Qe),ha();break;case 26:case 27:case 5:wl(t);break;case 4:ha();break;case 13:ta(t);break;case 19:A(Xe);break;case 10:Wt(t.type);break;case 22:case 23:ta(t),Yr(),e!==null&&A(ts);break;case 24:Wt(Qe)}}function Vn(e,t){try{var a=t.updateQueue,n=a!==null?a.lastEffect:null;if(n!==null){var o=n.next;a=o;do{if((a.tag&e)===e){n=void 0;var f=a.create,y=a.inst;n=f(),y.destroy=n}a=a.next}while(a!==o)}}catch(v){ke(t,t.return,v)}}function Sa(e,t,a){try{var n=t.updateQueue,o=n!==null?n.lastEffect:null;if(o!==null){var f=o.next;n=f;do{if((n.tag&e)===e){var y=n.inst,v=y.destroy;if(v!==void 0){y.destroy=void 0,o=t;var w=a,M=v;try{M()}catch($){ke(o,w,$)}}}n=n.next}while(n!==f)}}catch($){ke(t,t.return,$)}}function pf(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{nd(t,a)}catch(n){ke(e,e.return,n)}}}function vf(e,t,a){a.props=ss(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(n){ke(e,t,n)}}function Qn(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof a=="function"?e.refCleanup=a(n):a.current=n}}catch(o){ke(e,t,o)}}function Pt(e,t){var a=e.ref,n=e.refCleanup;if(a!==null)if(typeof n=="function")try{n()}catch(o){ke(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(o){ke(e,t,o)}else a.current=null}function bf(e){var t=e.type,a=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break e;case"img":a.src?n.src=a.src:a.srcSet&&(n.srcset=a.srcSet)}}catch(o){ke(e,e.return,o)}}function vc(e,t,a){try{var n=e.stateNode;Yg(n,e.type,a,t),n[ut]=t}catch(o){ke(e,e.return,o)}}function jf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ra(e.type)||e.tag===4}function bc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||jf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ra(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function jc(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Si));else if(n!==4&&(n===27&&Ra(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(jc(e,t,a),e=e.sibling;e!==null;)jc(e,t,a),e=e.sibling}function hi(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(n!==4&&(n===27&&Ra(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(hi(e,t,a),e=e.sibling;e!==null;)hi(e,t,a),e=e.sibling}function _f(e){var t=e.stateNode,a=e.memoizedProps;try{for(var n=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);nt(t,n,a),t[lt]=e,t[ut]=a}catch(f){ke(e,e.return,f)}}var na=!1,Pe=!1,_c=!1,wf=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function Ng(e,t){if(e=e.containerInfo,Vc=Oi,e=Uu(e),br(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var n=a.getSelection&&a.getSelection();if(n&&n.rangeCount!==0){a=n.anchorNode;var o=n.anchorOffset,f=n.focusNode;n=n.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var y=0,v=-1,w=-1,M=0,$=0,P=e,k=null;t:for(;;){for(var z;P!==a||o!==0&&P.nodeType!==3||(v=y+o),P!==f||n!==0&&P.nodeType!==3||(w=y+n),P.nodeType===3&&(y+=P.nodeValue.length),(z=P.firstChild)!==null;)k=P,P=z;for(;;){if(P===e)break t;if(k===a&&++M===o&&(v=y),k===f&&++$===n&&(w=y),(z=P.nextSibling)!==null)break;P=k,k=P.parentNode}P=z}a=v===-1||w===-1?null:{start:v,end:w}}else a=null}a=a||{start:0,end:0}}else a=null;for(Qc={focusedElem:e,selectionRange:a},Oi=!1,Fe=t;Fe!==null;)if(t=Fe,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Fe=e;else for(;Fe!==null;){switch(t=Fe,f=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,a=t,o=f.memoizedProps,f=f.memoizedState,n=a.stateNode;try{var fe=ss(a.type,o,a.elementType===a.type);e=n.getSnapshotBeforeUpdate(fe,f),n.__reactInternalSnapshotBeforeUpdate=e}catch(oe){ke(a,a.return,oe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Zc(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Zc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,Fe=e;break}Fe=t.return}}function Sf(e,t,a){var n=a.flags;switch(a.tag){case 0:case 11:case 15:Na(e,a),n&4&&Vn(5,a);break;case 1:if(Na(e,a),n&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(y){ke(a,a.return,y)}else{var o=ss(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(y){ke(a,a.return,y)}}n&64&&pf(a),n&512&&Qn(a,a.return);break;case 3:if(Na(e,a),n&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{nd(e,t)}catch(y){ke(a,a.return,y)}}break;case 27:t===null&&n&4&&_f(a);case 26:case 5:Na(e,a),t===null&&n&4&&bf(a),n&512&&Qn(a,a.return);break;case 12:Na(e,a);break;case 13:Na(e,a),n&4&&Ef(e,a),n&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Mg.bind(null,a),Fg(e,a))));break;case 22:if(n=a.memoizedState!==null||na,!n){t=t!==null&&t.memoizedState!==null||Pe,o=na;var f=Pe;na=n,(Pe=t)&&!f?Ta(e,a,(a.subtreeFlags&8772)!==0):Na(e,a),na=o,Pe=f}break;case 30:break;default:Na(e,a)}}function Nf(e){var t=e.alternate;t!==null&&(e.alternate=null,Nf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&tr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Be=null,ht=!1;function la(e,t,a){for(a=a.child;a!==null;)Tf(e,t,a),a=a.sibling}function Tf(e,t,a){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(mn,a)}catch{}switch(a.tag){case 26:Pe||Pt(a,t),la(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Pe||Pt(a,t);var n=Be,o=ht;Ra(a.type)&&(Be=a.stateNode,ht=!1),la(e,t,a),al(a.stateNode),Be=n,ht=o;break;case 5:Pe||Pt(a,t);case 6:if(n=Be,o=ht,Be=null,la(e,t,a),Be=n,ht=o,Be!==null)if(ht)try{(Be.nodeType===9?Be.body:Be.nodeName==="HTML"?Be.ownerDocument.body:Be).removeChild(a.stateNode)}catch(f){ke(a,t,f)}else try{Be.removeChild(a.stateNode)}catch(f){ke(a,t,f)}break;case 18:Be!==null&&(ht?(e=Be,mh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),ul(e)):mh(Be,a.stateNode));break;case 4:n=Be,o=ht,Be=a.stateNode.containerInfo,ht=!0,la(e,t,a),Be=n,ht=o;break;case 0:case 11:case 14:case 15:Pe||Sa(2,a,t),Pe||Sa(4,a,t),la(e,t,a);break;case 1:Pe||(Pt(a,t),n=a.stateNode,typeof n.componentWillUnmount=="function"&&vf(a,t,n)),la(e,t,a);break;case 21:la(e,t,a);break;case 22:Pe=(n=Pe)||a.memoizedState!==null,la(e,t,a),Pe=n;break;default:la(e,t,a)}}function Ef(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ul(e)}catch(a){ke(t,t.return,a)}}function Tg(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new wf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new wf),t;default:throw Error(i(435,e.tag))}}function wc(e,t){var a=Tg(e);t.forEach(function(n){var o=kg.bind(null,e,n);a.has(n)||(a.add(n),n.then(o,o))})}function jt(e,t){var a=t.deletions;if(a!==null)for(var n=0;n<a.length;n++){var o=a[n],f=e,y=t,v=y;e:for(;v!==null;){switch(v.tag){case 27:if(Ra(v.type)){Be=v.stateNode,ht=!1;break e}break;case 5:Be=v.stateNode,ht=!1;break e;case 3:case 4:Be=v.stateNode.containerInfo,ht=!0;break e}v=v.return}if(Be===null)throw Error(i(160));Tf(f,y,o),Be=null,ht=!1,f=o.alternate,f!==null&&(f.return=null),o.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Cf(t,e),t=t.sibling}var zt=null;function Cf(e,t){var a=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:jt(t,e),_t(e),n&4&&(Sa(3,e,e.return),Vn(3,e),Sa(5,e,e.return));break;case 1:jt(t,e),_t(e),n&512&&(Pe||a===null||Pt(a,a.return)),n&64&&na&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?n:a.concat(n))));break;case 26:var o=zt;if(jt(t,e),_t(e),n&512&&(Pe||a===null||Pt(a,a.return)),n&4){var f=a!==null?a.memoizedState:null;if(n=e.memoizedState,a===null)if(n===null)if(e.stateNode===null){e:{n=e.type,a=e.memoizedProps,o=o.ownerDocument||o;t:switch(n){case"title":f=o.getElementsByTagName("title")[0],(!f||f[yn]||f[lt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=o.createElement(n),o.head.insertBefore(f,o.querySelector("head > title"))),nt(f,n,a),f[lt]=e,Ze(f),n=f;break e;case"link":var y=_h("link","href",o).get(n+(a.href||""));if(y){for(var v=0;v<y.length;v++)if(f=y[v],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){y.splice(v,1);break t}}f=o.createElement(n),nt(f,n,a),o.head.appendChild(f);break;case"meta":if(y=_h("meta","content",o).get(n+(a.content||""))){for(v=0;v<y.length;v++)if(f=y[v],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){y.splice(v,1);break t}}f=o.createElement(n),nt(f,n,a),o.head.appendChild(f);break;default:throw Error(i(468,n))}f[lt]=e,Ze(f),n=f}e.stateNode=n}else wh(o,e.type,e.stateNode);else e.stateNode=jh(o,n,e.memoizedProps);else f!==n?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,n===null?wh(o,e.type,e.stateNode):jh(o,n,e.memoizedProps)):n===null&&e.stateNode!==null&&vc(e,e.memoizedProps,a.memoizedProps)}break;case 27:jt(t,e),_t(e),n&512&&(Pe||a===null||Pt(a,a.return)),a!==null&&n&4&&vc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(jt(t,e),_t(e),n&512&&(Pe||a===null||Pt(a,a.return)),e.flags&32){o=e.stateNode;try{vs(o,"")}catch(z){ke(e,e.return,z)}}n&4&&e.stateNode!=null&&(o=e.memoizedProps,vc(e,o,a!==null?a.memoizedProps:o)),n&1024&&(_c=!0);break;case 6:if(jt(t,e),_t(e),n&4){if(e.stateNode===null)throw Error(i(162));n=e.memoizedProps,a=e.stateNode;try{a.nodeValue=n}catch(z){ke(e,e.return,z)}}break;case 3:if(Ci=null,o=zt,zt=Ti(t.containerInfo),jt(t,e),zt=o,_t(e),n&4&&a!==null&&a.memoizedState.isDehydrated)try{ul(t.containerInfo)}catch(z){ke(e,e.return,z)}_c&&(_c=!1,Af(e));break;case 4:n=zt,zt=Ti(e.stateNode.containerInfo),jt(t,e),_t(e),zt=n;break;case 12:jt(t,e),_t(e);break;case 13:jt(t,e),_t(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ac=$t()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,wc(e,n)));break;case 22:o=e.memoizedState!==null;var w=a!==null&&a.memoizedState!==null,M=na,$=Pe;if(na=M||o,Pe=$||w,jt(t,e),Pe=$,na=M,_t(e),n&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(a===null||w||na||Pe||ns(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){w=a=t;try{if(f=w.stateNode,o)y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{v=w.stateNode;var P=w.memoizedProps.style,k=P!=null&&P.hasOwnProperty("display")?P.display:null;v.style.display=k==null||typeof k=="boolean"?"":(""+k).trim()}}catch(z){ke(w,w.return,z)}}}else if(t.tag===6){if(a===null){w=t;try{w.stateNode.nodeValue=o?"":w.memoizedProps}catch(z){ke(w,w.return,z)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(a=n.retryQueue,a!==null&&(n.retryQueue=null,wc(e,a))));break;case 19:jt(t,e),_t(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,wc(e,n)));break;case 30:break;case 21:break;default:jt(t,e),_t(e)}}function _t(e){var t=e.flags;if(t&2){try{for(var a,n=e.return;n!==null;){if(jf(n)){a=n;break}n=n.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var o=a.stateNode,f=bc(e);hi(e,f,o);break;case 5:var y=a.stateNode;a.flags&32&&(vs(y,""),a.flags&=-33);var v=bc(e);hi(e,v,y);break;case 3:case 4:var w=a.stateNode.containerInfo,M=bc(e);jc(e,M,w);break;default:throw Error(i(161))}}catch($){ke(e,e.return,$)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Af(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Af(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Na(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Sf(e,t.alternate,t),t=t.sibling}function ns(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Sa(4,t,t.return),ns(t);break;case 1:Pt(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&vf(t,t.return,a),ns(t);break;case 27:al(t.stateNode);case 26:case 5:Pt(t,t.return),ns(t);break;case 22:t.memoizedState===null&&ns(t);break;case 30:ns(t);break;default:ns(t)}e=e.sibling}}function Ta(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,o=e,f=t,y=f.flags;switch(f.tag){case 0:case 11:case 15:Ta(o,f,a),Vn(4,f);break;case 1:if(Ta(o,f,a),n=f,o=n.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(M){ke(n,n.return,M)}if(n=f,o=n.updateQueue,o!==null){var v=n.stateNode;try{var w=o.shared.hiddenCallbacks;if(w!==null)for(o.shared.hiddenCallbacks=null,o=0;o<w.length;o++)sd(w[o],v)}catch(M){ke(n,n.return,M)}}a&&y&64&&pf(f),Qn(f,f.return);break;case 27:_f(f);case 26:case 5:Ta(o,f,a),a&&n===null&&y&4&&bf(f),Qn(f,f.return);break;case 12:Ta(o,f,a);break;case 13:Ta(o,f,a),a&&y&4&&Ef(o,f);break;case 22:f.memoizedState===null&&Ta(o,f,a),Qn(f,f.return);break;case 30:break;default:Ta(o,f,a)}t=t.sibling}}function Sc(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Rn(a))}function Nc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Rn(e))}function Yt(e,t,a,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Df(e,t,a,n),t=t.sibling}function Df(e,t,a,n){var o=t.flags;switch(t.tag){case 0:case 11:case 15:Yt(e,t,a,n),o&2048&&Vn(9,t);break;case 1:Yt(e,t,a,n);break;case 3:Yt(e,t,a,n),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Rn(e)));break;case 12:if(o&2048){Yt(e,t,a,n),e=t.stateNode;try{var f=t.memoizedProps,y=f.id,v=f.onPostCommit;typeof v=="function"&&v(y,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(w){ke(t,t.return,w)}}else Yt(e,t,a,n);break;case 13:Yt(e,t,a,n);break;case 23:break;case 22:f=t.stateNode,y=t.alternate,t.memoizedState!==null?f._visibility&2?Yt(e,t,a,n):Xn(e,t):f._visibility&2?Yt(e,t,a,n):(f._visibility|=2,qs(e,t,a,n,(t.subtreeFlags&10256)!==0)),o&2048&&Sc(y,t);break;case 24:Yt(e,t,a,n),o&2048&&Nc(t.alternate,t);break;default:Yt(e,t,a,n)}}function qs(e,t,a,n,o){for(o=o&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var f=e,y=t,v=a,w=n,M=y.flags;switch(y.tag){case 0:case 11:case 15:qs(f,y,v,w,o),Vn(8,y);break;case 23:break;case 22:var $=y.stateNode;y.memoizedState!==null?$._visibility&2?qs(f,y,v,w,o):Xn(f,y):($._visibility|=2,qs(f,y,v,w,o)),o&&M&2048&&Sc(y.alternate,y);break;case 24:qs(f,y,v,w,o),o&&M&2048&&Nc(y.alternate,y);break;default:qs(f,y,v,w,o)}t=t.sibling}}function Xn(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,n=t,o=n.flags;switch(n.tag){case 22:Xn(a,n),o&2048&&Sc(n.alternate,n);break;case 24:Xn(a,n),o&2048&&Nc(n.alternate,n);break;default:Xn(a,n)}t=t.sibling}}var Kn=8192;function Bs(e){if(e.subtreeFlags&Kn)for(e=e.child;e!==null;)Of(e),e=e.sibling}function Of(e){switch(e.tag){case 26:Bs(e),e.flags&Kn&&e.memoizedState!==null&&dx(zt,e.memoizedState,e.memoizedProps);break;case 5:Bs(e);break;case 3:case 4:var t=zt;zt=Ti(e.stateNode.containerInfo),Bs(e),zt=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Kn,Kn=16777216,Bs(e),Kn=t):Bs(e));break;default:Bs(e)}}function Rf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Zn(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];Fe=n,Mf(n,e)}Rf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Uf(e),e=e.sibling}function Uf(e){switch(e.tag){case 0:case 11:case 15:Zn(e),e.flags&2048&&Sa(9,e,e.return);break;case 3:Zn(e);break;case 12:Zn(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,mi(e)):Zn(e);break;default:Zn(e)}}function mi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];Fe=n,Mf(n,e)}Rf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Sa(8,t,t.return),mi(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,mi(t));break;default:mi(t)}e=e.sibling}}function Mf(e,t){for(;Fe!==null;){var a=Fe;switch(a.tag){case 0:case 11:case 15:Sa(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var n=a.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Rn(a.memoizedState.cache)}if(n=a.child,n!==null)n.return=a,Fe=n;else e:for(a=e;Fe!==null;){n=Fe;var o=n.sibling,f=n.return;if(Nf(n),n===a){Fe=null;break e}if(o!==null){o.return=f,Fe=o;break e}Fe=f}}}var Eg={getCacheForType:function(e){var t=it(Qe),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a}},Cg=typeof WeakMap=="function"?WeakMap:Map,Ae=0,ze=null,be=null,Te=0,De=0,wt=null,Ea=!1,Hs=!1,Tc=!1,ia=0,Ge=0,Ca=0,ls=0,Ec=0,Ut=0,$s=0,Jn=null,mt=null,Cc=!1,Ac=0,gi=1/0,xi=null,Aa=null,st=0,Da=null,Gs=null,Is=0,Dc=0,Oc=null,kf=null,Fn=0,Rc=null;function St(){if((Ae&2)!==0&&Te!==0)return Te&-Te;if(T.T!==null){var e=Ds;return e!==0?e:Bc()}return Zo()}function zf(){Ut===0&&(Ut=(Te&536870912)===0||Ce?Vo():536870912);var e=Rt.current;return e!==null&&(e.flags|=32),Ut}function Nt(e,t,a){(e===ze&&(De===2||De===9)||e.cancelPendingCommit!==null)&&(Ps(e,0),Oa(e,Te,Ut,!1)),xn(e,a),((Ae&2)===0||e!==ze)&&(e===ze&&((Ae&2)===0&&(ls|=a),Ge===4&&Oa(e,Te,Ut,!1)),Vt(e))}function Lf(e,t,a){if((Ae&6)!==0)throw Error(i(327));var n=!a&&(t&124)===0&&(t&e.expiredLanes)===0||gn(e,t),o=n?Og(e,t):kc(e,t,!0),f=n;do{if(o===0){Hs&&!n&&Oa(e,t,0,!1);break}else{if(a=e.current.alternate,f&&!Ag(a)){o=kc(e,t,!1),f=!1;continue}if(o===2){if(f=t,e.errorRecoveryDisabledLanes&f)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){t=y;e:{var v=e;o=Jn;var w=v.current.memoizedState.isDehydrated;if(w&&(Ps(v,y).flags|=256),y=kc(v,y,!1),y!==2){if(Tc&&!w){v.errorRecoveryDisabledLanes|=f,ls|=f,o=4;break e}f=mt,mt=o,f!==null&&(mt===null?mt=f:mt.push.apply(mt,f))}o=y}if(f=!1,o!==2)continue}}if(o===1){Ps(e,0),Oa(e,t,0,!0);break}e:{switch(n=e,f=o,f){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:Oa(n,t,Ut,!Ea);break e;case 2:mt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(o=Ac+300-$t(),10<o)){if(Oa(n,t,Ut,!Ea),El(n,0,!0)!==0)break e;n.timeoutHandle=fh(qf.bind(null,n,a,mt,xi,Cc,t,Ut,ls,$s,Ea,f,2,-0,0),o);break e}qf(n,a,mt,xi,Cc,t,Ut,ls,$s,Ea,f,0,-0,0)}}break}while(!0);Vt(e)}function qf(e,t,a,n,o,f,y,v,w,M,$,P,k,z){if(e.timeoutHandle=-1,P=t.subtreeFlags,(P&8192||(P&16785408)===16785408)&&(ll={stylesheets:null,count:0,unsuspend:ux},Of(t),P=fx(),P!==null)){e.cancelPendingCommit=P(Yf.bind(null,e,t,f,a,n,o,y,v,w,$,1,k,z)),Oa(e,f,y,!M);return}Yf(e,t,f,a,n,o,y,v,w)}function Ag(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var n=0;n<a.length;n++){var o=a[n],f=o.getSnapshot;o=o.value;try{if(!vt(f(),o))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Oa(e,t,a,n){t&=~Ec,t&=~ls,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var o=t;0<o;){var f=31-pt(o),y=1<<f;n[f]=-1,o&=~y}a!==0&&Xo(e,a,t)}function yi(){return(Ae&6)===0?(Wn(0),!1):!0}function Uc(){if(be!==null){if(De===0)var e=be.return;else e=be,Ft=Wa=null,Zr(e),zs=null,In=0,e=be;for(;e!==null;)yf(e.alternate,e),e=e.return;be=null}}function Ps(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Qg(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Uc(),ze=e,be=a=Kt(e.current,null),Te=t,De=0,wt=null,Ea=!1,Hs=gn(e,t),Tc=!1,$s=Ut=Ec=ls=Ca=Ge=0,mt=Jn=null,Cc=!1,(t&8)!==0&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var o=31-pt(n),f=1<<o;t|=e[o],n&=~f}return ia=t,Bl(),a}function Bf(e,t){pe=null,T.H=ni,t===Mn||t===Xl?(t=td(),De=3):t===Fu?(t=td(),De=4):De=t===af?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,wt=t,be===null&&(Ge=1,oi(e,Ct(t,e.current)))}function Hf(){var e=T.H;return T.H=ni,e===null?ni:e}function $f(){var e=T.A;return T.A=Eg,e}function Mc(){Ge=4,Ea||(Te&4194048)!==Te&&Rt.current!==null||(Hs=!0),(Ca&134217727)===0&&(ls&134217727)===0||ze===null||Oa(ze,Te,Ut,!1)}function kc(e,t,a){var n=Ae;Ae|=2;var o=Hf(),f=$f();(ze!==e||Te!==t)&&(xi=null,Ps(e,t)),t=!1;var y=Ge;e:do try{if(De!==0&&be!==null){var v=be,w=wt;switch(De){case 8:Uc(),y=6;break e;case 3:case 2:case 9:case 6:Rt.current===null&&(t=!0);var M=De;if(De=0,wt=null,Ys(e,v,w,M),a&&Hs){y=0;break e}break;default:M=De,De=0,wt=null,Ys(e,v,w,M)}}Dg(),y=Ge;break}catch($){Bf(e,$)}while(!0);return t&&e.shellSuspendCounter++,Ft=Wa=null,Ae=n,T.H=o,T.A=f,be===null&&(ze=null,Te=0,Bl()),y}function Dg(){for(;be!==null;)Gf(be)}function Og(e,t){var a=Ae;Ae|=2;var n=Hf(),o=$f();ze!==e||Te!==t?(xi=null,gi=$t()+500,Ps(e,t)):Hs=gn(e,t);e:do try{if(De!==0&&be!==null){t=be;var f=wt;t:switch(De){case 1:De=0,wt=null,Ys(e,t,f,1);break;case 2:case 9:if(Wu(f)){De=0,wt=null,If(t);break}t=function(){De!==2&&De!==9||ze!==e||(De=7),Vt(e)},f.then(t,t);break e;case 3:De=7;break e;case 4:De=5;break e;case 7:Wu(f)?(De=0,wt=null,If(t)):(De=0,wt=null,Ys(e,t,f,7));break;case 5:var y=null;switch(be.tag){case 26:y=be.memoizedState;case 5:case 27:var v=be;if(!y||Sh(y)){De=0,wt=null;var w=v.sibling;if(w!==null)be=w;else{var M=v.return;M!==null?(be=M,pi(M)):be=null}break t}}De=0,wt=null,Ys(e,t,f,5);break;case 6:De=0,wt=null,Ys(e,t,f,6);break;case 8:Uc(),Ge=6;break e;default:throw Error(i(462))}}Rg();break}catch($){Bf(e,$)}while(!0);return Ft=Wa=null,T.H=n,T.A=o,Ae=a,be!==null?0:(ze=null,Te=0,Bl(),Ge)}function Rg(){for(;be!==null&&!em();)Gf(be)}function Gf(e){var t=gf(e.alternate,e,ia);e.memoizedProps=e.pendingProps,t===null?pi(e):be=t}function If(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=of(a,t,t.pendingProps,t.type,void 0,Te);break;case 11:t=of(a,t,t.pendingProps,t.type.render,t.ref,Te);break;case 5:Zr(t);default:yf(a,t),t=be=Iu(t,ia),t=gf(a,t,ia)}e.memoizedProps=e.pendingProps,t===null?pi(e):be=t}function Ys(e,t,a,n){Ft=Wa=null,Zr(t),zs=null,In=0;var o=t.return;try{if(jg(e,o,t,a,Te)){Ge=1,oi(e,Ct(a,e.current)),be=null;return}}catch(f){if(o!==null)throw be=o,f;Ge=1,oi(e,Ct(a,e.current)),be=null;return}t.flags&32768?(Ce||n===1?e=!0:Hs||(Te&536870912)!==0?e=!1:(Ea=e=!0,(n===2||n===9||n===3||n===6)&&(n=Rt.current,n!==null&&n.tag===13&&(n.flags|=16384))),Pf(t,e)):pi(t)}function pi(e){var t=e;do{if((t.flags&32768)!==0){Pf(t,Ea);return}e=t.return;var a=wg(t.alternate,t,ia);if(a!==null){be=a;return}if(t=t.sibling,t!==null){be=t;return}be=t=e}while(t!==null);Ge===0&&(Ge=5)}function Pf(e,t){do{var a=Sg(e.alternate,e);if(a!==null){a.flags&=32767,be=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){be=e;return}be=e=a}while(e!==null);Ge=6,be=null}function Yf(e,t,a,n,o,f,y,v,w){e.cancelPendingCommit=null;do vi();while(st!==0);if((Ae&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(f=t.lanes|t.childLanes,f|=Nr,um(e,a,f,y,v,w),e===ze&&(be=ze=null,Te=0),Gs=t,Da=e,Is=a,Dc=f,Oc=o,kf=n,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,zg(Sl,function(){return Zf(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||n){n=T.T,T.T=null,o=I.p,I.p=2,y=Ae,Ae|=4;try{Ng(e,t,a)}finally{Ae=y,I.p=o,T.T=n}}st=1,Vf(),Qf(),Xf()}}function Vf(){if(st===1){st=0;var e=Da,t=Gs,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=T.T,T.T=null;var n=I.p;I.p=2;var o=Ae;Ae|=4;try{Cf(t,e);var f=Qc,y=Uu(e.containerInfo),v=f.focusedElem,w=f.selectionRange;if(y!==v&&v&&v.ownerDocument&&Ru(v.ownerDocument.documentElement,v)){if(w!==null&&br(v)){var M=w.start,$=w.end;if($===void 0&&($=M),"selectionStart"in v)v.selectionStart=M,v.selectionEnd=Math.min($,v.value.length);else{var P=v.ownerDocument||document,k=P&&P.defaultView||window;if(k.getSelection){var z=k.getSelection(),fe=v.textContent.length,oe=Math.min(w.start,fe),Ue=w.end===void 0?oe:Math.min(w.end,fe);!z.extend&&oe>Ue&&(y=Ue,Ue=oe,oe=y);var O=Ou(v,oe),C=Ou(v,Ue);if(O&&C&&(z.rangeCount!==1||z.anchorNode!==O.node||z.anchorOffset!==O.offset||z.focusNode!==C.node||z.focusOffset!==C.offset)){var U=P.createRange();U.setStart(O.node,O.offset),z.removeAllRanges(),oe>Ue?(z.addRange(U),z.extend(C.node,C.offset)):(U.setEnd(C.node,C.offset),z.addRange(U))}}}}for(P=[],z=v;z=z.parentNode;)z.nodeType===1&&P.push({element:z,left:z.scrollLeft,top:z.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<P.length;v++){var G=P[v];G.element.scrollLeft=G.left,G.element.scrollTop=G.top}}Oi=!!Vc,Qc=Vc=null}finally{Ae=o,I.p=n,T.T=a}}e.current=t,st=2}}function Qf(){if(st===2){st=0;var e=Da,t=Gs,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=T.T,T.T=null;var n=I.p;I.p=2;var o=Ae;Ae|=4;try{Sf(e,t.alternate,t)}finally{Ae=o,I.p=n,T.T=a}}st=3}}function Xf(){if(st===4||st===3){st=0,tm();var e=Da,t=Gs,a=Is,n=kf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?st=5:(st=0,Gs=Da=null,Kf(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(Aa=null),Wi(a),t=t.stateNode,yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(mn,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=T.T,o=I.p,I.p=2,T.T=null;try{for(var f=e.onRecoverableError,y=0;y<n.length;y++){var v=n[y];f(v.value,{componentStack:v.stack})}}finally{T.T=t,I.p=o}}(Is&3)!==0&&vi(),Vt(e),o=e.pendingLanes,(a&4194090)!==0&&(o&42)!==0?e===Rc?Fn++:(Fn=0,Rc=e):Fn=0,Wn(0)}}function Kf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Rn(t)))}function vi(e){return Vf(),Qf(),Xf(),Zf()}function Zf(){if(st!==5)return!1;var e=Da,t=Dc;Dc=0;var a=Wi(Is),n=T.T,o=I.p;try{I.p=32>a?32:a,T.T=null,a=Oc,Oc=null;var f=Da,y=Is;if(st=0,Gs=Da=null,Is=0,(Ae&6)!==0)throw Error(i(331));var v=Ae;if(Ae|=4,Uf(f.current),Df(f,f.current,y,a),Ae=v,Wn(0,!1),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(mn,f)}catch{}return!0}finally{I.p=o,T.T=n,Kf(e,t)}}function Jf(e,t,a){t=Ct(a,t),t=uc(e.stateNode,t,2),e=ba(e,t,2),e!==null&&(xn(e,2),Vt(e))}function ke(e,t,a){if(e.tag===3)Jf(e,e,a);else for(;t!==null;){if(t.tag===3){Jf(t,e,a);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Aa===null||!Aa.has(n))){e=Ct(a,e),a=ef(2),n=ba(t,a,2),n!==null&&(tf(a,n,t,e),xn(n,2),Vt(n));break}}t=t.return}}function zc(e,t,a){var n=e.pingCache;if(n===null){n=e.pingCache=new Cg;var o=new Set;n.set(t,o)}else o=n.get(t),o===void 0&&(o=new Set,n.set(t,o));o.has(a)||(Tc=!0,o.add(a),e=Ug.bind(null,e,t,a),t.then(e,e))}function Ug(e,t,a){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ze===e&&(Te&a)===a&&(Ge===4||Ge===3&&(Te&62914560)===Te&&300>$t()-Ac?(Ae&2)===0&&Ps(e,0):Ec|=a,$s===Te&&($s=0)),Vt(e)}function Ff(e,t){t===0&&(t=Qo()),e=Ts(e,t),e!==null&&(xn(e,t),Vt(e))}function Mg(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Ff(e,a)}function kg(e,t){var a=0;switch(e.tag){case 13:var n=e.stateNode,o=e.memoizedState;o!==null&&(a=o.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(i(314))}n!==null&&n.delete(t),Ff(e,a)}function zg(e,t){return Ki(e,t)}var bi=null,Vs=null,Lc=!1,ji=!1,qc=!1,is=0;function Vt(e){e!==Vs&&e.next===null&&(Vs===null?bi=Vs=e:Vs=Vs.next=e),ji=!0,Lc||(Lc=!0,qg())}function Wn(e,t){if(!qc&&ji){qc=!0;do for(var a=!1,n=bi;n!==null;){if(e!==0){var o=n.pendingLanes;if(o===0)var f=0;else{var y=n.suspendedLanes,v=n.pingedLanes;f=(1<<31-pt(42|e)+1)-1,f&=o&~(y&~v),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,ah(n,f))}else f=Te,f=El(n,n===ze?f:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(f&3)===0||gn(n,f)||(a=!0,ah(n,f));n=n.next}while(a);qc=!1}}function Lg(){Wf()}function Wf(){ji=Lc=!1;var e=0;is!==0&&(Vg()&&(e=is),is=0);for(var t=$t(),a=null,n=bi;n!==null;){var o=n.next,f=eh(n,t);f===0?(n.next=null,a===null?bi=o:a.next=o,o===null&&(Vs=a)):(a=n,(e!==0||(f&3)!==0)&&(ji=!0)),n=o}Wn(e)}function eh(e,t){for(var a=e.suspendedLanes,n=e.pingedLanes,o=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var y=31-pt(f),v=1<<y,w=o[y];w===-1?((v&a)===0||(v&n)!==0)&&(o[y]=om(v,t)):w<=t&&(e.expiredLanes|=v),f&=~v}if(t=ze,a=Te,a=El(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,a===0||e===t&&(De===2||De===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&Zi(n),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||gn(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(n!==null&&Zi(n),Wi(a)){case 2:case 8:a=Po;break;case 32:a=Sl;break;case 268435456:a=Yo;break;default:a=Sl}return n=th.bind(null,e),a=Ki(a,n),e.callbackPriority=t,e.callbackNode=a,t}return n!==null&&n!==null&&Zi(n),e.callbackPriority=2,e.callbackNode=null,2}function th(e,t){if(st!==0&&st!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(vi()&&e.callbackNode!==a)return null;var n=Te;return n=El(e,e===ze?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(Lf(e,n,t),eh(e,$t()),e.callbackNode!=null&&e.callbackNode===a?th.bind(null,e):null)}function ah(e,t){if(vi())return null;Lf(e,t,!0)}function qg(){Xg(function(){(Ae&6)!==0?Ki(Io,Lg):Wf()})}function Bc(){return is===0&&(is=Vo()),is}function sh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Rl(""+e)}function nh(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Bg(e,t,a,n,o){if(t==="submit"&&a&&a.stateNode===o){var f=sh((o[ut]||null).action),y=n.submitter;y&&(t=(t=y[ut]||null)?sh(t.formAction):y.getAttribute("formAction"),t!==null&&(f=t,y=null));var v=new zl("action","action",null,n,o);e.push({event:v,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(is!==0){var w=y?nh(o,y):new FormData(o);lc(a,{pending:!0,data:w,method:o.method,action:f},null,w)}}else typeof f=="function"&&(v.preventDefault(),w=y?nh(o,y):new FormData(o),lc(a,{pending:!0,data:w,method:o.method,action:f},f,w))},currentTarget:o}]})}}for(var Hc=0;Hc<Sr.length;Hc++){var $c=Sr[Hc],Hg=$c.toLowerCase(),$g=$c[0].toUpperCase()+$c.slice(1);kt(Hg,"on"+$g)}kt(zu,"onAnimationEnd"),kt(Lu,"onAnimationIteration"),kt(qu,"onAnimationStart"),kt("dblclick","onDoubleClick"),kt("focusin","onFocus"),kt("focusout","onBlur"),kt(ng,"onTransitionRun"),kt(lg,"onTransitionStart"),kt(ig,"onTransitionCancel"),kt(Bu,"onTransitionEnd"),xs("onMouseEnter",["mouseout","mouseover"]),xs("onMouseLeave",["mouseout","mouseover"]),xs("onPointerEnter",["pointerout","pointerover"]),xs("onPointerLeave",["pointerout","pointerover"]),Pa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var el="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(el));function lh(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var n=e[a],o=n.event;n=n.listeners;e:{var f=void 0;if(t)for(var y=n.length-1;0<=y;y--){var v=n[y],w=v.instance,M=v.currentTarget;if(v=v.listener,w!==f&&o.isPropagationStopped())break e;f=v,o.currentTarget=M;try{f(o)}catch($){ci($)}o.currentTarget=null,f=w}else for(y=0;y<n.length;y++){if(v=n[y],w=v.instance,M=v.currentTarget,v=v.listener,w!==f&&o.isPropagationStopped())break e;f=v,o.currentTarget=M;try{f(o)}catch($){ci($)}o.currentTarget=null,f=w}}}}function je(e,t){var a=t[er];a===void 0&&(a=t[er]=new Set);var n=e+"__bubble";a.has(n)||(ih(t,e,2,!1),a.add(n))}function Gc(e,t,a){var n=0;t&&(n|=4),ih(a,e,n,t)}var _i="_reactListening"+Math.random().toString(36).slice(2);function Ic(e){if(!e[_i]){e[_i]=!0,Fo.forEach(function(a){a!=="selectionchange"&&(Gg.has(a)||Gc(a,!1,e),Gc(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_i]||(t[_i]=!0,Gc("selectionchange",!1,t))}}function ih(e,t,a,n){switch(Dh(t)){case 2:var o=gx;break;case 8:o=xx;break;default:o=so}a=o.bind(null,t,a,e),o=void 0,!dr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),n?o!==void 0?e.addEventListener(t,a,{capture:!0,passive:o}):e.addEventListener(t,a,!0):o!==void 0?e.addEventListener(t,a,{passive:o}):e.addEventListener(t,a,!1)}function Pc(e,t,a,n,o){var f=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var y=n.tag;if(y===3||y===4){var v=n.stateNode.containerInfo;if(v===o)break;if(y===4)for(y=n.return;y!==null;){var w=y.tag;if((w===3||w===4)&&y.stateNode.containerInfo===o)return;y=y.return}for(;v!==null;){if(y=hs(v),y===null)return;if(w=y.tag,w===5||w===6||w===26||w===27){n=f=y;continue e}v=v.parentNode}}n=n.return}fu(function(){var M=f,$=or(a),P=[];e:{var k=Hu.get(e);if(k!==void 0){var z=zl,fe=e;switch(e){case"keypress":if(Ml(a)===0)break e;case"keydown":case"keyup":z=zm;break;case"focusin":fe="focus",z=gr;break;case"focusout":fe="blur",z=gr;break;case"beforeblur":case"afterblur":z=gr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":z=gu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":z=Sm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":z=Bm;break;case zu:case Lu:case qu:z=Em;break;case Bu:z=$m;break;case"scroll":case"scrollend":z=_m;break;case"wheel":z=Im;break;case"copy":case"cut":case"paste":z=Am;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":z=yu;break;case"toggle":case"beforetoggle":z=Ym}var oe=(t&4)!==0,Ue=!oe&&(e==="scroll"||e==="scrollend"),O=oe?k!==null?k+"Capture":null:k;oe=[];for(var C=M,U;C!==null;){var G=C;if(U=G.stateNode,G=G.tag,G!==5&&G!==26&&G!==27||U===null||O===null||(G=vn(C,O),G!=null&&oe.push(tl(C,G,U))),Ue)break;C=C.return}0<oe.length&&(k=new z(k,fe,null,a,$),P.push({event:k,listeners:oe}))}}if((t&7)===0){e:{if(k=e==="mouseover"||e==="pointerover",z=e==="mouseout"||e==="pointerout",k&&a!==cr&&(fe=a.relatedTarget||a.fromElement)&&(hs(fe)||fe[fs]))break e;if((z||k)&&(k=$.window===$?$:(k=$.ownerDocument)?k.defaultView||k.parentWindow:window,z?(fe=a.relatedTarget||a.toElement,z=M,fe=fe?hs(fe):null,fe!==null&&(Ue=d(fe),oe=fe.tag,fe!==Ue||oe!==5&&oe!==27&&oe!==6)&&(fe=null)):(z=null,fe=M),z!==fe)){if(oe=gu,G="onMouseLeave",O="onMouseEnter",C="mouse",(e==="pointerout"||e==="pointerover")&&(oe=yu,G="onPointerLeave",O="onPointerEnter",C="pointer"),Ue=z==null?k:pn(z),U=fe==null?k:pn(fe),k=new oe(G,C+"leave",z,a,$),k.target=Ue,k.relatedTarget=U,G=null,hs($)===M&&(oe=new oe(O,C+"enter",fe,a,$),oe.target=U,oe.relatedTarget=Ue,G=oe),Ue=G,z&&fe)t:{for(oe=z,O=fe,C=0,U=oe;U;U=Qs(U))C++;for(U=0,G=O;G;G=Qs(G))U++;for(;0<C-U;)oe=Qs(oe),C--;for(;0<U-C;)O=Qs(O),U--;for(;C--;){if(oe===O||O!==null&&oe===O.alternate)break t;oe=Qs(oe),O=Qs(O)}oe=null}else oe=null;z!==null&&rh(P,k,z,oe,!1),fe!==null&&Ue!==null&&rh(P,Ue,fe,oe,!0)}}e:{if(k=M?pn(M):window,z=k.nodeName&&k.nodeName.toLowerCase(),z==="select"||z==="input"&&k.type==="file")var se=Nu;else if(wu(k))if(Tu)se=tg;else{se=Wm;var ve=Fm}else z=k.nodeName,!z||z.toLowerCase()!=="input"||k.type!=="checkbox"&&k.type!=="radio"?M&&rr(M.elementType)&&(se=Nu):se=eg;if(se&&(se=se(e,M))){Su(P,se,a,$);break e}ve&&ve(e,k,M),e==="focusout"&&M&&k.type==="number"&&M.memoizedProps.value!=null&&ir(k,"number",k.value)}switch(ve=M?pn(M):window,e){case"focusin":(wu(ve)||ve.contentEditable==="true")&&(ws=ve,jr=M,En=null);break;case"focusout":En=jr=ws=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,Mu(P,a,$);break;case"selectionchange":if(sg)break;case"keydown":case"keyup":Mu(P,a,$)}var re;if(yr)e:{switch(e){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else _s?ju(e,a)&&(ue="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(ue="onCompositionStart");ue&&(pu&&a.locale!=="ko"&&(_s||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&_s&&(re=hu()):(xa=$,fr="value"in xa?xa.value:xa.textContent,_s=!0)),ve=wi(M,ue),0<ve.length&&(ue=new xu(ue,e,null,a,$),P.push({event:ue,listeners:ve}),re?ue.data=re:(re=_u(a),re!==null&&(ue.data=re)))),(re=Qm?Xm(e,a):Km(e,a))&&(ue=wi(M,"onBeforeInput"),0<ue.length&&(ve=new xu("onBeforeInput","beforeinput",null,a,$),P.push({event:ve,listeners:ue}),ve.data=re)),Bg(P,e,M,a,$)}lh(P,t)})}function tl(e,t,a){return{instance:e,listener:t,currentTarget:a}}function wi(e,t){for(var a=t+"Capture",n=[];e!==null;){var o=e,f=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||f===null||(o=vn(e,a),o!=null&&n.unshift(tl(e,o,f)),o=vn(e,t),o!=null&&n.push(tl(e,o,f))),e.tag===3)return n;e=e.return}return[]}function Qs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function rh(e,t,a,n,o){for(var f=t._reactName,y=[];a!==null&&a!==n;){var v=a,w=v.alternate,M=v.stateNode;if(v=v.tag,w!==null&&w===n)break;v!==5&&v!==26&&v!==27||M===null||(w=M,o?(M=vn(a,f),M!=null&&y.unshift(tl(a,M,w))):o||(M=vn(a,f),M!=null&&y.push(tl(a,M,w)))),a=a.return}y.length!==0&&e.push({event:t,listeners:y})}var Ig=/\r\n?/g,Pg=/\u0000|\uFFFD/g;function ch(e){return(typeof e=="string"?e:""+e).replace(Ig,`
`).replace(Pg,"")}function oh(e,t){return t=ch(t),ch(e)===t}function Si(){}function Re(e,t,a,n,o,f){switch(a){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||vs(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&vs(e,""+n);break;case"className":Al(e,"class",n);break;case"tabIndex":Al(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":Al(e,a,n);break;case"style":uu(e,n,f);break;case"data":if(t!=="object"){Al(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=Rl(""+n),e.setAttribute(a,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(t!=="input"&&Re(e,t,"name",o.name,o,null),Re(e,t,"formEncType",o.formEncType,o,null),Re(e,t,"formMethod",o.formMethod,o,null),Re(e,t,"formTarget",o.formTarget,o,null)):(Re(e,t,"encType",o.encType,o,null),Re(e,t,"method",o.method,o,null),Re(e,t,"target",o.target,o,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=Rl(""+n),e.setAttribute(a,n);break;case"onClick":n!=null&&(e.onclick=Si);break;case"onScroll":n!=null&&je("scroll",e);break;case"onScrollEnd":n!=null&&je("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(i(61));if(a=n.__html,a!=null){if(o.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}a=Rl(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""+n):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":n===!0?e.setAttribute(a,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,n):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(a,n):e.removeAttribute(a);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(a):e.setAttribute(a,n);break;case"popover":je("beforetoggle",e),je("toggle",e),Cl(e,"popover",n);break;case"xlinkActuate":Qt(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":Qt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":Qt(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":Qt(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":Qt(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":Qt(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":Qt(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":Qt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":Qt(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":Cl(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=bm.get(a)||a,Cl(e,a,n))}}function Yc(e,t,a,n,o,f){switch(a){case"style":uu(e,n,f);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(i(61));if(a=n.__html,a!=null){if(o.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"children":typeof n=="string"?vs(e,n):(typeof n=="number"||typeof n=="bigint")&&vs(e,""+n);break;case"onScroll":n!=null&&je("scroll",e);break;case"onScrollEnd":n!=null&&je("scrollend",e);break;case"onClick":n!=null&&(e.onclick=Si);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wo.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(o=a.endsWith("Capture"),t=a.slice(2,o?a.length-7:void 0),f=e[ut]||null,f=f!=null?f[a]:null,typeof f=="function"&&e.removeEventListener(t,f,o),typeof n=="function")){typeof f!="function"&&f!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,n,o);break e}a in e?e[a]=n:n===!0?e.setAttribute(a,""):Cl(e,a,n)}}}function nt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",e),je("load",e);var n=!1,o=!1,f;for(f in a)if(a.hasOwnProperty(f)){var y=a[f];if(y!=null)switch(f){case"src":n=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Re(e,t,f,y,a,null)}}o&&Re(e,t,"srcSet",a.srcSet,a,null),n&&Re(e,t,"src",a.src,a,null);return;case"input":je("invalid",e);var v=f=y=o=null,w=null,M=null;for(n in a)if(a.hasOwnProperty(n)){var $=a[n];if($!=null)switch(n){case"name":o=$;break;case"type":y=$;break;case"checked":w=$;break;case"defaultChecked":M=$;break;case"value":f=$;break;case"defaultValue":v=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,t));break;default:Re(e,t,n,$,a,null)}}iu(e,f,v,w,M,y,o,!1),Dl(e);return;case"select":je("invalid",e),n=y=f=null;for(o in a)if(a.hasOwnProperty(o)&&(v=a[o],v!=null))switch(o){case"value":f=v;break;case"defaultValue":y=v;break;case"multiple":n=v;default:Re(e,t,o,v,a,null)}t=f,a=y,e.multiple=!!n,t!=null?ps(e,!!n,t,!1):a!=null&&ps(e,!!n,a,!0);return;case"textarea":je("invalid",e),f=o=n=null;for(y in a)if(a.hasOwnProperty(y)&&(v=a[y],v!=null))switch(y){case"value":n=v;break;case"defaultValue":o=v;break;case"children":f=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:Re(e,t,y,v,a,null)}cu(e,n,o,f),Dl(e);return;case"option":for(w in a)if(a.hasOwnProperty(w)&&(n=a[w],n!=null))switch(w){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:Re(e,t,w,n,a,null)}return;case"dialog":je("beforetoggle",e),je("toggle",e),je("cancel",e),je("close",e);break;case"iframe":case"object":je("load",e);break;case"video":case"audio":for(n=0;n<el.length;n++)je(el[n],e);break;case"image":je("error",e),je("load",e);break;case"details":je("toggle",e);break;case"embed":case"source":case"link":je("error",e),je("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(M in a)if(a.hasOwnProperty(M)&&(n=a[M],n!=null))switch(M){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Re(e,t,M,n,a,null)}return;default:if(rr(t)){for($ in a)a.hasOwnProperty($)&&(n=a[$],n!==void 0&&Yc(e,t,$,n,a,void 0));return}}for(v in a)a.hasOwnProperty(v)&&(n=a[v],n!=null&&Re(e,t,v,n,a,null))}function Yg(e,t,a,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,f=null,y=null,v=null,w=null,M=null,$=null;for(z in a){var P=a[z];if(a.hasOwnProperty(z)&&P!=null)switch(z){case"checked":break;case"value":break;case"defaultValue":w=P;default:n.hasOwnProperty(z)||Re(e,t,z,null,n,P)}}for(var k in n){var z=n[k];if(P=a[k],n.hasOwnProperty(k)&&(z!=null||P!=null))switch(k){case"type":f=z;break;case"name":o=z;break;case"checked":M=z;break;case"defaultChecked":$=z;break;case"value":y=z;break;case"defaultValue":v=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(i(137,t));break;default:z!==P&&Re(e,t,k,z,n,P)}}lr(e,y,v,w,M,$,f,o);return;case"select":z=y=v=k=null;for(f in a)if(w=a[f],a.hasOwnProperty(f)&&w!=null)switch(f){case"value":break;case"multiple":z=w;default:n.hasOwnProperty(f)||Re(e,t,f,null,n,w)}for(o in n)if(f=n[o],w=a[o],n.hasOwnProperty(o)&&(f!=null||w!=null))switch(o){case"value":k=f;break;case"defaultValue":v=f;break;case"multiple":y=f;default:f!==w&&Re(e,t,o,f,n,w)}t=v,a=y,n=z,k!=null?ps(e,!!a,k,!1):!!n!=!!a&&(t!=null?ps(e,!!a,t,!0):ps(e,!!a,a?[]:"",!1));return;case"textarea":z=k=null;for(v in a)if(o=a[v],a.hasOwnProperty(v)&&o!=null&&!n.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:Re(e,t,v,null,n,o)}for(y in n)if(o=n[y],f=a[y],n.hasOwnProperty(y)&&(o!=null||f!=null))switch(y){case"value":k=o;break;case"defaultValue":z=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(i(91));break;default:o!==f&&Re(e,t,y,o,n,f)}ru(e,k,z);return;case"option":for(var fe in a)if(k=a[fe],a.hasOwnProperty(fe)&&k!=null&&!n.hasOwnProperty(fe))switch(fe){case"selected":e.selected=!1;break;default:Re(e,t,fe,null,n,k)}for(w in n)if(k=n[w],z=a[w],n.hasOwnProperty(w)&&k!==z&&(k!=null||z!=null))switch(w){case"selected":e.selected=k&&typeof k!="function"&&typeof k!="symbol";break;default:Re(e,t,w,k,n,z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var oe in a)k=a[oe],a.hasOwnProperty(oe)&&k!=null&&!n.hasOwnProperty(oe)&&Re(e,t,oe,null,n,k);for(M in n)if(k=n[M],z=a[M],n.hasOwnProperty(M)&&k!==z&&(k!=null||z!=null))switch(M){case"children":case"dangerouslySetInnerHTML":if(k!=null)throw Error(i(137,t));break;default:Re(e,t,M,k,n,z)}return;default:if(rr(t)){for(var Ue in a)k=a[Ue],a.hasOwnProperty(Ue)&&k!==void 0&&!n.hasOwnProperty(Ue)&&Yc(e,t,Ue,void 0,n,k);for($ in n)k=n[$],z=a[$],!n.hasOwnProperty($)||k===z||k===void 0&&z===void 0||Yc(e,t,$,k,n,z);return}}for(var O in a)k=a[O],a.hasOwnProperty(O)&&k!=null&&!n.hasOwnProperty(O)&&Re(e,t,O,null,n,k);for(P in n)k=n[P],z=a[P],!n.hasOwnProperty(P)||k===z||k==null&&z==null||Re(e,t,P,k,n,z)}var Vc=null,Qc=null;function Ni(e){return e.nodeType===9?e:e.ownerDocument}function uh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function dh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Xc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Kc=null;function Vg(){var e=window.event;return e&&e.type==="popstate"?e===Kc?!1:(Kc=e,!0):(Kc=null,!1)}var fh=typeof setTimeout=="function"?setTimeout:void 0,Qg=typeof clearTimeout=="function"?clearTimeout:void 0,hh=typeof Promise=="function"?Promise:void 0,Xg=typeof queueMicrotask=="function"?queueMicrotask:typeof hh<"u"?function(e){return hh.resolve(null).then(e).catch(Kg)}:fh;function Kg(e){setTimeout(function(){throw e})}function Ra(e){return e==="head"}function mh(e,t){var a=t,n=0,o=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<n&&8>n){a=n;var y=e.ownerDocument;if(a&1&&al(y.documentElement),a&2&&al(y.body),a&4)for(a=y.head,al(a),y=a.firstChild;y;){var v=y.nextSibling,w=y.nodeName;y[yn]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&y.rel.toLowerCase()==="stylesheet"||a.removeChild(y),y=v}}if(o===0){e.removeChild(f),ul(t);return}o--}else a==="$"||a==="$?"||a==="$!"?o++:n=a.charCodeAt(0)-48;else n=0;a=f}while(a);ul(t)}function Zc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Zc(a),tr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Zg(e,t,a,n){for(;e.nodeType===1;){var o=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[yn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Lt(e.nextSibling),e===null)break}return null}function Jg(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Lt(e.nextSibling),e===null))return null;return e}function Jc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Fg(e,t){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")t();else{var n=function(){t(),a.removeEventListener("DOMContentLoaded",n)};a.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function Lt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Fc=null;function gh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}function xh(e,t,a){switch(t=Ni(a),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function al(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);tr(e)}var Mt=new Map,yh=new Set;function Ti(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ra=I.d;I.d={f:Wg,r:ex,D:tx,C:ax,L:sx,m:nx,X:ix,S:lx,M:rx};function Wg(){var e=ra.f(),t=yi();return e||t}function ex(e){var t=ms(e);t!==null&&t.tag===5&&t.type==="form"?zd(t):ra.r(e)}var Xs=typeof document>"u"?null:document;function ph(e,t,a){var n=Xs;if(n&&typeof t=="string"&&t){var o=Et(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof a=="string"&&(o+='[crossorigin="'+a+'"]'),yh.has(o)||(yh.add(o),e={rel:e,crossOrigin:a,href:t},n.querySelector(o)===null&&(t=n.createElement("link"),nt(t,"link",e),Ze(t),n.head.appendChild(t)))}}function tx(e){ra.D(e),ph("dns-prefetch",e,null)}function ax(e,t){ra.C(e,t),ph("preconnect",e,t)}function sx(e,t,a){ra.L(e,t,a);var n=Xs;if(n&&e&&t){var o='link[rel="preload"][as="'+Et(t)+'"]';t==="image"&&a&&a.imageSrcSet?(o+='[imagesrcset="'+Et(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(o+='[imagesizes="'+Et(a.imageSizes)+'"]')):o+='[href="'+Et(e)+'"]';var f=o;switch(t){case"style":f=Ks(e);break;case"script":f=Zs(e)}Mt.has(f)||(e=p({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Mt.set(f,e),n.querySelector(o)!==null||t==="style"&&n.querySelector(sl(f))||t==="script"&&n.querySelector(nl(f))||(t=n.createElement("link"),nt(t,"link",e),Ze(t),n.head.appendChild(t)))}}function nx(e,t){ra.m(e,t);var a=Xs;if(a&&e){var n=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+Et(n)+'"][href="'+Et(e)+'"]',f=o;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Zs(e)}if(!Mt.has(f)&&(e=p({rel:"modulepreload",href:e},t),Mt.set(f,e),a.querySelector(o)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(nl(f)))return}n=a.createElement("link"),nt(n,"link",e),Ze(n),a.head.appendChild(n)}}}function lx(e,t,a){ra.S(e,t,a);var n=Xs;if(n&&e){var o=gs(n).hoistableStyles,f=Ks(e);t=t||"default";var y=o.get(f);if(!y){var v={loading:0,preload:null};if(y=n.querySelector(sl(f)))v.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Mt.get(f))&&Wc(e,a);var w=y=n.createElement("link");Ze(w),nt(w,"link",e),w._p=new Promise(function(M,$){w.onload=M,w.onerror=$}),w.addEventListener("load",function(){v.loading|=1}),w.addEventListener("error",function(){v.loading|=2}),v.loading|=4,Ei(y,t,n)}y={type:"stylesheet",instance:y,count:1,state:v},o.set(f,y)}}}function ix(e,t){ra.X(e,t);var a=Xs;if(a&&e){var n=gs(a).hoistableScripts,o=Zs(e),f=n.get(o);f||(f=a.querySelector(nl(o)),f||(e=p({src:e,async:!0},t),(t=Mt.get(o))&&eo(e,t),f=a.createElement("script"),Ze(f),nt(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},n.set(o,f))}}function rx(e,t){ra.M(e,t);var a=Xs;if(a&&e){var n=gs(a).hoistableScripts,o=Zs(e),f=n.get(o);f||(f=a.querySelector(nl(o)),f||(e=p({src:e,async:!0,type:"module"},t),(t=Mt.get(o))&&eo(e,t),f=a.createElement("script"),Ze(f),nt(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},n.set(o,f))}}function vh(e,t,a,n){var o=(o=he.current)?Ti(o):null;if(!o)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Ks(a.href),a=gs(o).hoistableStyles,n=a.get(t),n||(n={type:"style",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Ks(a.href);var f=gs(o).hoistableStyles,y=f.get(e);if(y||(o=o.ownerDocument||o,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,y),(f=o.querySelector(sl(e)))&&!f._p&&(y.instance=f,y.state.loading=5),Mt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Mt.set(e,a),f||cx(o,e,a,y.state))),t&&n===null)throw Error(i(528,""));return y}if(t&&n!==null)throw Error(i(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Zs(a),a=gs(o).hoistableScripts,n=a.get(t),n||(n={type:"script",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Ks(e){return'href="'+Et(e)+'"'}function sl(e){return'link[rel="stylesheet"]['+e+"]"}function bh(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function cx(e,t,a,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),nt(t,"link",a),Ze(t),e.head.appendChild(t))}function Zs(e){return'[src="'+Et(e)+'"]'}function nl(e){return"script[async]"+e}function jh(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+Et(a.href)+'"]');if(n)return t.instance=n,Ze(n),n;var o=p({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),Ze(n),nt(n,"style",o),Ei(n,a.precedence,e),t.instance=n;case"stylesheet":o=Ks(a.href);var f=e.querySelector(sl(o));if(f)return t.state.loading|=4,t.instance=f,Ze(f),f;n=bh(a),(o=Mt.get(o))&&Wc(n,o),f=(e.ownerDocument||e).createElement("link"),Ze(f);var y=f;return y._p=new Promise(function(v,w){y.onload=v,y.onerror=w}),nt(f,"link",n),t.state.loading|=4,Ei(f,a.precedence,e),t.instance=f;case"script":return f=Zs(a.src),(o=e.querySelector(nl(f)))?(t.instance=o,Ze(o),o):(n=a,(o=Mt.get(f))&&(n=p({},a),eo(n,o)),e=e.ownerDocument||e,o=e.createElement("script"),Ze(o),nt(o,"link",n),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(n=t.instance,t.state.loading|=4,Ei(n,a.precedence,e));return t.instance}function Ei(e,t,a){for(var n=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=n.length?n[n.length-1]:null,f=o,y=0;y<n.length;y++){var v=n[y];if(v.dataset.precedence===t)f=v;else if(f!==o)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Wc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function eo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ci=null;function _h(e,t,a){if(Ci===null){var n=new Map,o=Ci=new Map;o.set(a,n)}else o=Ci,n=o.get(a),n||(n=new Map,o.set(a,n));if(n.has(e))return n;for(n.set(e,null),a=a.getElementsByTagName(e),o=0;o<a.length;o++){var f=a[o];if(!(f[yn]||f[lt]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var y=f.getAttribute(t)||"";y=e+y;var v=n.get(y);v?v.push(f):n.set(y,[f])}}return n}function wh(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function ox(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Sh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var ll=null;function ux(){}function dx(e,t,a){if(ll===null)throw Error(i(475));var n=ll;if(t.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var o=Ks(a.href),f=e.querySelector(sl(o));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(n.count++,n=Ai.bind(n),e.then(n,n)),t.state.loading|=4,t.instance=f,Ze(f);return}f=e.ownerDocument||e,a=bh(a),(o=Mt.get(o))&&Wc(a,o),f=f.createElement("link"),Ze(f);var y=f;y._p=new Promise(function(v,w){y.onload=v,y.onerror=w}),nt(f,"link",a),t.instance=f}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(n.count++,t=Ai.bind(n),e.addEventListener("load",t),e.addEventListener("error",t))}}function fx(){if(ll===null)throw Error(i(475));var e=ll;return e.stylesheets&&e.count===0&&to(e,e.stylesheets),0<e.count?function(t){var a=setTimeout(function(){if(e.stylesheets&&to(e,e.stylesheets),e.unsuspend){var n=e.unsuspend;e.unsuspend=null,n()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(a)}}:null}function Ai(){if(this.count--,this.count===0){if(this.stylesheets)to(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Di=null;function to(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Di=new Map,t.forEach(hx,e),Di=null,Ai.call(e))}function hx(e,t){if(!(t.state.loading&4)){var a=Di.get(e);if(a)var n=a.get(null);else{a=new Map,Di.set(e,a);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<o.length;f++){var y=o[f];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(a.set(y.dataset.precedence,y),n=y)}n&&a.set(null,n)}o=t.instance,y=o.getAttribute("data-precedence"),f=a.get(y)||n,f===n&&a.set(null,o),a.set(y,o),this.count++,n=Ai.bind(this),o.addEventListener("load",n),o.addEventListener("error",n),f?f.parentNode.insertBefore(o,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var il={$$typeof:q,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function mx(e,t,a,n,o,f,y,v){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ji(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ji(0),this.hiddenUpdates=Ji(null),this.identifierPrefix=n,this.onUncaughtError=o,this.onCaughtError=f,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=v,this.incompleteTransitions=new Map}function Nh(e,t,a,n,o,f,y,v,w,M,$,P){return e=new mx(e,t,a,y,v,w,M,P),t=1,f===!0&&(t|=24),f=bt(3,null,null,t),e.current=f,f.stateNode=e,t=zr(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:n,isDehydrated:a,cache:t},Hr(f),e}function Th(e){return e?(e=Es,e):Es}function Eh(e,t,a,n,o,f){o=Th(o),n.context===null?n.context=o:n.pendingContext=o,n=va(t),n.payload={element:a},f=f===void 0?null:f,f!==null&&(n.callback=f),a=ba(e,n,t),a!==null&&(Nt(a,e,t),zn(a,e,t))}function Ch(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function ao(e,t){Ch(e,t),(e=e.alternate)&&Ch(e,t)}function Ah(e){if(e.tag===13){var t=Ts(e,67108864);t!==null&&Nt(t,e,67108864),ao(e,67108864)}}var Oi=!0;function gx(e,t,a,n){var o=T.T;T.T=null;var f=I.p;try{I.p=2,so(e,t,a,n)}finally{I.p=f,T.T=o}}function xx(e,t,a,n){var o=T.T;T.T=null;var f=I.p;try{I.p=8,so(e,t,a,n)}finally{I.p=f,T.T=o}}function so(e,t,a,n){if(Oi){var o=no(n);if(o===null)Pc(e,t,n,Ri,a),Oh(e,n);else if(px(o,e,t,a,n))n.stopPropagation();else if(Oh(e,n),t&4&&-1<yx.indexOf(e)){for(;o!==null;){var f=ms(o);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var y=Ia(f.pendingLanes);if(y!==0){var v=f;for(v.pendingLanes|=2,v.entangledLanes|=2;y;){var w=1<<31-pt(y);v.entanglements[1]|=w,y&=~w}Vt(f),(Ae&6)===0&&(gi=$t()+500,Wn(0))}}break;case 13:v=Ts(f,2),v!==null&&Nt(v,f,2),yi(),ao(f,2)}if(f=no(n),f===null&&Pc(e,t,n,Ri,a),f===o)break;o=f}o!==null&&n.stopPropagation()}else Pc(e,t,n,null,a)}}function no(e){return e=or(e),lo(e)}var Ri=null;function lo(e){if(Ri=null,e=hs(e),e!==null){var t=d(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=h(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ri=e,null}function Dh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(am()){case Io:return 2;case Po:return 8;case Sl:case sm:return 32;case Yo:return 268435456;default:return 32}default:return 32}}var io=!1,Ua=null,Ma=null,ka=null,rl=new Map,cl=new Map,za=[],yx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Oh(e,t){switch(e){case"focusin":case"focusout":Ua=null;break;case"dragenter":case"dragleave":Ma=null;break;case"mouseover":case"mouseout":ka=null;break;case"pointerover":case"pointerout":rl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cl.delete(t.pointerId)}}function ol(e,t,a,n,o,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:a,eventSystemFlags:n,nativeEvent:f,targetContainers:[o]},t!==null&&(t=ms(t),t!==null&&Ah(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function px(e,t,a,n,o){switch(t){case"focusin":return Ua=ol(Ua,e,t,a,n,o),!0;case"dragenter":return Ma=ol(Ma,e,t,a,n,o),!0;case"mouseover":return ka=ol(ka,e,t,a,n,o),!0;case"pointerover":var f=o.pointerId;return rl.set(f,ol(rl.get(f)||null,e,t,a,n,o)),!0;case"gotpointercapture":return f=o.pointerId,cl.set(f,ol(cl.get(f)||null,e,t,a,n,o)),!0}return!1}function Rh(e){var t=hs(e.target);if(t!==null){var a=d(t);if(a!==null){if(t=a.tag,t===13){if(t=h(a),t!==null){e.blockedOn=t,dm(e.priority,function(){if(a.tag===13){var n=St();n=Fi(n);var o=Ts(a,n);o!==null&&Nt(o,a,n),ao(a,n)}});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ui(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=no(e.nativeEvent);if(a===null){a=e.nativeEvent;var n=new a.constructor(a.type,a);cr=n,a.target.dispatchEvent(n),cr=null}else return t=ms(a),t!==null&&Ah(t),e.blockedOn=a,!1;t.shift()}return!0}function Uh(e,t,a){Ui(e)&&a.delete(t)}function vx(){io=!1,Ua!==null&&Ui(Ua)&&(Ua=null),Ma!==null&&Ui(Ma)&&(Ma=null),ka!==null&&Ui(ka)&&(ka=null),rl.forEach(Uh),cl.forEach(Uh)}function Mi(e,t){e.blockedOn===t&&(e.blockedOn=null,io||(io=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,vx)))}var ki=null;function Mh(e){ki!==e&&(ki=e,u.unstable_scheduleCallback(u.unstable_NormalPriority,function(){ki===e&&(ki=null);for(var t=0;t<e.length;t+=3){var a=e[t],n=e[t+1],o=e[t+2];if(typeof n!="function"){if(lo(n||a)===null)continue;break}var f=ms(a);f!==null&&(e.splice(t,3),t-=3,lc(f,{pending:!0,data:o,method:a.method,action:n},n,o))}}))}function ul(e){function t(w){return Mi(w,e)}Ua!==null&&Mi(Ua,e),Ma!==null&&Mi(Ma,e),ka!==null&&Mi(ka,e),rl.forEach(t),cl.forEach(t);for(var a=0;a<za.length;a++){var n=za[a];n.blockedOn===e&&(n.blockedOn=null)}for(;0<za.length&&(a=za[0],a.blockedOn===null);)Rh(a),a.blockedOn===null&&za.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(n=0;n<a.length;n+=3){var o=a[n],f=a[n+1],y=o[ut]||null;if(typeof f=="function")y||Mh(a);else if(y){var v=null;if(f&&f.hasAttribute("formAction")){if(o=f,y=f[ut]||null)v=y.formAction;else if(lo(o)!==null)continue}else v=y.action;typeof v=="function"?a[n+1]=v:(a.splice(n,3),n-=3),Mh(a)}}}function ro(e){this._internalRoot=e}zi.prototype.render=ro.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var a=t.current,n=St();Eh(a,n,e,t,null,null)},zi.prototype.unmount=ro.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Eh(e.current,2,null,e,null,null),yi(),t[fs]=null}};function zi(e){this._internalRoot=e}zi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Zo();e={blockedOn:null,target:e,priority:t};for(var a=0;a<za.length&&t!==0&&t<za[a].priority;a++);za.splice(a,0,e),a===0&&Rh(e)}};var kh=l.version;if(kh!=="19.1.1")throw Error(i(527,kh,"19.1.1"));I.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=x(t),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var bx={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:T,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Li=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Li.isDisabled&&Li.supportsFiber)try{mn=Li.inject(bx),yt=Li}catch{}}return fl.createRoot=function(e,t){if(!c(e))throw Error(i(299));var a=!1,n="",o=Zd,f=Jd,y=Fd,v=null;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(y=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(v=t.unstable_transitionCallbacks)),t=Nh(e,1,!1,null,null,a,n,o,f,y,v,null),e[fs]=t.current,Ic(e),new ro(t)},fl.hydrateRoot=function(e,t,a){if(!c(e))throw Error(i(299));var n=!1,o="",f=Zd,y=Jd,v=Fd,w=null,M=null;return a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(w=a.unstable_transitionCallbacks),a.formState!==void 0&&(M=a.formState)),t=Nh(e,1,!0,t,a??null,n,o,f,y,v,w,M),t.context=Th(null),a=t.current,n=St(),n=Fi(n),o=va(n),o.callback=null,ba(a,o,n),a=n,t.current.lanes=a,xn(t,a),Vt(t),e[fs]=t.current,Ic(e),new zi(t)},fl.version="19.1.1",fl}var Yh;function Ox(){if(Yh)return uo.exports;Yh=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(l){console.error(l)}}return u(),uo.exports=Dx(),uo.exports}var Rx=Ox();const Vh=u=>{let l;const s=new Set,i=(g,p)=>{const b=typeof g=="function"?g(l):g;if(!Object.is(b,l)){const j=l;l=p??(typeof b!="object"||b===null)?b:Object.assign({},l,b),s.forEach(S=>S(l,j))}},c=()=>l,m={setState:i,getState:c,getInitialState:()=>x,subscribe:g=>(s.add(g),()=>s.delete(g))},x=l=u(i,c,m);return m},Ux=u=>u?Vh(u):Vh,Mx=u=>u;function kx(u,l=Mx){const s=qi.useSyncExternalStore(u.subscribe,qi.useCallback(()=>l(u.getState()),[u,l]),qi.useCallback(()=>l(u.getInitialState()),[u,l]));return qi.useDebugValue(s),s}const Qh=u=>{const l=Ux(u),s=i=>kx(l,i);return Object.assign(s,l),s},zx=u=>u?Qh(u):Qh,Lx="modulepreload",qx=function(u){return"/"+u},Xh={},jl=function(l,s,i){let c=Promise.resolve();if(s&&s.length>0){let g=function(p){return Promise.all(p.map(b=>Promise.resolve(b).then(j=>({status:"fulfilled",value:j}),j=>({status:"rejected",reason:j}))))};var h=g;document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),x=m?.nonce||m?.getAttribute("nonce");c=g(s.map(p=>{if(p=qx(p),p in Xh)return;Xh[p]=!0;const b=p.endsWith(".css"),j=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${j}`))return;const S=document.createElement("link");if(S.rel=b?"stylesheet":Lx,b||(S.as="script"),S.crossOrigin="",S.href=p,x&&S.setAttribute("nonce",x),document.head.appendChild(S),b)return new Promise((_,R)=>{S.addEventListener("load",_),S.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${p}`)))})}))}function d(m){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=m,window.dispatchEvent(x),!x.defaultPrevented)throw m}return c.then(m=>{for(const x of m||[])x.status==="rejected"&&d(x.reason);return l().catch(d)})},Bx=u=>{let l;return u?l=u:typeof fetch>"u"?l=(...s)=>jl(async()=>{const{default:i}=await Promise.resolve().then(()=>hn);return{default:i}},void 0).then(({default:i})=>i(...s)):l=fetch,(...s)=>l(...s)};class zo extends Error{constructor(l,s="FunctionsError",i){super(l),this.name=s,this.context=i}}class Hx extends zo{constructor(l){super("Failed to send a request to the Edge Function","FunctionsFetchError",l)}}class Kh extends zo{constructor(l){super("Relay Error invoking the Edge Function","FunctionsRelayError",l)}}class Zh extends zo{constructor(l){super("Edge Function returned a non-2xx status code","FunctionsHttpError",l)}}var wo;(function(u){u.Any="any",u.ApNortheast1="ap-northeast-1",u.ApNortheast2="ap-northeast-2",u.ApSouth1="ap-south-1",u.ApSoutheast1="ap-southeast-1",u.ApSoutheast2="ap-southeast-2",u.CaCentral1="ca-central-1",u.EuCentral1="eu-central-1",u.EuWest1="eu-west-1",u.EuWest2="eu-west-2",u.EuWest3="eu-west-3",u.SaEast1="sa-east-1",u.UsEast1="us-east-1",u.UsWest1="us-west-1",u.UsWest2="us-west-2"})(wo||(wo={}));var $x=function(u,l,s,i){function c(d){return d instanceof s?d:new s(function(h){h(d)})}return new(s||(s=Promise))(function(d,h){function m(p){try{g(i.next(p))}catch(b){h(b)}}function x(p){try{g(i.throw(p))}catch(b){h(b)}}function g(p){p.done?d(p.value):c(p.value).then(m,x)}g((i=i.apply(u,l||[])).next())})};class Gx{constructor(l,{headers:s={},customFetch:i,region:c=wo.Any}={}){this.url=l,this.headers=s,this.region=c,this.fetch=Bx(i)}setAuth(l){this.headers.Authorization=`Bearer ${l}`}invoke(l,s={}){var i;return $x(this,void 0,void 0,function*(){try{const{headers:c,method:d,body:h}=s;let m={},{region:x}=s;x||(x=this.region);const g=new URL(`${this.url}/${l}`);x&&x!=="any"&&(m["x-region"]=x,g.searchParams.set("forceFunctionRegion",x));let p;h&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)&&(typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",p=h):typeof h=="string"?(m["Content-Type"]="text/plain",p=h):typeof FormData<"u"&&h instanceof FormData?p=h:(m["Content-Type"]="application/json",p=JSON.stringify(h)));const b=yield this.fetch(g.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),c),body:p}).catch(R=>{throw new Hx(R)}),j=b.headers.get("x-relay-error");if(j&&j==="true")throw new Kh(b);if(!b.ok)throw new Zh(b);let S=((i=b.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),_;return S==="application/json"?_=yield b.json():S==="application/octet-stream"?_=yield b.blob():S==="text/event-stream"?_=b:S==="multipart/form-data"?_=yield b.formData():_=yield b.text(),{data:_,error:null,response:b}}catch(c){return{data:null,error:c,response:c instanceof Zh||c instanceof Kh?c.context:void 0}}})}}var et={},Js={},Fs={},Ws={},en={},tn={},Ix=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},fn=Ix();const Px=fn.fetch,E0=fn.fetch.bind(fn),C0=fn.Headers,Yx=fn.Request,Vx=fn.Response,hn=Object.freeze(Object.defineProperty({__proto__:null,Headers:C0,Request:Yx,Response:Vx,default:E0,fetch:Px},Symbol.toStringTag,{value:"Module"})),Qx=_x(hn);var Bi={},Jh;function A0(){if(Jh)return Bi;Jh=1,Object.defineProperty(Bi,"__esModule",{value:!0});class u extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return Bi.default=u,Bi}var Fh;function D0(){if(Fh)return tn;Fh=1;var u=tn&&tn.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(tn,"__esModule",{value:!0});const l=u(Qx),s=u(A0());class i{constructor(d){this.shouldThrowOnError=!1,this.method=d.method,this.url=d.url,this.headers=d.headers,this.schema=d.schema,this.body=d.body,this.shouldThrowOnError=d.shouldThrowOnError,this.signal=d.signal,this.isMaybeSingle=d.isMaybeSingle,d.fetch?this.fetch=d.fetch:typeof fetch>"u"?this.fetch=l.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(d,h){return this.headers=Object.assign({},this.headers),this.headers[d]=h,this}then(d,h){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const m=this.fetch;let x=m(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var p,b,j;let S=null,_=null,R=null,D=g.status,N=g.statusText;if(g.ok){if(this.method!=="HEAD"){const H=await g.text();H===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?_=H:_=JSON.parse(H))}const q=(p=this.headers.Prefer)===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),L=(b=g.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");q&&L&&L.length>1&&(R=parseInt(L[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(S={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,R=null,D=406,N="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const q=await g.text();try{S=JSON.parse(q),Array.isArray(S)&&g.status===404&&(_=[],S=null,D=200,N="OK")}catch{g.status===404&&q===""?(D=204,N="No Content"):S={message:q}}if(S&&this.isMaybeSingle&&(!((j=S?.details)===null||j===void 0)&&j.includes("0 rows"))&&(S=null,D=200,N="OK"),S&&this.shouldThrowOnError)throw new s.default(S)}return{error:S,data:_,count:R,status:D,statusText:N}});return this.shouldThrowOnError||(x=x.catch(g=>{var p,b,j;return{error:{message:`${(p=g?.name)!==null&&p!==void 0?p:"FetchError"}: ${g?.message}`,details:`${(b=g?.stack)!==null&&b!==void 0?b:""}`,hint:"",code:`${(j=g?.code)!==null&&j!==void 0?j:""}`},data:null,count:null,status:0,statusText:""}})),x.then(d,h)}returns(){return this}overrideTypes(){return this}}return tn.default=i,tn}var Wh;function O0(){if(Wh)return en;Wh=1;var u=en&&en.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(en,"__esModule",{value:!0});const l=u(D0());class s extends l.default{select(c){let d=!1;const h=(c??"*").split("").map(m=>/\s/.test(m)&&!d?"":(m==='"'&&(d=!d),m)).join("");return this.url.searchParams.set("select",h),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(c,{ascending:d=!0,nullsFirst:h,foreignTable:m,referencedTable:x=m}={}){const g=x?`${x}.order`:"order",p=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${p?`${p},`:""}${c}.${d?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(c,{foreignTable:d,referencedTable:h=d}={}){const m=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(m,`${c}`),this}range(c,d,{foreignTable:h,referencedTable:m=h}={}){const x=typeof m>"u"?"offset":`${m}.offset`,g=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(x,`${c}`),this.url.searchParams.set(g,`${d-c+1}`),this}abortSignal(c){return this.signal=c,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:c=!1,verbose:d=!1,settings:h=!1,buffers:m=!1,wal:x=!1,format:g="text"}={}){var p;const b=[c?"analyze":null,d?"verbose":null,h?"settings":null,m?"buffers":null,x?"wal":null].filter(Boolean).join("|"),j=(p=this.headers.Accept)!==null&&p!==void 0?p:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${g}; for="${j}"; options=${b};`,g==="json"?this:this}rollback(){var c;return((c=this.headers.Prefer)!==null&&c!==void 0?c:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return en.default=s,en}var e0;function Lo(){if(e0)return Ws;e0=1;var u=Ws&&Ws.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ws,"__esModule",{value:!0});const l=u(O0());class s extends l.default{eq(c,d){return this.url.searchParams.append(c,`eq.${d}`),this}neq(c,d){return this.url.searchParams.append(c,`neq.${d}`),this}gt(c,d){return this.url.searchParams.append(c,`gt.${d}`),this}gte(c,d){return this.url.searchParams.append(c,`gte.${d}`),this}lt(c,d){return this.url.searchParams.append(c,`lt.${d}`),this}lte(c,d){return this.url.searchParams.append(c,`lte.${d}`),this}like(c,d){return this.url.searchParams.append(c,`like.${d}`),this}likeAllOf(c,d){return this.url.searchParams.append(c,`like(all).{${d.join(",")}}`),this}likeAnyOf(c,d){return this.url.searchParams.append(c,`like(any).{${d.join(",")}}`),this}ilike(c,d){return this.url.searchParams.append(c,`ilike.${d}`),this}ilikeAllOf(c,d){return this.url.searchParams.append(c,`ilike(all).{${d.join(",")}}`),this}ilikeAnyOf(c,d){return this.url.searchParams.append(c,`ilike(any).{${d.join(",")}}`),this}is(c,d){return this.url.searchParams.append(c,`is.${d}`),this}in(c,d){const h=Array.from(new Set(d)).map(m=>typeof m=="string"&&new RegExp("[,()]").test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(c,`in.(${h})`),this}contains(c,d){return typeof d=="string"?this.url.searchParams.append(c,`cs.${d}`):Array.isArray(d)?this.url.searchParams.append(c,`cs.{${d.join(",")}}`):this.url.searchParams.append(c,`cs.${JSON.stringify(d)}`),this}containedBy(c,d){return typeof d=="string"?this.url.searchParams.append(c,`cd.${d}`):Array.isArray(d)?this.url.searchParams.append(c,`cd.{${d.join(",")}}`):this.url.searchParams.append(c,`cd.${JSON.stringify(d)}`),this}rangeGt(c,d){return this.url.searchParams.append(c,`sr.${d}`),this}rangeGte(c,d){return this.url.searchParams.append(c,`nxl.${d}`),this}rangeLt(c,d){return this.url.searchParams.append(c,`sl.${d}`),this}rangeLte(c,d){return this.url.searchParams.append(c,`nxr.${d}`),this}rangeAdjacent(c,d){return this.url.searchParams.append(c,`adj.${d}`),this}overlaps(c,d){return typeof d=="string"?this.url.searchParams.append(c,`ov.${d}`):this.url.searchParams.append(c,`ov.{${d.join(",")}}`),this}textSearch(c,d,{config:h,type:m}={}){let x="";m==="plain"?x="pl":m==="phrase"?x="ph":m==="websearch"&&(x="w");const g=h===void 0?"":`(${h})`;return this.url.searchParams.append(c,`${x}fts${g}.${d}`),this}match(c){return Object.entries(c).forEach(([d,h])=>{this.url.searchParams.append(d,`eq.${h}`)}),this}not(c,d,h){return this.url.searchParams.append(c,`not.${d}.${h}`),this}or(c,{foreignTable:d,referencedTable:h=d}={}){const m=h?`${h}.or`:"or";return this.url.searchParams.append(m,`(${c})`),this}filter(c,d,h){return this.url.searchParams.append(c,`${d}.${h}`),this}}return Ws.default=s,Ws}var t0;function R0(){if(t0)return Fs;t0=1;var u=Fs&&Fs.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Fs,"__esModule",{value:!0});const l=u(Lo());class s{constructor(c,{headers:d={},schema:h,fetch:m}){this.url=c,this.headers=d,this.schema=h,this.fetch=m}select(c,{head:d=!1,count:h}={}){const m=d?"HEAD":"GET";let x=!1;const g=(c??"*").split("").map(p=>/\s/.test(p)&&!x?"":(p==='"'&&(x=!x),p)).join("");return this.url.searchParams.set("select",g),h&&(this.headers.Prefer=`count=${h}`),new l.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(c,{count:d,defaultToNull:h=!0}={}){const m="POST",x=[];if(this.headers.Prefer&&x.push(this.headers.Prefer),d&&x.push(`count=${d}`),h||x.push("missing=default"),this.headers.Prefer=x.join(","),Array.isArray(c)){const g=c.reduce((p,b)=>p.concat(Object.keys(b)),[]);if(g.length>0){const p=[...new Set(g)].map(b=>`"${b}"`);this.url.searchParams.set("columns",p.join(","))}}return new l.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:this.fetch,allowEmpty:!1})}upsert(c,{onConflict:d,ignoreDuplicates:h=!1,count:m,defaultToNull:x=!0}={}){const g="POST",p=[`resolution=${h?"ignore":"merge"}-duplicates`];if(d!==void 0&&this.url.searchParams.set("on_conflict",d),this.headers.Prefer&&p.push(this.headers.Prefer),m&&p.push(`count=${m}`),x||p.push("missing=default"),this.headers.Prefer=p.join(","),Array.isArray(c)){const b=c.reduce((j,S)=>j.concat(Object.keys(S)),[]);if(b.length>0){const j=[...new Set(b)].map(S=>`"${S}"`);this.url.searchParams.set("columns",j.join(","))}}return new l.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:this.fetch,allowEmpty:!1})}update(c,{count:d}={}){const h="PATCH",m=[];return this.headers.Prefer&&m.push(this.headers.Prefer),d&&m.push(`count=${d}`),this.headers.Prefer=m.join(","),new l.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:this.fetch,allowEmpty:!1})}delete({count:c}={}){const d="DELETE",h=[];return c&&h.push(`count=${c}`),this.headers.Prefer&&h.unshift(this.headers.Prefer),this.headers.Prefer=h.join(","),new l.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Fs.default=s,Fs}var hl={},ml={},a0;function Xx(){return a0||(a0=1,Object.defineProperty(ml,"__esModule",{value:!0}),ml.version=void 0,ml.version="0.0.0-automated"),ml}var s0;function Kx(){if(s0)return hl;s0=1,Object.defineProperty(hl,"__esModule",{value:!0}),hl.DEFAULT_HEADERS=void 0;const u=Xx();return hl.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${u.version}`},hl}var n0;function Zx(){if(n0)return Js;n0=1;var u=Js&&Js.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(Js,"__esModule",{value:!0});const l=u(R0()),s=u(Lo()),i=Kx();class c{constructor(h,{headers:m={},schema:x,fetch:g}={}){this.url=h,this.headers=Object.assign(Object.assign({},i.DEFAULT_HEADERS),m),this.schemaName=x,this.fetch=g}from(h){const m=new URL(`${this.url}/${h}`);return new l.default(m,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(h){return new c(this.url,{headers:this.headers,schema:h,fetch:this.fetch})}rpc(h,m={},{head:x=!1,get:g=!1,count:p}={}){let b;const j=new URL(`${this.url}/rpc/${h}`);let S;x||g?(b=x?"HEAD":"GET",Object.entries(m).filter(([R,D])=>D!==void 0).map(([R,D])=>[R,Array.isArray(D)?`{${D.join(",")}}`:`${D}`]).forEach(([R,D])=>{j.searchParams.append(R,D)})):(b="POST",S=m);const _=Object.assign({},this.headers);return p&&(_.Prefer=`count=${p}`),new s.default({method:b,url:j,headers:_,schema:this.schemaName,body:S,fetch:this.fetch,allowEmpty:!1})}}return Js.default=c,Js}var l0;function Jx(){if(l0)return et;l0=1;var u=et&&et.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(et,"__esModule",{value:!0}),et.PostgrestError=et.PostgrestBuilder=et.PostgrestTransformBuilder=et.PostgrestFilterBuilder=et.PostgrestQueryBuilder=et.PostgrestClient=void 0;const l=u(Zx());et.PostgrestClient=l.default;const s=u(R0());et.PostgrestQueryBuilder=s.default;const i=u(Lo());et.PostgrestFilterBuilder=i.default;const c=u(O0());et.PostgrestTransformBuilder=c.default;const d=u(D0());et.PostgrestBuilder=d.default;const h=u(A0());return et.PostgrestError=h.default,et.default={PostgrestClient:l.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:c.default,PostgrestBuilder:d.default,PostgrestError:h.default},et}var Fx=Jx();const Wx=T0(Fx),{PostgrestClient:ey,PostgrestQueryBuilder:Tv,PostgrestFilterBuilder:Ev,PostgrestTransformBuilder:Cv,PostgrestBuilder:Av,PostgrestError:Dv}=Wx;function ty(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const ay=ty(),sy="2.11.15",ny=`realtime-js/${sy}`,ly="1.0.0",U0=1e4,iy=1e3;var xl;(function(u){u[u.connecting=0]="connecting",u[u.open=1]="open",u[u.closing=2]="closing",u[u.closed=3]="closed"})(xl||(xl={}));var ct;(function(u){u.closed="closed",u.errored="errored",u.joined="joined",u.joining="joining",u.leaving="leaving"})(ct||(ct={}));var Bt;(function(u){u.close="phx_close",u.error="phx_error",u.join="phx_join",u.reply="phx_reply",u.leave="phx_leave",u.access_token="access_token"})(Bt||(Bt={}));var So;(function(u){u.websocket="websocket"})(So||(So={}));var us;(function(u){u.Connecting="connecting",u.Open="open",u.Closing="closing",u.Closed="closed"})(us||(us={}));class ry{constructor(){this.HEADER_LENGTH=1}decode(l,s){return l.constructor===ArrayBuffer?s(this._binaryDecode(l)):s(typeof l=="string"?JSON.parse(l):{})}_binaryDecode(l){const s=new DataView(l),i=new TextDecoder;return this._decodeBroadcast(l,s,i)}_decodeBroadcast(l,s,i){const c=s.getUint8(1),d=s.getUint8(2);let h=this.HEADER_LENGTH+2;const m=i.decode(l.slice(h,h+c));h=h+c;const x=i.decode(l.slice(h,h+d));h=h+d;const g=JSON.parse(i.decode(l.slice(h,l.byteLength)));return{ref:null,topic:m,event:x,payload:g}}}class M0{constructor(l,s){this.callback=l,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=l,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Le;(function(u){u.abstime="abstime",u.bool="bool",u.date="date",u.daterange="daterange",u.float4="float4",u.float8="float8",u.int2="int2",u.int4="int4",u.int4range="int4range",u.int8="int8",u.int8range="int8range",u.json="json",u.jsonb="jsonb",u.money="money",u.numeric="numeric",u.oid="oid",u.reltime="reltime",u.text="text",u.time="time",u.timestamp="timestamp",u.timestamptz="timestamptz",u.timetz="timetz",u.tsrange="tsrange",u.tstzrange="tstzrange"})(Le||(Le={}));const i0=(u,l,s={})=>{var i;const c=(i=s.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(l).reduce((d,h)=>(d[h]=cy(h,u,l,c),d),{})},cy=(u,l,s,i)=>{const c=l.find(m=>m.name===u),d=c?.type,h=s[u];return d&&!i.includes(d)?k0(d,h):No(h)},k0=(u,l)=>{if(u.charAt(0)==="_"){const s=u.slice(1,u.length);return fy(l,s)}switch(u){case Le.bool:return oy(l);case Le.float4:case Le.float8:case Le.int2:case Le.int4:case Le.int8:case Le.numeric:case Le.oid:return uy(l);case Le.json:case Le.jsonb:return dy(l);case Le.timestamp:return hy(l);case Le.abstime:case Le.date:case Le.daterange:case Le.int4range:case Le.int8range:case Le.money:case Le.reltime:case Le.text:case Le.time:case Le.timestamptz:case Le.timetz:case Le.tsrange:case Le.tstzrange:return No(l);default:return No(l)}},No=u=>u,oy=u=>{switch(u){case"t":return!0;case"f":return!1;default:return u}},uy=u=>{if(typeof u=="string"){const l=parseFloat(u);if(!Number.isNaN(l))return l}return u},dy=u=>{if(typeof u=="string")try{return JSON.parse(u)}catch(l){return console.log(`JSON parse error: ${l}`),u}return u},fy=(u,l)=>{if(typeof u!="string")return u;const s=u.length-1,i=u[s];if(u[0]==="{"&&i==="}"){let d;const h=u.slice(1,s);try{d=JSON.parse("["+h+"]")}catch{d=h?h.split(","):[]}return d.map(m=>k0(l,m))}return u},hy=u=>typeof u=="string"?u.replace(" ","T"):u,z0=u=>{let l=u;return l=l.replace(/^ws/i,"http"),l=l.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),l.replace(/\/+$/,"")};class go{constructor(l,s,i={},c=U0){this.channel=l,this.event=s,this.payload=i,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(l){this.timeout=l,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(l){this.payload=Object.assign(Object.assign({},this.payload),l)}receive(l,s){var i;return this._hasReceived(l)&&s((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:l,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const l=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},l),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(l,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:l,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:l,response:s}){this.recHooks.filter(i=>i.status===l).forEach(i=>i.callback(s))}_hasReceived(l){return this.receivedResp&&this.receivedResp.status===l}}var r0;(function(u){u.SYNC="sync",u.JOIN="join",u.LEAVE="leave"})(r0||(r0={}));class yl{constructor(l,s){this.channel=l,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},c=>{const{onJoin:d,onLeave:h,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=yl.syncState(this.state,c,d,h),this.pendingDiffs.forEach(x=>{this.state=yl.syncDiff(this.state,x,d,h)}),this.pendingDiffs=[],m()}),this.channel._on(i.diff,{},c=>{const{onJoin:d,onLeave:h,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=yl.syncDiff(this.state,c,d,h),m())}),this.onJoin((c,d,h)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:d,newPresences:h})}),this.onLeave((c,d,h)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:d,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(l,s,i,c){const d=this.cloneDeep(l),h=this.transformState(s),m={},x={};return this.map(d,(g,p)=>{h[g]||(x[g]=p)}),this.map(h,(g,p)=>{const b=d[g];if(b){const j=p.map(D=>D.presence_ref),S=b.map(D=>D.presence_ref),_=p.filter(D=>S.indexOf(D.presence_ref)<0),R=b.filter(D=>j.indexOf(D.presence_ref)<0);_.length>0&&(m[g]=_),R.length>0&&(x[g]=R)}else m[g]=p}),this.syncDiff(d,{joins:m,leaves:x},i,c)}static syncDiff(l,s,i,c){const{joins:d,leaves:h}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return i||(i=()=>{}),c||(c=()=>{}),this.map(d,(m,x)=>{var g;const p=(g=l[m])!==null&&g!==void 0?g:[];if(l[m]=this.cloneDeep(x),p.length>0){const b=l[m].map(S=>S.presence_ref),j=p.filter(S=>b.indexOf(S.presence_ref)<0);l[m].unshift(...j)}i(m,p,x)}),this.map(h,(m,x)=>{let g=l[m];if(!g)return;const p=x.map(b=>b.presence_ref);g=g.filter(b=>p.indexOf(b.presence_ref)<0),l[m]=g,c(m,g,x),g.length===0&&delete l[m]}),l}static map(l,s){return Object.getOwnPropertyNames(l).map(i=>s(i,l[i]))}static transformState(l){return l=this.cloneDeep(l),Object.getOwnPropertyNames(l).reduce((s,i)=>{const c=l[i];return"metas"in c?s[i]=c.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):s[i]=c,s},{})}static cloneDeep(l){return JSON.parse(JSON.stringify(l))}onJoin(l){this.caller.onJoin=l}onLeave(l){this.caller.onLeave=l}onSync(l){this.caller.onSync=l}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var c0;(function(u){u.ALL="*",u.INSERT="INSERT",u.UPDATE="UPDATE",u.DELETE="DELETE"})(c0||(c0={}));var o0;(function(u){u.BROADCAST="broadcast",u.PRESENCE="presence",u.POSTGRES_CHANGES="postgres_changes",u.SYSTEM="system"})(o0||(o0={}));var oa;(function(u){u.SUBSCRIBED="SUBSCRIBED",u.TIMED_OUT="TIMED_OUT",u.CLOSED="CLOSED",u.CHANNEL_ERROR="CHANNEL_ERROR"})(oa||(oa={}));class qo{constructor(l,s={config:{}},i){this.topic=l,this.params=s,this.socket=i,this.bindings={},this.state=ct.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=l.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new go(this,Bt.join,this.params,this.timeout),this.rejoinTimer=new M0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ct.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ct.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ct.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Bt.reply,{},(c,d)=>{this._trigger(this._replyEventName(d),c)}),this.presence=new yl(this),this.broadcastEndpointURL=z0(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(l,s=this.timeout){var i,c;if(this.socket.isConnected()||this.socket.connect(),this.state==ct.closed){const{config:{broadcast:d,presence:h,private:m}}=this.params;this._onError(p=>l?.(oa.CHANNEL_ERROR,p)),this._onClose(()=>l?.(oa.CLOSED));const x={},g={broadcast:d,presence:h,postgres_changes:(c=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(p=>p.filter))!==null&&c!==void 0?c:[],private:m};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:g},x)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:p})=>{var b;if(this.socket.setAuth(),p===void 0){l?.(oa.SUBSCRIBED);return}else{const j=this.bindings.postgres_changes,S=(b=j?.length)!==null&&b!==void 0?b:0,_=[];for(let R=0;R<S;R++){const D=j[R],{filter:{event:N,schema:X,table:q,filter:L}}=D,H=p&&p[R];if(H&&H.event===N&&H.schema===X&&H.table===q&&H.filter===L)_.push(Object.assign(Object.assign({},D),{id:H.id}));else{this.unsubscribe(),this.state=ct.errored,l?.(oa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,l&&l(oa.SUBSCRIBED);return}}).receive("error",p=>{this.state=ct.errored,l?.(oa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{l?.(oa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(l,s={}){return await this.send({type:"presence",event:"track",payload:l},s.timeout||this.timeout)}async untrack(l={}){return await this.send({type:"presence",event:"untrack"},l)}on(l,s,i){return this._on(l,s,i)}async send(l,s={}){var i,c;if(!this._canPush()&&l.type==="broadcast"){const{event:d,payload:h}=l,x={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:h,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,x,(i=s.timeout)!==null&&i!==void 0?i:this.timeout);return await((c=g.body)===null||c===void 0?void 0:c.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var h,m,x;const g=this._push(l.type,l,s.timeout||this.timeout);l.type==="broadcast"&&!(!((x=(m=(h=this.params)===null||h===void 0?void 0:h.config)===null||m===void 0?void 0:m.broadcast)===null||x===void 0)&&x.ack)&&d("ok"),g.receive("ok",()=>d("ok")),g.receive("error",()=>d("error")),g.receive("timeout",()=>d("timed out"))})}updateJoinPayload(l){this.joinPush.updatePayload(l)}unsubscribe(l=this.timeout){this.state=ct.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Bt.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(c=>{i=new go(this,Bt.leave,{},l),i.receive("ok",()=>{s(),c("ok")}).receive("timeout",()=>{s(),c("timed out")}).receive("error",()=>{c("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(l=>l.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(l,s,i){const c=new AbortController,d=setTimeout(()=>c.abort(),i),h=await this.socket.fetch(l,Object.assign(Object.assign({},s),{signal:c.signal}));return clearTimeout(d),h}_push(l,s,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${l}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new go(this,l,s,i);return this._canPush()?c.send():(c.startTimeout(),this.pushBuffer.push(c)),c}_onMessage(l,s,i){return s}_isMember(l){return this.topic===l}_joinRef(){return this.joinPush.ref}_trigger(l,s,i){var c,d;const h=l.toLocaleLowerCase(),{close:m,error:x,leave:g,join:p}=Bt;if(i&&[m,x,g,p].indexOf(h)>=0&&i!==this._joinRef())return;let j=this._onMessage(h,s,i);if(s&&!j)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(S=>{var _,R,D;return((_=S.filter)===null||_===void 0?void 0:_.event)==="*"||((D=(R=S.filter)===null||R===void 0?void 0:R.event)===null||D===void 0?void 0:D.toLocaleLowerCase())===h}).map(S=>S.callback(j,i)):(d=this.bindings[h])===null||d===void 0||d.filter(S=>{var _,R,D,N,X,q;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in S){const L=S.id,H=(_=S.filter)===null||_===void 0?void 0:_.event;return L&&((R=s.ids)===null||R===void 0?void 0:R.includes(L))&&(H==="*"||H?.toLocaleLowerCase()===((D=s.data)===null||D===void 0?void 0:D.type.toLocaleLowerCase()))}else{const L=(X=(N=S?.filter)===null||N===void 0?void 0:N.event)===null||X===void 0?void 0:X.toLocaleLowerCase();return L==="*"||L===((q=s?.event)===null||q===void 0?void 0:q.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===h}).map(S=>{if(typeof j=="object"&&"ids"in j){const _=j.data,{schema:R,table:D,commit_timestamp:N,type:X,errors:q}=_;j=Object.assign(Object.assign({},{schema:R,table:D,commit_timestamp:N,eventType:X,new:{},old:{},errors:q}),this._getPayloadRecords(_))}S.callback(j,i)})}_isClosed(){return this.state===ct.closed}_isJoined(){return this.state===ct.joined}_isJoining(){return this.state===ct.joining}_isLeaving(){return this.state===ct.leaving}_replyEventName(l){return`chan_reply_${l}`}_on(l,s,i){const c=l.toLocaleLowerCase(),d={type:c,filter:s,callback:i};return this.bindings[c]?this.bindings[c].push(d):this.bindings[c]=[d],this}_off(l,s){const i=l.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(c=>{var d;return!(((d=c.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===i&&qo.isEqual(c.filter,s))}),this}static isEqual(l,s){if(Object.keys(l).length!==Object.keys(s).length)return!1;for(const i in l)if(l[i]!==s[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(l){this._on(Bt.close,{},l)}_onError(l){this._on(Bt.error,{},s=>l(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(l=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ct.joining,this.joinPush.resend(l))}_getPayloadRecords(l){const s={new:{},old:{}};return(l.type==="INSERT"||l.type==="UPDATE")&&(s.new=i0(l.columns,l.record)),(l.type==="UPDATE"||l.type==="DELETE")&&(s.old=i0(l.columns,l.old_record)),s}}const u0=()=>{},my=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class gy{constructor(l,s){var i;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=U0,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=u0,this.ref=0,this.logger=u0,this.conn=null,this.sendBuffer=[],this.serializer=new ry,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=d=>{let h;return d?h=d:typeof fetch>"u"?h=(...m)=>jl(async()=>{const{default:x}=await Promise.resolve().then(()=>hn);return{default:x}},void 0).then(({default:x})=>x(...m)):h=fetch,(...m)=>h(...m)},this.endPoint=`${l}/${So.websocket}`,this.httpEndpoint=z0(l),s?.transport?this.transport=s.transport:this.transport=null,s?.params&&(this.params=s.params),s?.timeout&&(this.timeout=s.timeout),s?.logger&&(this.logger=s.logger),(s?.logLevel||s?.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const c=(i=s?.params)===null||i===void 0?void 0:i.apikey;if(c&&(this.accessTokenValue=c,this.apiKey=c),this.reconnectAfterMs=s?.reconnectAfterMs?s.reconnectAfterMs:d=>[1e3,2e3,5e3,1e4][d-1]||1e4,this.encode=s?.encode?s.encode:(d,h)=>h(JSON.stringify(d)),this.decode=s?.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new M0(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s?.fetch),s?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=s?.worker||!1,this.workerUrl=s?.workerUrl}this.accessToken=s?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=ay),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ly}))}disconnect(l,s){this.conn&&(this.conn.onclose=function(){},l?this.conn.close(l,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(i=>i.teardown()))}getChannels(){return this.channels}async removeChannel(l){const s=await l.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const l=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),l}log(l,s,i){this.logger(l,s,i)}connectionState(){switch(this.conn&&this.conn.readyState){case xl.connecting:return us.Connecting;case xl.open:return us.Open;case xl.closing:return us.Closing;default:return us.Closed}}isConnected(){return this.connectionState()===us.Open}channel(l,s={config:{}}){const i=`realtime:${l}`,c=this.getChannels().find(d=>d.topic===i);if(c)return c;{const d=new qo(`realtime:${l}`,s,this);return this.channels.push(d),d}}push(l){const{topic:s,event:i,payload:c,ref:d}=l,h=()=>{this.encode(l,m=>{var x;(x=this.conn)===null||x===void 0||x.send(m)})};this.log("push",`${s} ${i} (${d})`,c),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(l=null){let s=l||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(i=>{const c={access_token:s,version:ny};s&&i.updateJoinPayload(c),i.joinedOnce&&i._isJoined()&&i._push(Bt.access_token,{access_token:s})}))}async sendHeartbeat(){var l;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(l=this.conn)===null||l===void 0||l.close(iy,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(l){this.heartbeatCallback=l}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(l=>l()),this.sendBuffer=[])}_makeRef(){let l=this.ref+1;return l===this.ref?this.ref=0:this.ref=l,this.ref.toString()}_leaveOpenTopic(l){let s=this.channels.find(i=>i.topic===l&&(i._isJoined()||i._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${l}"`),s.unsubscribe())}_remove(l){this.channels=this.channels.filter(s=>s.topic!==l.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=l=>this._onConnError(l),this.conn.onmessage=l=>this._onConnMessage(l),this.conn.onclose=l=>this._onConnClose(l))}_onConnMessage(l){this.decode(l.data,s=>{let{topic:i,event:c,payload:d,ref:h}=s;i==="phoenix"&&c==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),h&&h===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${d.status||""} ${i} ${c} ${h&&"("+h+")"||""}`,d),Array.from(this.channels).filter(m=>m._isMember(i)).forEach(m=>m._trigger(c,d,h)),this.stateChangeCallbacks.message.forEach(m=>m(s))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(l=>l())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const l=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(l),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(l){this.log("transport","close",l),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(l))}_onConnError(l){this.log("transport",`${l}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(l))}_triggerChanError(){this.channels.forEach(l=>l._trigger(Bt.error))}_appendParams(l,s){if(Object.keys(s).length===0)return l;const i=l.match(/\?/)?"&":"?",c=new URLSearchParams(s);return`${l}${i}${c}`}_workerObjectUrl(l){let s;if(l)s=l;else{const i=new Blob([my],{type:"application/javascript"});s=URL.createObjectURL(i)}return s}}class Bo extends Error{constructor(l){super(l),this.__isStorageError=!0,this.name="StorageError"}}function tt(u){return typeof u=="object"&&u!==null&&"__isStorageError"in u}class xy extends Bo{constructor(l,s,i){super(l),this.name="StorageApiError",this.status=s,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class To extends Bo{constructor(l,s){super(l),this.name="StorageUnknownError",this.originalError=s}}var yy=function(u,l,s,i){function c(d){return d instanceof s?d:new s(function(h){h(d)})}return new(s||(s=Promise))(function(d,h){function m(p){try{g(i.next(p))}catch(b){h(b)}}function x(p){try{g(i.throw(p))}catch(b){h(b)}}function g(p){p.done?d(p.value):c(p.value).then(m,x)}g((i=i.apply(u,l||[])).next())})};const L0=u=>{let l;return u?l=u:typeof fetch>"u"?l=(...s)=>jl(async()=>{const{default:i}=await Promise.resolve().then(()=>hn);return{default:i}},void 0).then(({default:i})=>i(...s)):l=fetch,(...s)=>l(...s)},py=()=>yy(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield jl(()=>Promise.resolve().then(()=>hn),void 0)).Response:Response}),Eo=u=>{if(Array.isArray(u))return u.map(s=>Eo(s));if(typeof u=="function"||u!==Object(u))return u;const l={};return Object.entries(u).forEach(([s,i])=>{const c=s.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));l[c]=Eo(i)}),l},vy=u=>{if(typeof u!="object"||u===null)return!1;const l=Object.getPrototypeOf(u);return(l===null||l===Object.prototype||Object.getPrototypeOf(l)===null)&&!(Symbol.toStringTag in u)&&!(Symbol.iterator in u)};var ds=function(u,l,s,i){function c(d){return d instanceof s?d:new s(function(h){h(d)})}return new(s||(s=Promise))(function(d,h){function m(p){try{g(i.next(p))}catch(b){h(b)}}function x(p){try{g(i.throw(p))}catch(b){h(b)}}function g(p){p.done?d(p.value):c(p.value).then(m,x)}g((i=i.apply(u,l||[])).next())})};const xo=u=>u.msg||u.message||u.error_description||u.error||JSON.stringify(u),by=(u,l,s)=>ds(void 0,void 0,void 0,function*(){const i=yield py();u instanceof i&&!s?.noResolveJson?u.json().then(c=>{const d=u.status||500,h=c?.statusCode||d+"";l(new xy(xo(c),d,h))}).catch(c=>{l(new To(xo(c),c))}):l(new To(xo(u),u))}),jy=(u,l,s,i)=>{const c={method:u,headers:l?.headers||{}};return u==="GET"||!i?c:(vy(i)?(c.headers=Object.assign({"Content-Type":"application/json"},l?.headers),c.body=JSON.stringify(i)):c.body=i,Object.assign(Object.assign({},c),s))};function _l(u,l,s,i,c,d){return ds(this,void 0,void 0,function*(){return new Promise((h,m)=>{u(s,jy(l,i,c,d)).then(x=>{if(!x.ok)throw x;return i?.noResolveJson?x:x.json()}).then(x=>h(x)).catch(x=>by(x,m,i))})})}function Ii(u,l,s,i){return ds(this,void 0,void 0,function*(){return _l(u,"GET",l,s,i)})}function ua(u,l,s,i,c){return ds(this,void 0,void 0,function*(){return _l(u,"POST",l,i,c,s)})}function Co(u,l,s,i,c){return ds(this,void 0,void 0,function*(){return _l(u,"PUT",l,i,c,s)})}function _y(u,l,s,i){return ds(this,void 0,void 0,function*(){return _l(u,"HEAD",l,Object.assign(Object.assign({},s),{noResolveJson:!0}),i)})}function q0(u,l,s,i,c){return ds(this,void 0,void 0,function*(){return _l(u,"DELETE",l,i,c,s)})}var gt=function(u,l,s,i){function c(d){return d instanceof s?d:new s(function(h){h(d)})}return new(s||(s=Promise))(function(d,h){function m(p){try{g(i.next(p))}catch(b){h(b)}}function x(p){try{g(i.throw(p))}catch(b){h(b)}}function g(p){p.done?d(p.value):c(p.value).then(m,x)}g((i=i.apply(u,l||[])).next())})};const wy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},d0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Sy{constructor(l,s={},i,c){this.url=l,this.headers=s,this.bucketId=i,this.fetch=L0(c)}uploadOrUpdate(l,s,i,c){return gt(this,void 0,void 0,function*(){try{let d;const h=Object.assign(Object.assign({},d0),c);let m=Object.assign(Object.assign({},this.headers),l==="POST"&&{"x-upsert":String(h.upsert)});const x=h.metadata;typeof Blob<"u"&&i instanceof Blob?(d=new FormData,d.append("cacheControl",h.cacheControl),x&&d.append("metadata",this.encodeMetadata(x)),d.append("",i)):typeof FormData<"u"&&i instanceof FormData?(d=i,d.append("cacheControl",h.cacheControl),x&&d.append("metadata",this.encodeMetadata(x))):(d=i,m["cache-control"]=`max-age=${h.cacheControl}`,m["content-type"]=h.contentType,x&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(x)))),c?.headers&&(m=Object.assign(Object.assign({},m),c.headers));const g=this._removeEmptyFolders(s),p=this._getFinalPath(g),b=yield(l=="PUT"?Co:ua)(this.fetch,`${this.url}/object/${p}`,d,Object.assign({headers:m},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:g,id:b.Id,fullPath:b.Key},error:null}}catch(d){if(tt(d))return{data:null,error:d};throw d}})}upload(l,s,i){return gt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",l,s,i)})}uploadToSignedUrl(l,s,i,c){return gt(this,void 0,void 0,function*(){const d=this._removeEmptyFolders(l),h=this._getFinalPath(d),m=new URL(this.url+`/object/upload/sign/${h}`);m.searchParams.set("token",s);try{let x;const g=Object.assign({upsert:d0.upsert},c),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&i instanceof Blob?(x=new FormData,x.append("cacheControl",g.cacheControl),x.append("",i)):typeof FormData<"u"&&i instanceof FormData?(x=i,x.append("cacheControl",g.cacheControl)):(x=i,p["cache-control"]=`max-age=${g.cacheControl}`,p["content-type"]=g.contentType);const b=yield Co(this.fetch,m.toString(),x,{headers:p});return{data:{path:d,fullPath:b.Key},error:null}}catch(x){if(tt(x))return{data:null,error:x};throw x}})}createSignedUploadUrl(l,s){return gt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(l);const c=Object.assign({},this.headers);s?.upsert&&(c["x-upsert"]="true");const d=yield ua(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:c}),h=new URL(this.url+d.url),m=h.searchParams.get("token");if(!m)throw new Bo("No token returned by API");return{data:{signedUrl:h.toString(),path:l,token:m},error:null}}catch(i){if(tt(i))return{data:null,error:i};throw i}})}update(l,s,i){return gt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",l,s,i)})}move(l,s,i){return gt(this,void 0,void 0,function*(){try{return{data:yield ua(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:l,destinationKey:s,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(c){if(tt(c))return{data:null,error:c};throw c}})}copy(l,s,i){return gt(this,void 0,void 0,function*(){try{return{data:{path:(yield ua(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:l,destinationKey:s,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(c){if(tt(c))return{data:null,error:c};throw c}})}createSignedUrl(l,s,i){return gt(this,void 0,void 0,function*(){try{let c=this._getFinalPath(l),d=yield ua(this.fetch,`${this.url}/object/sign/${c}`,Object.assign({expiresIn:s},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const h=i?.download?`&download=${i.download===!0?"":i.download}`:"";return d={signedUrl:encodeURI(`${this.url}${d.signedURL}${h}`)},{data:d,error:null}}catch(c){if(tt(c))return{data:null,error:c};throw c}})}createSignedUrls(l,s,i){return gt(this,void 0,void 0,function*(){try{const c=yield ua(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:l},{headers:this.headers}),d=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:c.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${d}`):null})),error:null}}catch(c){if(tt(c))return{data:null,error:c};throw c}})}download(l,s){return gt(this,void 0,void 0,function*(){const c=typeof s?.transform<"u"?"render/image/authenticated":"object",d=this.transformOptsToQueryString(s?.transform||{}),h=d?`?${d}`:"";try{const m=this._getFinalPath(l);return{data:yield(yield Ii(this.fetch,`${this.url}/${c}/${m}${h}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(m){if(tt(m))return{data:null,error:m};throw m}})}info(l){return gt(this,void 0,void 0,function*(){const s=this._getFinalPath(l);try{const i=yield Ii(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Eo(i),error:null}}catch(i){if(tt(i))return{data:null,error:i};throw i}})}exists(l){return gt(this,void 0,void 0,function*(){const s=this._getFinalPath(l);try{return yield _y(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(tt(i)&&i instanceof To){const c=i.originalError;if([400,404].includes(c?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(l,s){const i=this._getFinalPath(l),c=[],d=s?.download?`download=${s.download===!0?"":s.download}`:"";d!==""&&c.push(d);const m=typeof s?.transform<"u"?"render/image":"object",x=this.transformOptsToQueryString(s?.transform||{});x!==""&&c.push(x);let g=c.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${i}${g}`)}}}remove(l){return gt(this,void 0,void 0,function*(){try{return{data:yield q0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:l},{headers:this.headers}),error:null}}catch(s){if(tt(s))return{data:null,error:s};throw s}})}list(l,s,i){return gt(this,void 0,void 0,function*(){try{const c=Object.assign(Object.assign(Object.assign({},wy),s),{prefix:l||""});return{data:yield ua(this.fetch,`${this.url}/object/list/${this.bucketId}`,c,{headers:this.headers},i),error:null}}catch(c){if(tt(c))return{data:null,error:c};throw c}})}encodeMetadata(l){return JSON.stringify(l)}toBase64(l){return typeof Buffer<"u"?Buffer.from(l).toString("base64"):btoa(l)}_getFinalPath(l){return`${this.bucketId}/${l.replace(/^\/+/,"")}`}_removeEmptyFolders(l){return l.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(l){const s=[];return l.width&&s.push(`width=${l.width}`),l.height&&s.push(`height=${l.height}`),l.resize&&s.push(`resize=${l.resize}`),l.format&&s.push(`format=${l.format}`),l.quality&&s.push(`quality=${l.quality}`),s.join("&")}}const Ny="2.10.4",Ty={"X-Client-Info":`storage-js/${Ny}`};var an=function(u,l,s,i){function c(d){return d instanceof s?d:new s(function(h){h(d)})}return new(s||(s=Promise))(function(d,h){function m(p){try{g(i.next(p))}catch(b){h(b)}}function x(p){try{g(i.throw(p))}catch(b){h(b)}}function g(p){p.done?d(p.value):c(p.value).then(m,x)}g((i=i.apply(u,l||[])).next())})};class Ey{constructor(l,s={},i,c){const d=new URL(l);c?.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase.")),this.url=d.href,this.headers=Object.assign(Object.assign({},Ty),s),this.fetch=L0(i)}listBuckets(){return an(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(l){if(tt(l))return{data:null,error:l};throw l}})}getBucket(l){return an(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/bucket/${l}`,{headers:this.headers}),error:null}}catch(s){if(tt(s))return{data:null,error:s};throw s}})}createBucket(l,s={public:!1}){return an(this,void 0,void 0,function*(){try{return{data:yield ua(this.fetch,`${this.url}/bucket`,{id:l,name:l,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(tt(i))return{data:null,error:i};throw i}})}updateBucket(l,s){return an(this,void 0,void 0,function*(){try{return{data:yield Co(this.fetch,`${this.url}/bucket/${l}`,{id:l,name:l,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(tt(i))return{data:null,error:i};throw i}})}emptyBucket(l){return an(this,void 0,void 0,function*(){try{return{data:yield ua(this.fetch,`${this.url}/bucket/${l}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(tt(s))return{data:null,error:s};throw s}})}deleteBucket(l){return an(this,void 0,void 0,function*(){try{return{data:yield q0(this.fetch,`${this.url}/bucket/${l}`,{},{headers:this.headers}),error:null}}catch(s){if(tt(s))return{data:null,error:s};throw s}})}}class Cy extends Ey{constructor(l,s={},i,c){super(l,s,i,c)}from(l){return new Sy(this.url,this.headers,l,this.fetch)}}const Ay="2.53.0";let gl="";typeof Deno<"u"?gl="deno":typeof document<"u"?gl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?gl="react-native":gl="node";const Dy={"X-Client-Info":`supabase-js-${gl}/${Ay}`},Oy={headers:Dy},Ry={schema:"public"},Uy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},My={};var ky=function(u,l,s,i){function c(d){return d instanceof s?d:new s(function(h){h(d)})}return new(s||(s=Promise))(function(d,h){function m(p){try{g(i.next(p))}catch(b){h(b)}}function x(p){try{g(i.throw(p))}catch(b){h(b)}}function g(p){p.done?d(p.value):c(p.value).then(m,x)}g((i=i.apply(u,l||[])).next())})};const zy=u=>{let l;return u?l=u:typeof fetch>"u"?l=E0:l=fetch,(...s)=>l(...s)},Ly=()=>typeof Headers>"u"?C0:Headers,qy=(u,l,s)=>{const i=zy(s),c=Ly();return(d,h)=>ky(void 0,void 0,void 0,function*(){var m;const x=(m=yield l())!==null&&m!==void 0?m:u;let g=new c(h?.headers);return g.has("apikey")||g.set("apikey",u),g.has("Authorization")||g.set("Authorization",`Bearer ${x}`),i(d,Object.assign(Object.assign({},h),{headers:g}))})};var By=function(u,l,s,i){function c(d){return d instanceof s?d:new s(function(h){h(d)})}return new(s||(s=Promise))(function(d,h){function m(p){try{g(i.next(p))}catch(b){h(b)}}function x(p){try{g(i.throw(p))}catch(b){h(b)}}function g(p){p.done?d(p.value):c(p.value).then(m,x)}g((i=i.apply(u,l||[])).next())})};function Hy(u){return u.endsWith("/")?u:u+"/"}function $y(u,l){var s,i;const{db:c,auth:d,realtime:h,global:m}=u,{db:x,auth:g,realtime:p,global:b}=l,j={db:Object.assign(Object.assign({},x),c),auth:Object.assign(Object.assign({},g),d),realtime:Object.assign(Object.assign({},p),h),storage:{},global:Object.assign(Object.assign(Object.assign({},b),m),{headers:Object.assign(Object.assign({},(s=b?.headers)!==null&&s!==void 0?s:{}),(i=m?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>By(this,void 0,void 0,function*(){return""})};return u.accessToken?j.accessToken=u.accessToken:delete j.accessToken,j}const B0="2.71.1",on=30*1e3,Ao=3,yo=Ao*on,Gy="http://localhost:9999",Iy="supabase.auth.token",Py={"X-Client-Info":`gotrue-js/${B0}`},Do="X-Supabase-Api-Version",H0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Yy=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Vy=600*1e3;class Ho extends Error{constructor(l,s,i){super(l),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=i}}function me(u){return typeof u=="object"&&u!==null&&"__isAuthError"in u}class Qy extends Ho{constructor(l,s,i){super(l,s,i),this.name="AuthApiError",this.status=s,this.code=i}}function Xy(u){return me(u)&&u.name==="AuthApiError"}class $0 extends Ho{constructor(l,s){super(l),this.name="AuthUnknownError",this.originalError=s}}class Ga extends Ho{constructor(l,s,i,c){super(l,i,c),this.name=s,this.status=i}}class Ha extends Ga{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ky(u){return me(u)&&u.name==="AuthSessionMissingError"}class Hi extends Ga{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class $i extends Ga{constructor(l){super(l,"AuthInvalidCredentialsError",400,void 0)}}class Gi extends Ga{constructor(l,s=null){super(l,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Zy(u){return me(u)&&u.name==="AuthImplicitGrantRedirectError"}class f0 extends Ga{constructor(l,s=null){super(l,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Oo extends Ga{constructor(l,s){super(l,"AuthRetryableFetchError",s,void 0)}}function po(u){return me(u)&&u.name==="AuthRetryableFetchError"}class h0 extends Ga{constructor(l,s,i){super(l,"AuthWeakPasswordError",s,"weak_password"),this.reasons=i}}class Ro extends Ga{constructor(l){super(l,"AuthInvalidJwtError",400,"invalid_jwt")}}const Pi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),m0=` 	
\r=`.split(""),Jy=(()=>{const u=new Array(128);for(let l=0;l<u.length;l+=1)u[l]=-1;for(let l=0;l<m0.length;l+=1)u[m0[l].charCodeAt(0)]=-2;for(let l=0;l<Pi.length;l+=1)u[Pi[l].charCodeAt(0)]=l;return u})();function g0(u,l,s){if(u!==null)for(l.queue=l.queue<<8|u,l.queuedBits+=8;l.queuedBits>=6;){const i=l.queue>>l.queuedBits-6&63;s(Pi[i]),l.queuedBits-=6}else if(l.queuedBits>0)for(l.queue=l.queue<<6-l.queuedBits,l.queuedBits=6;l.queuedBits>=6;){const i=l.queue>>l.queuedBits-6&63;s(Pi[i]),l.queuedBits-=6}}function G0(u,l,s){const i=Jy[u];if(i>-1)for(l.queue=l.queue<<6|i,l.queuedBits+=6;l.queuedBits>=8;)s(l.queue>>l.queuedBits-8&255),l.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(u)}"`)}}function x0(u){const l=[],s=h=>{l.push(String.fromCodePoint(h))},i={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},d=h=>{ep(h,i,s)};for(let h=0;h<u.length;h+=1)G0(u.charCodeAt(h),c,d);return l.join("")}function Fy(u,l){if(u<=127){l(u);return}else if(u<=2047){l(192|u>>6),l(128|u&63);return}else if(u<=65535){l(224|u>>12),l(128|u>>6&63),l(128|u&63);return}else if(u<=1114111){l(240|u>>18),l(128|u>>12&63),l(128|u>>6&63),l(128|u&63);return}throw new Error(`Unrecognized Unicode codepoint: ${u.toString(16)}`)}function Wy(u,l){for(let s=0;s<u.length;s+=1){let i=u.charCodeAt(s);if(i>55295&&i<=56319){const c=(i-55296)*1024&65535;i=(u.charCodeAt(s+1)-56320&65535|c)+65536,s+=1}Fy(i,l)}}function ep(u,l,s){if(l.utf8seq===0){if(u<=127){s(u);return}for(let i=1;i<6;i+=1)if((u>>7-i&1)===0){l.utf8seq=i;break}if(l.utf8seq===2)l.codepoint=u&31;else if(l.utf8seq===3)l.codepoint=u&15;else if(l.utf8seq===4)l.codepoint=u&7;else throw new Error("Invalid UTF-8 sequence");l.utf8seq-=1}else if(l.utf8seq>0){if(u<=127)throw new Error("Invalid UTF-8 sequence");l.codepoint=l.codepoint<<6|u&63,l.utf8seq-=1,l.utf8seq===0&&s(l.codepoint)}}function tp(u){const l=[],s={queue:0,queuedBits:0},i=c=>{l.push(c)};for(let c=0;c<u.length;c+=1)G0(u.charCodeAt(c),s,i);return new Uint8Array(l)}function ap(u){const l=[];return Wy(u,s=>l.push(s)),new Uint8Array(l)}function sp(u){const l=[],s={queue:0,queuedBits:0},i=c=>{l.push(c)};return u.forEach(c=>g0(c,s,i)),g0(null,s,i),l.join("")}function np(u){return Math.round(Date.now()/1e3)+u}function lp(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(u){const l=Math.random()*16|0;return(u=="x"?l:l&3|8).toString(16)})}const qt=()=>typeof window<"u"&&typeof document<"u",rs={tested:!1,writable:!1},I0=()=>{if(!qt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(rs.tested)return rs.writable;const u=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(u,u),globalThis.localStorage.removeItem(u),rs.tested=!0,rs.writable=!0}catch{rs.tested=!0,rs.writable=!1}return rs.writable};function ip(u){const l={},s=new URL(u);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((c,d)=>{l[d]=c})}catch{}return s.searchParams.forEach((i,c)=>{l[c]=i}),l}const P0=u=>{let l;return u?l=u:typeof fetch>"u"?l=(...s)=>jl(async()=>{const{default:i}=await Promise.resolve().then(()=>hn);return{default:i}},void 0).then(({default:i})=>i(...s)):l=fetch,(...s)=>l(...s)},rp=u=>typeof u=="object"&&u!==null&&"status"in u&&"ok"in u&&"json"in u&&typeof u.json=="function",un=async(u,l,s)=>{await u.setItem(l,JSON.stringify(s))},cs=async(u,l)=>{const s=await u.getItem(l);if(!s)return null;try{return JSON.parse(s)}catch{return s}},qa=async(u,l)=>{await u.removeItem(l)};class Vi{constructor(){this.promise=new Vi.promiseConstructor((l,s)=>{this.resolve=l,this.reject=s})}}Vi.promiseConstructor=Promise;function vo(u){const l=u.split(".");if(l.length!==3)throw new Ro("Invalid JWT structure");for(let i=0;i<l.length;i++)if(!Yy.test(l[i]))throw new Ro("JWT not in base64url format");return{header:JSON.parse(x0(l[0])),payload:JSON.parse(x0(l[1])),signature:tp(l[2]),raw:{header:l[0],payload:l[1]}}}async function cp(u){return await new Promise(l=>{setTimeout(()=>l(null),u)})}function op(u,l){return new Promise((i,c)=>{(async()=>{for(let d=0;d<1/0;d++)try{const h=await u(d);if(!l(d,null,h)){i(h);return}}catch(h){if(!l(d,h)){c(h);return}}})()})}function up(u){return("0"+u.toString(16)).substr(-2)}function dp(){const l=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=s.length;let c="";for(let d=0;d<56;d++)c+=s.charAt(Math.floor(Math.random()*i));return c}return crypto.getRandomValues(l),Array.from(l,up).join("")}async function fp(u){const s=new TextEncoder().encode(u),i=await crypto.subtle.digest("SHA-256",s),c=new Uint8Array(i);return Array.from(c).map(d=>String.fromCharCode(d)).join("")}async function hp(u){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),u;const s=await fp(u);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function sn(u,l,s=!1){const i=dp();let c=i;s&&(c+="/PASSWORD_RECOVERY"),await un(u,`${l}-code-verifier`,c);const d=await hp(i);return[d,i===d?"plain":"s256"]}const mp=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function gp(u){const l=u.headers.get(Do);if(!l||!l.match(mp))return null;try{return new Date(`${l}T00:00:00.0Z`)}catch{return null}}function xp(u){if(!u)throw new Error("Missing exp claim");const l=Math.floor(Date.now()/1e3);if(u<=l)throw new Error("JWT has expired")}function yp(u){switch(u){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const pp=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function nn(u){if(!pp.test(u))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function bo(){const u={};return new Proxy(u,{get:(l,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const i=s.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(l,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(l,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function y0(u){return JSON.parse(JSON.stringify(u))}var vp=function(u,l){var s={};for(var i in u)Object.prototype.hasOwnProperty.call(u,i)&&l.indexOf(i)<0&&(s[i]=u[i]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(u);c<i.length;c++)l.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(u,i[c])&&(s[i[c]]=u[i[c]]);return s};const os=u=>u.msg||u.message||u.error_description||u.error||JSON.stringify(u),bp=[502,503,504];async function p0(u){var l;if(!rp(u))throw new Oo(os(u),0);if(bp.includes(u.status))throw new Oo(os(u),u.status);let s;try{s=await u.json()}catch(d){throw new $0(os(d),d)}let i;const c=gp(u);if(c&&c.getTime()>=H0["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?i=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(i=s.error_code),i){if(i==="weak_password")throw new h0(os(s),u.status,((l=s.weak_password)===null||l===void 0?void 0:l.reasons)||[]);if(i==="session_not_found")throw new Ha}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((d,h)=>d&&typeof h=="string",!0))throw new h0(os(s),u.status,s.weak_password.reasons);throw new Qy(os(s),u.status||500,i)}const jp=(u,l,s,i)=>{const c={method:u,headers:l?.headers||{}};return u==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},l?.headers),c.body=JSON.stringify(i),Object.assign(Object.assign({},c),s))};async function _e(u,l,s,i){var c;const d=Object.assign({},i?.headers);d[Do]||(d[Do]=H0["2024-01-01"].name),i?.jwt&&(d.Authorization=`Bearer ${i.jwt}`);const h=(c=i?.query)!==null&&c!==void 0?c:{};i?.redirectTo&&(h.redirect_to=i.redirectTo);const m=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",x=await _p(u,l,s+m,{headers:d,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(x):{data:Object.assign({},x),error:null}}async function _p(u,l,s,i,c,d){const h=jp(l,i,c,d);let m;try{m=await u(s,Object.assign({},h))}catch(x){throw console.error(x),new Oo(os(x),0)}if(m.ok||await p0(m),i?.noResolveJson)return m;try{return await m.json()}catch(x){await p0(x)}}function ca(u){var l;let s=null;Tp(u)&&(s=Object.assign({},u),u.expires_at||(s.expires_at=np(u.expires_in)));const i=(l=u.user)!==null&&l!==void 0?l:u;return{data:{session:s,user:i},error:null}}function v0(u){const l=ca(u);return!l.error&&u.weak_password&&typeof u.weak_password=="object"&&Array.isArray(u.weak_password.reasons)&&u.weak_password.reasons.length&&u.weak_password.message&&typeof u.weak_password.message=="string"&&u.weak_password.reasons.reduce((s,i)=>s&&typeof i=="string",!0)&&(l.data.weak_password=u.weak_password),l}function $a(u){var l;return{data:{user:(l=u.user)!==null&&l!==void 0?l:u},error:null}}function wp(u){return{data:u,error:null}}function Sp(u){const{action_link:l,email_otp:s,hashed_token:i,redirect_to:c,verification_type:d}=u,h=vp(u,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:l,email_otp:s,hashed_token:i,redirect_to:c,verification_type:d},x=Object.assign({},h);return{data:{properties:m,user:x},error:null}}function Np(u){return u}function Tp(u){return u.access_token&&u.refresh_token&&u.expires_in}const jo=["global","local","others"];var Ep=function(u,l){var s={};for(var i in u)Object.prototype.hasOwnProperty.call(u,i)&&l.indexOf(i)<0&&(s[i]=u[i]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(u);c<i.length;c++)l.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(u,i[c])&&(s[i[c]]=u[i[c]]);return s};class Cp{constructor({url:l="",headers:s={},fetch:i}){this.url=l,this.headers=s,this.fetch=P0(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(l,s=jo[0]){if(jo.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${jo.join(", ")}`);try{return await _e(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:l,noResolveJson:!0}),{data:null,error:null}}catch(i){if(me(i))return{data:null,error:i};throw i}}async inviteUserByEmail(l,s={}){try{return await _e(this.fetch,"POST",`${this.url}/invite`,{body:{email:l,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:$a})}catch(i){if(me(i))return{data:{user:null},error:i};throw i}}async generateLink(l){try{const{options:s}=l,i=Ep(l,["options"]),c=Object.assign(Object.assign({},i),s);return"newEmail"in i&&(c.new_email=i?.newEmail,delete c.newEmail),await _e(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:Sp,redirectTo:s?.redirectTo})}catch(s){if(me(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(l){try{return await _e(this.fetch,"POST",`${this.url}/admin/users`,{body:l,headers:this.headers,xform:$a})}catch(s){if(me(s))return{data:{user:null},error:s};throw s}}async listUsers(l){var s,i,c,d,h,m,x;try{const g={nextPage:null,lastPage:0,total:0},p=await _e(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(s=l?.page)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:"",per_page:(d=(c=l?.perPage)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:""},xform:Np});if(p.error)throw p.error;const b=await p.json(),j=(h=p.headers.get("x-total-count"))!==null&&h!==void 0?h:0,S=(x=(m=p.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&x!==void 0?x:[];return S.length>0&&(S.forEach(_=>{const R=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),D=JSON.parse(_.split(";")[1].split("=")[1]);g[`${D}Page`]=R}),g.total=parseInt(j)),{data:Object.assign(Object.assign({},b),g),error:null}}catch(g){if(me(g))return{data:{users:[]},error:g};throw g}}async getUserById(l){nn(l);try{return await _e(this.fetch,"GET",`${this.url}/admin/users/${l}`,{headers:this.headers,xform:$a})}catch(s){if(me(s))return{data:{user:null},error:s};throw s}}async updateUserById(l,s){nn(l);try{return await _e(this.fetch,"PUT",`${this.url}/admin/users/${l}`,{body:s,headers:this.headers,xform:$a})}catch(i){if(me(i))return{data:{user:null},error:i};throw i}}async deleteUser(l,s=!1){nn(l);try{return await _e(this.fetch,"DELETE",`${this.url}/admin/users/${l}`,{headers:this.headers,body:{should_soft_delete:s},xform:$a})}catch(i){if(me(i))return{data:{user:null},error:i};throw i}}async _listFactors(l){nn(l.userId);try{const{data:s,error:i}=await _e(this.fetch,"GET",`${this.url}/admin/users/${l.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:s,error:i}}catch(s){if(me(s))return{data:null,error:s};throw s}}async _deleteFactor(l){nn(l.userId),nn(l.id);try{return{data:await _e(this.fetch,"DELETE",`${this.url}/admin/users/${l.userId}/factors/${l.id}`,{headers:this.headers}),error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}}}function b0(u={}){return{getItem:l=>u[l]||null,setItem:(l,s)=>{u[l]=s},removeItem:l=>{delete u[l]}}}function Ap(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ln={debug:!!(globalThis&&I0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Y0 extends Error{constructor(l){super(l),this.isAcquireTimeout=!0}}class Dp extends Y0{}async function Op(u,l,s){ln.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",u,l);const i=new globalThis.AbortController;return l>0&&setTimeout(()=>{i.abort(),ln.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",u)},l),await Promise.resolve().then(()=>globalThis.navigator.locks.request(u,l===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async c=>{if(c){ln.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",u,c.name);try{return await s()}finally{ln.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",u,c.name)}}else{if(l===0)throw ln.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",u),new Dp(`Acquiring an exclusive Navigator LockManager lock "${u}" immediately failed`);if(ln.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}Ap();const Rp={url:Gy,storageKey:Iy,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Py,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function j0(u,l,s){return await s()}const rn={};class pl{constructor(l){var s,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=pl.nextInstanceID,pl.nextInstanceID+=1,this.instanceID>0&&qt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const c=Object.assign(Object.assign({},Rp),l);if(this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.persistSession=c.persistSession,this.storageKey=c.storageKey,this.autoRefreshToken=c.autoRefreshToken,this.admin=new Cp({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=P0(c.fetch),this.lock=c.lock||j0,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,c.lock?this.lock=c.lock:qt()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=Op:this.lock=j0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:I0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=b0(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=b0(this.memoryStorage)),qt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}get jwks(){var l,s;return(s=(l=rn[this.storageKey])===null||l===void 0?void 0:l.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(l){rn[this.storageKey]=Object.assign(Object.assign({},rn[this.storageKey]),{jwks:l})}get jwks_cached_at(){var l,s;return(s=(l=rn[this.storageKey])===null||l===void 0?void 0:l.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(l){rn[this.storageKey]=Object.assign(Object.assign({},rn[this.storageKey]),{cachedAt:l})}_debug(...l){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${B0}) ${new Date().toISOString()}`,...l),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var l;try{const s=ip(window.location.href);let i="none";if(this._isImplicitGrantCallback(s)?i="implicit":await this._isPKCECallback(s)&&(i="pkce"),qt()&&this.detectSessionInUrl&&i!=="none"){const{data:c,error:d}=await this._getSessionFromURL(s,i);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),Zy(d)){const x=(l=d.details)===null||l===void 0?void 0:l.code;if(x==="identity_already_exists"||x==="identity_not_found"||x==="single_identity_not_deletable")return{error:d}}return await this._removeSession(),{error:d}}const{session:h,redirectType:m}=c;return this._debug("#_initialize()","detected session in URL",h,"redirect type",m),await this._saveSession(h),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return me(s)?{error:s}:{error:new $0("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(l){var s,i,c;try{const d=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(s=l?.options)===null||s===void 0?void 0:s.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(c=l?.options)===null||c===void 0?void 0:c.captchaToken}},xform:ca}),{data:h,error:m}=d;if(m||!h)return{data:{user:null,session:null},error:m};const x=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",x)),{data:{user:g,session:x},error:null}}catch(d){if(me(d))return{data:{user:null,session:null},error:d};throw d}}async signUp(l){var s,i,c;try{let d;if("email"in l){const{email:p,password:b,options:j}=l;let S=null,_=null;this.flowType==="pkce"&&([S,_]=await sn(this.storage,this.storageKey)),d=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:j?.emailRedirectTo,body:{email:p,password:b,data:(s=j?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:j?.captchaToken},code_challenge:S,code_challenge_method:_},xform:ca})}else if("phone"in l){const{phone:p,password:b,options:j}=l;d=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:b,data:(i=j?.data)!==null&&i!==void 0?i:{},channel:(c=j?.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:j?.captchaToken}},xform:ca})}else throw new $i("You must provide either an email or phone number and a password");const{data:h,error:m}=d;if(m||!h)return{data:{user:null,session:null},error:m};const x=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",x)),{data:{user:g,session:x},error:null}}catch(d){if(me(d))return{data:{user:null,session:null},error:d};throw d}}async signInWithPassword(l){try{let s;if("email"in l){const{email:d,password:h,options:m}=l;s=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:h,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:v0})}else if("phone"in l){const{phone:d,password:h,options:m}=l;s=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:h,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:v0})}else throw new $i("You must provide either an email or phone number and a password");const{data:i,error:c}=s;return c?{data:{user:null,session:null},error:c}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Hi}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:c})}catch(s){if(me(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(l){var s,i,c,d;return await this._handleProviderSignIn(l.provider,{redirectTo:(s=l.options)===null||s===void 0?void 0:s.redirectTo,scopes:(i=l.options)===null||i===void 0?void 0:i.scopes,queryParams:(c=l.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(d=l.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(l){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(l))}async signInWithWeb3(l){const{chain:s}=l;if(s==="solana")return await this.signInWithSolana(l);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(l){var s,i,c,d,h,m,x,g,p,b,j,S;let _,R;if("message"in l)_=l.message,R=l.signature;else{const{chain:D,wallet:N,statement:X,options:q}=l;let L;if(qt())if(typeof N=="object")L=N;else{const V=window;if("solana"in V&&typeof V.solana=="object"&&("signIn"in V.solana&&typeof V.solana.signIn=="function"||"signMessage"in V.solana&&typeof V.solana.signMessage=="function"))L=V.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!q?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=N}const H=new URL((s=q?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in L&&L.signIn){const V=await L.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},q?.signInWithSolana),{version:"1",domain:H.host,uri:H.href}),X?{statement:X}:null));let F;if(Array.isArray(V)&&V[0]&&typeof V[0]=="object")F=V[0];else if(V&&typeof V=="object"&&"signedMessage"in V&&"signature"in V)F=V;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)_=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),R=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in L)||typeof L.signMessage!="function"||!("publicKey"in L)||typeof L!="object"||!L.publicKey||!("toBase58"in L.publicKey)||typeof L.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${H.host} wants you to sign in with your Solana account:`,L.publicKey.toBase58(),...X?["",X,""]:[""],"Version: 1",`URI: ${H.href}`,`Issued At: ${(c=(i=q?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((d=q?.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${q.signInWithSolana.notBefore}`]:[],...!((h=q?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${q.signInWithSolana.expirationTime}`]:[],...!((m=q?.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${q.signInWithSolana.chainId}`]:[],...!((x=q?.signInWithSolana)===null||x===void 0)&&x.nonce?[`Nonce: ${q.signInWithSolana.nonce}`]:[],...!((g=q?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${q.signInWithSolana.requestId}`]:[],...!((b=(p=q?.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||b===void 0)&&b.length?["Resources",...q.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const V=await L.signMessage(new TextEncoder().encode(_),"utf8");if(!V||!(V instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");R=V}}try{const{data:D,error:N}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:sp(R)},!((j=l.options)===null||j===void 0)&&j.captchaToken?{gotrue_meta_security:{captcha_token:(S=l.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:ca});if(N)throw N;return!D||!D.session||!D.user?{data:{user:null,session:null},error:new Hi}:(D.session&&(await this._saveSession(D.session),await this._notifyAllSubscribers("SIGNED_IN",D.session)),{data:Object.assign({},D),error:N})}catch(D){if(me(D))return{data:{user:null,session:null},error:D};throw D}}async _exchangeCodeForSession(l){const s=await cs(this.storage,`${this.storageKey}-code-verifier`),[i,c]=(s??"").split("/");try{const{data:d,error:h}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:l,code_verifier:i},xform:ca});if(await qa(this.storage,`${this.storageKey}-code-verifier`),h)throw h;return!d||!d.session||!d.user?{data:{user:null,session:null,redirectType:null},error:new Hi}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:Object.assign(Object.assign({},d),{redirectType:c??null}),error:h})}catch(d){if(me(d))return{data:{user:null,session:null,redirectType:null},error:d};throw d}}async signInWithIdToken(l){try{const{options:s,provider:i,token:c,access_token:d,nonce:h}=l,m=await _e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:c,access_token:d,nonce:h,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:ca}),{data:x,error:g}=m;return g?{data:{user:null,session:null},error:g}:!x||!x.session||!x.user?{data:{user:null,session:null},error:new Hi}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:x,error:g})}catch(s){if(me(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(l){var s,i,c,d,h;try{if("email"in l){const{email:m,options:x}=l;let g=null,p=null;this.flowType==="pkce"&&([g,p]=await sn(this.storage,this.storageKey));const{error:b}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(s=x?.data)!==null&&s!==void 0?s:{},create_user:(i=x?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:g,code_challenge_method:p},redirectTo:x?.emailRedirectTo});return{data:{user:null,session:null},error:b}}if("phone"in l){const{phone:m,options:x}=l,{data:g,error:p}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(c=x?.data)!==null&&c!==void 0?c:{},create_user:(d=x?.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:x?.captchaToken},channel:(h=x?.channel)!==null&&h!==void 0?h:"sms"}});return{data:{user:null,session:null,messageId:g?.message_id},error:p}}throw new $i("You must provide either an email or phone number.")}catch(m){if(me(m))return{data:{user:null,session:null},error:m};throw m}}async verifyOtp(l){var s,i;try{let c,d;"options"in l&&(c=(s=l.options)===null||s===void 0?void 0:s.redirectTo,d=(i=l.options)===null||i===void 0?void 0:i.captchaToken);const{data:h,error:m}=await _e(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},l),{gotrue_meta_security:{captcha_token:d}}),redirectTo:c,xform:ca});if(m)throw m;if(!h)throw new Error("An error occurred on token verification.");const x=h.session,g=h.user;return x?.access_token&&(await this._saveSession(x),await this._notifyAllSubscribers(l.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",x)),{data:{user:g,session:x},error:null}}catch(c){if(me(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithSSO(l){var s,i,c;try{let d=null,h=null;return this.flowType==="pkce"&&([d,h]=await sn(this.storage,this.storageKey)),await _e(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in l?{provider_id:l.providerId}:null),"domain"in l?{domain:l.domain}:null),{redirect_to:(i=(s=l.options)===null||s===void 0?void 0:s.redirectTo)!==null&&i!==void 0?i:void 0}),!((c=l?.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:l.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:h}),headers:this.headers,xform:wp})}catch(d){if(me(d))return{data:null,error:d};throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async l=>{const{data:{session:s},error:i}=l;if(i)throw i;if(!s)throw new Ha;const{error:c}=await _e(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:c}})}catch(l){if(me(l))return{data:{user:null,session:null},error:l};throw l}}async resend(l){try{const s=`${this.url}/resend`;if("email"in l){const{email:i,type:c,options:d}=l,{error:h}=await _e(this.fetch,"POST",s,{headers:this.headers,body:{email:i,type:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},redirectTo:d?.emailRedirectTo});return{data:{user:null,session:null},error:h}}else if("phone"in l){const{phone:i,type:c,options:d}=l,{data:h,error:m}=await _e(this.fetch,"POST",s,{headers:this.headers,body:{phone:i,type:c,gotrue_meta_security:{captcha_token:d?.captchaToken}}});return{data:{user:null,session:null,messageId:h?.message_id},error:m}}throw new $i("You must provide either an email or phone number and a type")}catch(s){if(me(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(l,s){this._debug("#_acquireLock","begin",l);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await i,await s()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,l,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=s();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(l){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await l(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let l=null;const s=await cs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?l=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!l)return{data:{session:null},error:null};const i=l.expires_at?l.expires_at*1e3-Date.now()<yo:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",l.expires_at),!i){if(this.userStorage){const h=await cs(this.userStorage,this.storageKey+"-user");h?.user?l.user=h.user:l.user=bo()}if(this.storage.isServer&&l.user){let h=this.suppressGetSessionWarning;l=new Proxy(l,{get:(x,g,p)=>(!h&&g==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),h=!0,this.suppressGetSessionWarning=!0),Reflect.get(x,g,p))})}return{data:{session:l},error:null}}const{session:c,error:d}=await this._callRefreshToken(l.refresh_token);return d?{data:{session:null},error:d}:{data:{session:c},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(l){return l?await this._getUser(l):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(l){try{return l?await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:l,xform:$a}):await this._useSession(async s=>{var i,c,d;const{data:h,error:m}=s;if(m)throw m;return!(!((i=h.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ha}:await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0,xform:$a})})}catch(s){if(me(s))return Ky(s)&&(await this._removeSession(),await qa(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(l,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(l,s))}async _updateUser(l,s={}){try{return await this._useSession(async i=>{const{data:c,error:d}=i;if(d)throw d;if(!c.session)throw new Ha;const h=c.session;let m=null,x=null;this.flowType==="pkce"&&l.email!=null&&([m,x]=await sn(this.storage,this.storageKey));const{data:g,error:p}=await _e(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},l),{code_challenge:m,code_challenge_method:x}),jwt:h.access_token,xform:$a});if(p)throw p;return h.user=g.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),{data:{user:h.user},error:null}})}catch(i){if(me(i))return{data:{user:null},error:i};throw i}}async setSession(l){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(l))}async _setSession(l){try{if(!l.access_token||!l.refresh_token)throw new Ha;const s=Date.now()/1e3;let i=s,c=!0,d=null;const{payload:h}=vo(l.access_token);if(h.exp&&(i=h.exp,c=i<=s),c){const{session:m,error:x}=await this._callRefreshToken(l.refresh_token);if(x)return{data:{user:null,session:null},error:x};if(!m)return{data:{user:null,session:null},error:null};d=m}else{const{data:m,error:x}=await this._getUser(l.access_token);if(x)throw x;d={access_token:l.access_token,refresh_token:l.refresh_token,user:m.user,token_type:"bearer",expires_in:i-s,expires_at:i},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return{data:{user:d.user,session:d},error:null}}catch(s){if(me(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(l){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(l))}async _refreshSession(l){try{return await this._useSession(async s=>{var i;if(!l){const{data:h,error:m}=s;if(m)throw m;l=(i=h.session)!==null&&i!==void 0?i:void 0}if(!l?.refresh_token)throw new Ha;const{session:c,error:d}=await this._callRefreshToken(l.refresh_token);return d?{data:{user:null,session:null},error:d}:c?{data:{user:c.user,session:c},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(me(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(l,s){try{if(!qt())throw new Gi("No browser detected.");if(l.error||l.error_description||l.error_code)throw new Gi(l.error_description||"Error in URL with unspecified error_description",{error:l.error||"unspecified_error",code:l.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new f0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Gi("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!l.code)throw new f0("No code detected.");const{data:X,error:q}=await this._exchangeCodeForSession(l.code);if(q)throw q;const L=new URL(window.location.href);return L.searchParams.delete("code"),window.history.replaceState(window.history.state,"",L.toString()),{data:{session:X.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:c,access_token:d,refresh_token:h,expires_in:m,expires_at:x,token_type:g}=l;if(!d||!m||!h||!g)throw new Gi("No session defined in URL");const p=Math.round(Date.now()/1e3),b=parseInt(m);let j=p+b;x&&(j=parseInt(x));const S=j-p;S*1e3<=on&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${b}s`);const _=j-b;p-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,j,p):p-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,j,p);const{data:R,error:D}=await this._getUser(d);if(D)throw D;const N={provider_token:i,provider_refresh_token:c,access_token:d,expires_in:b,expires_at:j,refresh_token:h,token_type:g,user:R.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:N,redirectType:l.type},error:null}}catch(i){if(me(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(l){return!!(l.access_token||l.error_description)}async _isPKCECallback(l){const s=await cs(this.storage,`${this.storageKey}-code-verifier`);return!!(l.code&&s)}async signOut(l={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(l))}async _signOut({scope:l}={scope:"global"}){return await this._useSession(async s=>{var i;const{data:c,error:d}=s;if(d)return{error:d};const h=(i=c.session)===null||i===void 0?void 0:i.access_token;if(h){const{error:m}=await this.admin.signOut(h,l);if(m&&!(Xy(m)&&(m.status===404||m.status===401||m.status===403)))return{error:m}}return l!=="others"&&(await this._removeSession(),await qa(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(l){const s=lp(),i={id:s,callback:l,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:i}}}async _emitInitialSession(l){return await this._useSession(async s=>{var i,c;try{const{data:{session:d},error:h}=s;if(h)throw h;await((i=this.stateChangeEmitters.get(l))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",l,"session",d)}catch(d){await((c=this.stateChangeEmitters.get(l))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",l,"error",d),console.error(d)}})}async resetPasswordForEmail(l,s={}){let i=null,c=null;this.flowType==="pkce"&&([i,c]=await sn(this.storage,this.storageKey,!0));try{return await _e(this.fetch,"POST",`${this.url}/recover`,{body:{email:l,code_challenge:i,code_challenge_method:c,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(d){if(me(d))return{data:null,error:d};throw d}}async getUserIdentities(){var l;try{const{data:s,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(l=s.user.identities)!==null&&l!==void 0?l:[]},error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}}async linkIdentity(l){var s;try{const{data:i,error:c}=await this._useSession(async d=>{var h,m,x,g,p;const{data:b,error:j}=d;if(j)throw j;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,l.provider,{redirectTo:(h=l.options)===null||h===void 0?void 0:h.redirectTo,scopes:(m=l.options)===null||m===void 0?void 0:m.scopes,queryParams:(x=l.options)===null||x===void 0?void 0:x.queryParams,skipBrowserRedirect:!0});return await _e(this.fetch,"GET",S,{headers:this.headers,jwt:(p=(g=b.session)===null||g===void 0?void 0:g.access_token)!==null&&p!==void 0?p:void 0})});if(c)throw c;return qt()&&!(!((s=l.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:l.provider,url:i?.url},error:null}}catch(i){if(me(i))return{data:{provider:l.provider,url:null},error:i};throw i}}async unlinkIdentity(l){try{return await this._useSession(async s=>{var i,c;const{data:d,error:h}=s;if(h)throw h;return await _e(this.fetch,"DELETE",`${this.url}/user/identities/${l.identity_id}`,{headers:this.headers,jwt:(c=(i=d.session)===null||i===void 0?void 0:i.access_token)!==null&&c!==void 0?c:void 0})})}catch(s){if(me(s))return{data:null,error:s};throw s}}async _refreshAccessToken(l){const s=`#_refreshAccessToken(${l.substring(0,5)}...)`;this._debug(s,"begin");try{const i=Date.now();return await op(async c=>(c>0&&await cp(200*Math.pow(2,c-1)),this._debug(s,"refreshing attempt",c),await _e(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:l},headers:this.headers,xform:ca})),(c,d)=>{const h=200*Math.pow(2,c);return d&&po(d)&&Date.now()+h-i<on})}catch(i){if(this._debug(s,"error",i),me(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(s,"end")}}_isValidSession(l){return typeof l=="object"&&l!==null&&"access_token"in l&&"refresh_token"in l&&"expires_at"in l}async _handleProviderSignIn(l,s){const i=await this._getUrlForProvider(`${this.url}/authorize`,l,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",l,"options",s,"url",i),qt()&&!s.skipBrowserRedirect&&window.location.assign(i),{data:{provider:l,url:i},error:null}}async _recoverAndRefresh(){var l,s;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const c=await cs(this.storage,this.storageKey);if(c&&this.userStorage){let h=await cs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:c.user},await un(this.userStorage,this.storageKey+"-user",h)),c.user=(l=h?.user)!==null&&l!==void 0?l:bo()}else if(c&&!c.user&&!c.user){const h=await cs(this.storage,this.storageKey+"-user");h&&h?.user?(c.user=h.user,await qa(this.storage,this.storageKey+"-user"),await un(this.storage,this.storageKey,c)):c.user=bo()}if(this._debug(i,"session from storage",c),!this._isValidSession(c)){this._debug(i,"session is not valid"),c!==null&&await this._removeSession();return}const d=((s=c.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<yo;if(this._debug(i,`session has${d?"":" not"} expired with margin of ${yo}s`),d){if(this.autoRefreshToken&&c.refresh_token){const{error:h}=await this._callRefreshToken(c.refresh_token);h&&(console.error(h),po(h)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:m}=await this._getUser(c.access_token);!m&&h?.user?(c.user=h.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(i,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(i,"error",c),console.error(c);return}finally{this._debug(i,"end")}}async _callRefreshToken(l){var s,i;if(!l)throw new Ha;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${l.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new Vi;const{data:d,error:h}=await this._refreshAccessToken(l);if(h)throw h;if(!d.session)throw new Ha;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const m={session:d.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(d){if(this._debug(c,"error",d),me(d)){const h={session:null,error:d};return po(d)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(h),h}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(d),d}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(l,s,i=!0){const c=`#_notifyAllSubscribers(${l})`;this._debug(c,"begin",s,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:l,session:s});const d=[],h=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(l,s)}catch(x){d.push(x)}});if(await Promise.all(h),d.length>0){for(let m=0;m<d.length;m+=1)console.error(d[m]);throw d[0]}}finally{this._debug(c,"end")}}async _saveSession(l){this._debug("#_saveSession()",l),this.suppressGetSessionWarning=!0;const s=Object.assign({},l),i=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&s.user&&await un(this.userStorage,this.storageKey+"-user",{user:s.user});const c=Object.assign({},s);delete c.user;const d=y0(c);await un(this.storage,this.storageKey,d)}else{const c=y0(s);await un(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),await qa(this.storage,this.storageKey),await qa(this.storage,this.storageKey+"-code-verifier"),await qa(this.storage,this.storageKey+"-user"),this.userStorage&&await qa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const l=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{l&&qt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",l)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const l=setInterval(()=>this._autoRefreshTokenTick(),on);this.autoRefreshTicker=l,l&&typeof l=="object"&&typeof l.unref=="function"?l.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(l),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const l=this.autoRefreshTicker;this.autoRefreshTicker=null,l&&clearInterval(l)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const l=Date.now();try{return await this._useSession(async s=>{const{data:{session:i}}=s;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((i.expires_at*1e3-l)/on);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${on}ms, refresh threshold is ${Ao} ticks`),c<=Ao&&await this._callRefreshToken(i.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(l){if(l.isAcquireTimeout||l instanceof Y0)this._debug("auto refresh token tick lock not available");else throw l}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!qt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(l){console.error("_handleVisibilityChange",l)}}async _onVisibilityChanged(l){const s=`#_onVisibilityChanged(${l})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),l||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(l,s,i){const c=[`provider=${encodeURIComponent(s)}`];if(i?.redirectTo&&c.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&c.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[d,h]=await sn(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(h)}`});c.push(m.toString())}if(i?.queryParams){const d=new URLSearchParams(i.queryParams);c.push(d.toString())}return i?.skipBrowserRedirect&&c.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${l}?${c.join("&")}`}async _unenroll(l){try{return await this._useSession(async s=>{var i;const{data:c,error:d}=s;return d?{data:null,error:d}:await _e(this.fetch,"DELETE",`${this.url}/factors/${l.factorId}`,{headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token})})}catch(s){if(me(s))return{data:null,error:s};throw s}}async _enroll(l){try{return await this._useSession(async s=>{var i,c;const{data:d,error:h}=s;if(h)return{data:null,error:h};const m=Object.assign({friendly_name:l.friendlyName,factor_type:l.factorType},l.factorType==="phone"?{phone:l.phone}:{issuer:l.issuer}),{data:x,error:g}=await _e(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(i=d?.session)===null||i===void 0?void 0:i.access_token});return g?{data:null,error:g}:(l.factorType==="totp"&&(!((c=x?.totp)===null||c===void 0)&&c.qr_code)&&(x.totp.qr_code=`data:image/svg+xml;utf-8,${x.totp.qr_code}`),{data:x,error:null})})}catch(s){if(me(s))return{data:null,error:s};throw s}}async _verify(l){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var i;const{data:c,error:d}=s;if(d)return{data:null,error:d};const{data:h,error:m}=await _e(this.fetch,"POST",`${this.url}/factors/${l.factorId}/verify`,{body:{code:l.code,challenge_id:l.challengeId},headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token});return m?{data:null,error:m}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),{data:h,error:m})})}catch(s){if(me(s))return{data:null,error:s};throw s}})}async _challenge(l){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var i;const{data:c,error:d}=s;return d?{data:null,error:d}:await _e(this.fetch,"POST",`${this.url}/factors/${l.factorId}/challenge`,{body:{channel:l.channel},headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token})})}catch(s){if(me(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(l){const{data:s,error:i}=await this._challenge({factorId:l.factorId});return i?{data:null,error:i}:await this._verify({factorId:l.factorId,challengeId:s.id,code:l.code})}async _listFactors(){const{data:{user:l},error:s}=await this.getUser();if(s)return{data:null,error:s};const i=l?.factors||[],c=i.filter(h=>h.factor_type==="totp"&&h.status==="verified"),d=i.filter(h=>h.factor_type==="phone"&&h.status==="verified");return{data:{all:i,totp:c,phone:d},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async l=>{var s,i;const{data:{session:c},error:d}=l;if(d)return{data:null,error:d};if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=vo(c.access_token);let m=null;h.aal&&(m=h.aal);let x=m;((i=(s=c.user.factors)===null||s===void 0?void 0:s.filter(b=>b.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(x="aal2");const p=h.amr||[];return{data:{currentLevel:m,nextLevel:x,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(l,s={keys:[]}){let i=s.keys.find(m=>m.kid===l);if(i)return i;const c=Date.now();if(i=this.jwks.keys.find(m=>m.kid===l),i&&this.jwks_cached_at+Vy>c)return i;const{data:d,error:h}=await _e(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=c,i=d.keys.find(m=>m.kid===l),!i)?null:i}async getClaims(l,s={}){try{let i=l;if(!i){const{data:S,error:_}=await this.getSession();if(_||!S.session)return{data:null,error:_};i=S.session.access_token}const{header:c,payload:d,signature:h,raw:{header:m,payload:x}}=vo(i);s?.allowExpired||xp(d.exp);const g=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!g){const{error:S}=await this.getUser(i);if(S)throw S;return{data:{claims:d,header:c,signature:h},error:null}}const p=yp(c.alg),b=await crypto.subtle.importKey("jwk",g,p,!0,["verify"]);if(!await crypto.subtle.verify(p,b,h,ap(`${m}.${x}`)))throw new Ro("Invalid JWT signature");return{data:{claims:d,header:c,signature:h},error:null}}catch(i){if(me(i))return{data:null,error:i};throw i}}}pl.nextInstanceID=0;const Up=pl;class Mp extends Up{constructor(l){super(l)}}var kp=function(u,l,s,i){function c(d){return d instanceof s?d:new s(function(h){h(d)})}return new(s||(s=Promise))(function(d,h){function m(p){try{g(i.next(p))}catch(b){h(b)}}function x(p){try{g(i.throw(p))}catch(b){h(b)}}function g(p){p.done?d(p.value):c(p.value).then(m,x)}g((i=i.apply(u,l||[])).next())})};class zp{constructor(l,s,i){var c,d,h;if(this.supabaseUrl=l,this.supabaseKey=s,!l)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const m=Hy(l),x=new URL(m);this.realtimeUrl=new URL("realtime/v1",x),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",x),this.storageUrl=new URL("storage/v1",x),this.functionsUrl=new URL("functions/v1",x);const g=`sb-${x.hostname.split(".")[0]}-auth-token`,p={db:Ry,realtime:My,auth:Object.assign(Object.assign({},Uy),{storageKey:g}),global:Oy},b=$y(i??{},p);this.storageKey=(c=b.auth.storageKey)!==null&&c!==void 0?c:"",this.headers=(d=b.global.headers)!==null&&d!==void 0?d:{},b.accessToken?(this.accessToken=b.accessToken,this.auth=new Proxy({},{get:(j,S)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(S)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=b.auth)!==null&&h!==void 0?h:{},this.headers,b.global.fetch),this.fetch=qy(s,this._getAccessToken.bind(this),b.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},b.realtime)),this.rest=new ey(new URL("rest/v1",x).href,{headers:this.headers,schema:b.db.schema,fetch:this.fetch}),this.storage=new Cy(this.storageUrl.href,this.headers,this.fetch,i?.storage),b.accessToken||this._listenForAuthEvents()}get functions(){return new Gx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(l){return this.rest.from(l)}schema(l){return this.rest.schema(l)}rpc(l,s={},i={}){return this.rest.rpc(l,s,i)}channel(l,s={config:{}}){return this.realtime.channel(l,s)}getChannels(){return this.realtime.getChannels()}removeChannel(l){return this.realtime.removeChannel(l)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var l,s;return kp(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(s=(l=i.session)===null||l===void 0?void 0:l.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:l,persistSession:s,detectSessionInUrl:i,storage:c,storageKey:d,flowType:h,lock:m,debug:x},g,p){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Mp({url:this.authUrl.href,headers:Object.assign(Object.assign({},b),g),storageKey:d,autoRefreshToken:l,persistSession:s,detectSessionInUrl:i,storage:c,flowType:h,lock:m,debug:x,fetch:p,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(l){return new gy(this.realtimeUrl.href,Object.assign(Object.assign({},l),{params:Object.assign({apikey:this.supabaseKey},l?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,i)=>{this._handleTokenChanged(s,"CLIENT",i?.access_token)})}_handleTokenChanged(l,s,i){(l==="TOKEN_REFRESHED"||l==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:l==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Lp=(u,l,s)=>new zp(u,l,s);function qp(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const u=process.version.match(/^v(\d+)\./);return u?parseInt(u[1],10)<=18:!1}qp()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Bp={};var Uo=null;function Hp(u){try{return crypto.getRandomValues(new Uint8Array(u))}catch{}try{return Bp.randomBytes(u)}catch{}if(!Uo)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return Uo(u)}function $p(u){Uo=u}function $o(u,l){if(u=u||Go,typeof u!="number")throw Error("Illegal arguments: "+typeof u+", "+typeof l);u<4?u=4:u>31&&(u=31);var s=[];return s.push("$2b$"),u<10&&s.push("0"),s.push(u.toString()),s.push("$"),s.push(Yi(Hp(vl),vl)),s.join("")}function V0(u,l,s){if(typeof l=="function"&&(s=l,l=void 0),typeof u=="function"&&(s=u,u=void 0),typeof u>"u")u=Go;else if(typeof u!="number")throw Error("illegal arguments: "+typeof u);function i(c){Ht(function(){try{c(null,$o(u))}catch(d){c(d)}})}if(s){if(typeof s!="function")throw Error("Illegal callback: "+typeof s);i(s)}else return new Promise(function(c,d){i(function(h,m){if(h){d(h);return}c(m)})})}function Q0(u,l){if(typeof l>"u"&&(l=Go),typeof l=="number"&&(l=$o(l)),typeof u!="string"||typeof l!="string")throw Error("Illegal arguments: "+typeof u+", "+typeof l);return Mo(u,l)}function X0(u,l,s,i){function c(d){typeof u=="string"&&typeof l=="number"?V0(l,function(h,m){Mo(u,m,d,i)}):typeof u=="string"&&typeof l=="string"?Mo(u,l,d,i):Ht(d.bind(this,Error("Illegal arguments: "+typeof u+", "+typeof l)))}if(s){if(typeof s!="function")throw Error("Illegal callback: "+typeof s);c(s)}else return new Promise(function(d,h){c(function(m,x){if(m){h(m);return}d(x)})})}function K0(u,l){for(var s=u.length^l.length,i=0;i<u.length;++i)s|=u.charCodeAt(i)^l.charCodeAt(i);return s===0}function Gp(u,l){if(typeof u!="string"||typeof l!="string")throw Error("Illegal arguments: "+typeof u+", "+typeof l);return l.length!==60?!1:K0(Q0(u,l.substring(0,l.length-31)),l)}function Ip(u,l,s,i){function c(d){if(typeof u!="string"||typeof l!="string"){Ht(d.bind(this,Error("Illegal arguments: "+typeof u+", "+typeof l)));return}if(l.length!==60){Ht(d.bind(this,null,!1));return}X0(u,l.substring(0,29),function(h,m){h?d(h):d(null,K0(m,l))},i)}if(s){if(typeof s!="function")throw Error("Illegal callback: "+typeof s);c(s)}else return new Promise(function(d,h){c(function(m,x){if(m){h(m);return}d(x)})})}function Pp(u){if(typeof u!="string")throw Error("Illegal arguments: "+typeof u);return parseInt(u.split("$")[2],10)}function Yp(u){if(typeof u!="string")throw Error("Illegal arguments: "+typeof u);if(u.length!==60)throw Error("Illegal hash length: "+u.length+" != 60");return u.substring(0,29)}function Vp(u){if(typeof u!="string")throw Error("Illegal arguments: "+typeof u);return Z0(u)>72}var Ht=typeof process<"u"&&process&&typeof process.nextTick=="function"?typeof setImmediate=="function"?setImmediate:process.nextTick:setTimeout;function Z0(u){for(var l=0,s=0,i=0;i<u.length;++i)s=u.charCodeAt(i),s<128?l+=1:s<2048?l+=2:(s&64512)===55296&&(u.charCodeAt(i+1)&64512)===56320?(++i,l+=4):l+=3;return l}function Qp(u){for(var l=0,s,i,c=new Array(Z0(u)),d=0,h=u.length;d<h;++d)s=u.charCodeAt(d),s<128?c[l++]=s:s<2048?(c[l++]=s>>6|192,c[l++]=s&63|128):(s&64512)===55296&&((i=u.charCodeAt(d+1))&64512)===56320?(s=65536+((s&1023)<<10)+(i&1023),++d,c[l++]=s>>18|240,c[l++]=s>>12&63|128,c[l++]=s>>6&63|128,c[l++]=s&63|128):(c[l++]=s>>12|224,c[l++]=s>>6&63|128,c[l++]=s&63|128);return c}var cn="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),Ba=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function Yi(u,l){var s=0,i=[],c,d;if(l<=0||l>u.length)throw Error("Illegal len: "+l);for(;s<l;){if(c=u[s++]&255,i.push(cn[c>>2&63]),c=(c&3)<<4,s>=l){i.push(cn[c&63]);break}if(d=u[s++]&255,c|=d>>4&15,i.push(cn[c&63]),c=(d&15)<<2,s>=l){i.push(cn[c&63]);break}d=u[s++]&255,c|=d>>6&3,i.push(cn[c&63]),i.push(cn[d&63])}return i.join("")}function J0(u,l){var s=0,i=u.length,c=0,d=[],h,m,x,g,p,b;if(l<=0)throw Error("Illegal len: "+l);for(;s<i-1&&c<l&&(b=u.charCodeAt(s++),h=b<Ba.length?Ba[b]:-1,b=u.charCodeAt(s++),m=b<Ba.length?Ba[b]:-1,!(h==-1||m==-1||(p=h<<2>>>0,p|=(m&48)>>4,d.push(String.fromCharCode(p)),++c>=l||s>=i)||(b=u.charCodeAt(s++),x=b<Ba.length?Ba[b]:-1,x==-1)||(p=(m&15)<<4>>>0,p|=(x&60)>>2,d.push(String.fromCharCode(p)),++c>=l||s>=i)));)b=u.charCodeAt(s++),g=b<Ba.length?Ba[b]:-1,p=(x&3)<<6>>>0,p|=g,d.push(String.fromCharCode(p)),++c;var j=[];for(s=0;s<c;s++)j.push(d[s].charCodeAt(0));return j}var vl=16,Go=10,Xp=16,Kp=100,_0=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],w0=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],F0=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function bl(u,l,s,i){var c,d=u[l],h=u[l+1];return d^=s[0],c=i[d>>>24],c+=i[256|d>>16&255],c^=i[512|d>>8&255],c+=i[768|d&255],h^=c^s[1],c=i[h>>>24],c+=i[256|h>>16&255],c^=i[512|h>>8&255],c+=i[768|h&255],d^=c^s[2],c=i[d>>>24],c+=i[256|d>>16&255],c^=i[512|d>>8&255],c+=i[768|d&255],h^=c^s[3],c=i[h>>>24],c+=i[256|h>>16&255],c^=i[512|h>>8&255],c+=i[768|h&255],d^=c^s[4],c=i[d>>>24],c+=i[256|d>>16&255],c^=i[512|d>>8&255],c+=i[768|d&255],h^=c^s[5],c=i[h>>>24],c+=i[256|h>>16&255],c^=i[512|h>>8&255],c+=i[768|h&255],d^=c^s[6],c=i[d>>>24],c+=i[256|d>>16&255],c^=i[512|d>>8&255],c+=i[768|d&255],h^=c^s[7],c=i[h>>>24],c+=i[256|h>>16&255],c^=i[512|h>>8&255],c+=i[768|h&255],d^=c^s[8],c=i[d>>>24],c+=i[256|d>>16&255],c^=i[512|d>>8&255],c+=i[768|d&255],h^=c^s[9],c=i[h>>>24],c+=i[256|h>>16&255],c^=i[512|h>>8&255],c+=i[768|h&255],d^=c^s[10],c=i[d>>>24],c+=i[256|d>>16&255],c^=i[512|d>>8&255],c+=i[768|d&255],h^=c^s[11],c=i[h>>>24],c+=i[256|h>>16&255],c^=i[512|h>>8&255],c+=i[768|h&255],d^=c^s[12],c=i[d>>>24],c+=i[256|d>>16&255],c^=i[512|d>>8&255],c+=i[768|d&255],h^=c^s[13],c=i[h>>>24],c+=i[256|h>>16&255],c^=i[512|h>>8&255],c+=i[768|h&255],d^=c^s[14],c=i[d>>>24],c+=i[256|d>>16&255],c^=i[512|d>>8&255],c+=i[768|d&255],h^=c^s[15],c=i[h>>>24],c+=i[256|h>>16&255],c^=i[512|h>>8&255],c+=i[768|h&255],d^=c^s[16],u[l]=h^s[Xp+1],u[l+1]=d,u}function dn(u,l){for(var s=0,i=0;s<4;++s)i=i<<8|u[l]&255,l=(l+1)%u.length;return{key:i,offp:l}}function S0(u,l,s){for(var i=0,c=[0,0],d=l.length,h=s.length,m,x=0;x<d;x++)m=dn(u,i),i=m.offp,l[x]=l[x]^m.key;for(x=0;x<d;x+=2)c=bl(c,0,l,s),l[x]=c[0],l[x+1]=c[1];for(x=0;x<h;x+=2)c=bl(c,0,l,s),s[x]=c[0],s[x+1]=c[1]}function Zp(u,l,s,i){for(var c=0,d=[0,0],h=s.length,m=i.length,x,g=0;g<h;g++)x=dn(l,c),c=x.offp,s[g]=s[g]^x.key;for(c=0,g=0;g<h;g+=2)x=dn(u,c),c=x.offp,d[0]^=x.key,x=dn(u,c),c=x.offp,d[1]^=x.key,d=bl(d,0,s,i),s[g]=d[0],s[g+1]=d[1];for(g=0;g<m;g+=2)x=dn(u,c),c=x.offp,d[0]^=x.key,x=dn(u,c),c=x.offp,d[1]^=x.key,d=bl(d,0,s,i),i[g]=d[0],i[g+1]=d[1]}function N0(u,l,s,i,c){var d=F0.slice(),h=d.length,m;if(s<4||s>31)if(m=Error("Illegal number of rounds (4-31): "+s),i){Ht(i.bind(this,m));return}else throw m;if(l.length!==vl)if(m=Error("Illegal salt length: "+l.length+" != "+vl),i){Ht(i.bind(this,m));return}else throw m;s=1<<s>>>0;var x,g,p=0,b;typeof Int32Array=="function"?(x=new Int32Array(_0),g=new Int32Array(w0)):(x=_0.slice(),g=w0.slice()),Zp(l,u,x,g);function j(){if(c&&c(p/s),p<s)for(var _=Date.now();p<s&&(p=p+1,S0(u,x,g),S0(l,x,g),!(Date.now()-_>Kp)););else{for(p=0;p<64;p++)for(b=0;b<h>>1;b++)bl(d,b<<1,x,g);var R=[];for(p=0;p<h;p++)R.push((d[p]>>24&255)>>>0),R.push((d[p]>>16&255)>>>0),R.push((d[p]>>8&255)>>>0),R.push((d[p]&255)>>>0);if(i){i(null,R);return}else return R}i&&Ht(j)}if(typeof i<"u")j();else for(var S;;)if(typeof(S=j())<"u")return S||[]}function Mo(u,l,s,i){var c;if(typeof u!="string"||typeof l!="string")if(c=Error("Invalid string / salt: Not a string"),s){Ht(s.bind(this,c));return}else throw c;var d,h;if(l.charAt(0)!=="$"||l.charAt(1)!=="2")if(c=Error("Invalid salt version: "+l.substring(0,2)),s){Ht(s.bind(this,c));return}else throw c;if(l.charAt(2)==="$")d="\0",h=3;else{if(d=l.charAt(2),d!=="a"&&d!=="b"&&d!=="y"||l.charAt(3)!=="$")if(c=Error("Invalid salt revision: "+l.substring(2,4)),s){Ht(s.bind(this,c));return}else throw c;h=4}if(l.charAt(h+2)>"$")if(c=Error("Missing salt rounds"),s){Ht(s.bind(this,c));return}else throw c;var m=parseInt(l.substring(h,h+1),10)*10,x=parseInt(l.substring(h+1,h+2),10),g=m+x,p=l.substring(h+3,h+25);u+=d>="a"?"\0":"";var b=Qp(u),j=J0(p,vl);function S(_){var R=[];return R.push("$2"),d>="a"&&R.push(d),R.push("$"),g<10&&R.push("0"),R.push(g.toString()),R.push("$"),R.push(Yi(j,j.length)),R.push(Yi(_,F0.length*4-1)),R.join("")}if(typeof s>"u")return S(N0(b,j,g));N0(b,j,g,function(_,R){_?s(_,null):s(null,S(R))},i)}function Jp(u,l){return Yi(u,l)}function Fp(u,l){return J0(u,l)}const _o={setRandomFallback:$p,genSaltSync:$o,genSalt:V0,hashSync:Q0,hash:X0,compareSync:Gp,compare:Ip,getRounds:Pp,getSalt:Yp,truncates:Vp,encodeBase64:Jp,decodeBase64:Fp},Wp="https://gpejlfhsesjnbeiactlo.supabase.co",ev="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdwZWpsZmhzZXNqbmJlaWFjdGxvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQwNzU2ODYsImV4cCI6MjA2OTY1MTY4Nn0.S70xr_zAksc9uWiFWB3YQhqVN34Kx_OtUmDKB_2uLXc",Me=Lp(Wp,ev),Se={async testConnection(){try{const{data:u,error:l}=await Me.from("companies").select("count",{count:"exact",head:!0});if(l)throw l;return{success:!0,message:"Connected to Supabase successfully!"}}catch(u){return{success:!1,message:u.message}}},async getCompanies(){const{data:u,error:l}=await Me.from("companies").select("*").order("created_at",{ascending:!1});if(l)throw l;return(u||[]).map(s=>({id:s.id,name:s.name,industry:s.industry||"",size:s.size||"",website:s.website||"",phone:s.phone||"",email:s.email||"",address:s.address||{},notes:s.notes||"",tags:s.tags||[],createdAt:new Date(s.created_at),updatedAt:new Date(s.updated_at)}))},async createCompany(u){const{data:l,error:s}=await Me.from("companies").insert([{name:u.name,industry:u.industry||"",size:u.size||"",website:u.website||"",phone:u.phone||"",email:u.email||"",address:u.address||{},notes:u.notes||"",tags:u.tags||[]}]).select().single();if(s)throw s;return{id:l.id,name:l.name,industry:l.industry||"",size:l.size||"",website:l.website||"",phone:l.phone||"",email:l.email||"",address:l.address||{},notes:l.notes||"",tags:l.tags||[],createdAt:new Date(l.created_at),updatedAt:new Date(l.updated_at)}},async updateCompany(u,l){const{data:s,error:i}=await Me.from("companies").update({name:l.name,industry:l.industry,size:l.size,website:l.website,phone:l.phone,email:l.email,address:l.address,notes:l.notes,tags:l.tags}).eq("id",u).select().single();if(i)throw i;return{id:s.id,name:s.name,industry:s.industry||"",size:s.size||"",website:s.website||"",phone:s.phone||"",email:s.email||"",address:s.address||{},notes:s.notes||"",tags:s.tags||[],createdAt:new Date(s.created_at),updatedAt:new Date(s.updated_at)}},async deleteCompany(u){const{error:l}=await Me.from("companies").delete().eq("id",u);if(l)throw l},async getContacts(){const{data:u,error:l}=await Me.from("contacts").select("*").order("created_at",{ascending:!1});if(l)throw l;return(u||[]).map(s=>({id:s.id,companyId:s.company_id||"",firstName:s.first_name,lastName:s.last_name,email:s.email||"",phone:s.phone||"",position:s.position||"",department:s.department||"",isPrimary:s.is_primary||!1,notes:s.notes||"",tags:s.tags||[],createdAt:new Date(s.created_at),updatedAt:new Date(s.updated_at)}))},async createContact(u){const{data:l,error:s}=await Me.from("contacts").insert([{company_id:u.companyId,first_name:u.firstName,last_name:u.lastName,email:u.email,phone:u.phone,position:u.position,department:u.department,is_primary:u.isPrimary,notes:u.notes,tags:u.tags}]).select().single();if(s)throw s;return{id:l.id,companyId:l.company_id||"",firstName:l.first_name,lastName:l.last_name,email:l.email||"",phone:l.phone||"",position:l.position||"",department:l.department||"",isPrimary:l.is_primary||!1,notes:l.notes||"",tags:l.tags||[],createdAt:new Date(l.created_at),updatedAt:new Date(l.updated_at)}},async updateContact(u,l){const{data:s,error:i}=await Me.from("contacts").update({company_id:l.companyId,first_name:l.firstName,last_name:l.lastName,email:l.email,phone:l.phone,position:l.position,department:l.department,is_primary:l.isPrimary,notes:l.notes,tags:l.tags}).eq("id",u).select().single();if(i)throw i;return{id:s.id,companyId:s.company_id||"",firstName:s.first_name,lastName:s.last_name,email:s.email||"",phone:s.phone||"",position:s.position||"",department:s.department||"",isPrimary:s.is_primary||!1,notes:s.notes||"",tags:s.tags||[],createdAt:new Date(s.created_at),updatedAt:new Date(s.updated_at)}},async deleteContact(u){const{error:l}=await Me.from("contacts").delete().eq("id",u);if(l)throw l},async getDeals(){const{data:u,error:l}=await Me.from("deals").select("*").order("created_at",{ascending:!1});if(l)throw l;return(u||[]).map(s=>({id:s.id,companyId:s.company_id||"",contactId:s.contact_id||"",title:s.title,value:s.value||0,currency:s.currency||"USD",stage:s.stage,probability:s.probability||0,expectedCloseDate:s.expected_close_date?new Date(s.expected_close_date):void 0,actualCloseDate:s.actual_close_date?new Date(s.actual_close_date):void 0,description:s.description||"",notes:s.notes||"",tags:s.tags||[],createdAt:new Date(s.created_at),updatedAt:new Date(s.updated_at)}))},async createDeal(u){const{data:l,error:s}=await Me.from("deals").insert([{company_id:u.companyId,contact_id:u.contactId,title:u.title,value:u.value,currency:u.currency,stage:u.stage,probability:u.probability,expected_close_date:u.expectedCloseDate?.toISOString().split("T")[0],actual_close_date:u.actualCloseDate?.toISOString().split("T")[0],description:u.description,notes:u.notes,tags:u.tags}]).select().single();if(s)throw s;return{id:l.id,companyId:l.company_id||"",contactId:l.contact_id||"",title:l.title,value:l.value||0,currency:l.currency||"USD",stage:l.stage,probability:l.probability||0,expectedCloseDate:l.expected_close_date?new Date(l.expected_close_date):void 0,actualCloseDate:l.actual_close_date?new Date(l.actual_close_date):void 0,description:l.description||"",notes:l.notes||"",tags:l.tags||[],createdAt:new Date(l.created_at),updatedAt:new Date(l.updated_at)}},async updateDeal(u,l){const{data:s,error:i}=await Me.from("deals").update({company_id:l.companyId,contact_id:l.contactId,title:l.title,value:l.value,currency:l.currency,stage:l.stage,probability:l.probability,expected_close_date:l.expectedCloseDate?.toISOString().split("T")[0],actual_close_date:l.actualCloseDate?.toISOString().split("T")[0],description:l.description,notes:l.notes,tags:l.tags}).eq("id",u).select().single();if(i)throw i;return{id:s.id,companyId:s.company_id||"",contactId:s.contact_id||"",title:s.title,value:s.value||0,currency:s.currency||"USD",stage:s.stage,probability:s.probability||0,expectedCloseDate:s.expected_close_date?new Date(s.expected_close_date):void 0,actualCloseDate:s.actual_close_date?new Date(s.actual_close_date):void 0,description:s.description||"",notes:s.notes||"",tags:s.tags||[],createdAt:new Date(s.created_at),updatedAt:new Date(s.updated_at)}},async deleteDeal(u){const{error:l}=await Me.from("deals").delete().eq("id",u);if(l)throw l},async getProjects(){const{data:u,error:l}=await Me.from("projects").select("*").order("created_at",{ascending:!1});if(l)throw l;return(u||[]).map(s=>({id:s.id,companyId:s.company_id||"",dealId:s.deal_id||"",title:s.title,description:s.description||"",status:s.status,startDate:s.start_date?new Date(s.start_date):void 0,endDate:s.end_date?new Date(s.end_date):void 0,budget:s.budget||{resources:[],expenses:[],contingencyPercentage:10},tags:s.tags||[],priority:"medium",type:"development",notes:"",progressPercentage:0,milestones:[],createdAt:new Date(s.created_at),updatedAt:new Date(s.updated_at)}))},async createProject(u){const{data:l,error:s}=await Me.from("projects").insert([{company_id:u.companyId,deal_id:u.dealId,title:u.title,description:u.description,status:u.status,start_date:u.startDate?.toISOString().split("T")[0],end_date:u.endDate?.toISOString().split("T")[0],budget:u.budget,tags:u.tags}]).select().single();if(s)throw s;return{id:l.id,companyId:l.company_id||"",dealId:l.deal_id||"",title:l.title,description:l.description||"",status:l.status,startDate:l.start_date?new Date(l.start_date):void 0,endDate:l.end_date?new Date(l.end_date):void 0,budget:l.budget||{resources:[],expenses:[],contingencyPercentage:10},tags:l.tags||[],priority:"medium",type:"development",notes:"",progressPercentage:0,milestones:[],createdAt:new Date(l.created_at),updatedAt:new Date(l.updated_at)}},async updateProject(u,l){const{data:s,error:i}=await Me.from("projects").update({company_id:l.companyId,deal_id:l.dealId,title:l.title,description:l.description,status:l.status,start_date:l.startDate?.toISOString().split("T")[0],end_date:l.endDate?.toISOString().split("T")[0],budget:l.budget,tags:l.tags}).eq("id",u).select().single();if(i)throw i;return{id:s.id,companyId:s.company_id||"",dealId:s.deal_id||"",title:s.title,description:s.description||"",status:s.status,startDate:s.start_date?new Date(s.start_date):void 0,endDate:s.end_date?new Date(s.end_date):void 0,budget:s.budget||{resources:[],expenses:[],contingencyPercentage:10},tags:s.tags||[],priority:"medium",type:"development",notes:"",progressPercentage:0,milestones:[],createdAt:new Date(s.created_at),updatedAt:new Date(s.updated_at)}},async deleteProject(u){const{error:l}=await Me.from("projects").delete().eq("id",u);if(l)throw l},async getTimeEntries(){const{data:u,error:l}=await Me.from("time_entries").select("*").order("date",{ascending:!1});if(l)throw l;return(u||[]).map(s=>({id:s.id,projectId:s.project_id||"",resourceName:s.resource_name,description:s.description||"",startTime:s.start_time?new Date(s.start_time):new Date,duration:s.duration||0,date:new Date(s.date),tags:s.tags||[],billable:s.billable||!0,hourlyRate:s.hourly_rate||0,currency:s.currency||"USD",isRunning:!1,createdAt:new Date(s.created_at),updatedAt:new Date(s.updated_at)}))},async createTimeEntry(u){const{data:l,error:s}=await Me.from("time_entries").insert([{project_id:u.projectId,resource_name:u.resourceName,description:u.description,start_time:u.startTime?.toISOString(),duration:u.duration,date:u.date?.toISOString().split("T")[0]||new Date().toISOString().split("T")[0],tags:u.tags,billable:u.billable,hourly_rate:u.hourlyRate,currency:u.currency}]).select().single();if(s)throw s;return{id:l.id,projectId:l.project_id||"",resourceName:l.resource_name,description:l.description||"",startTime:new Date(l.start_time||new Date),duration:l.duration||0,date:new Date(l.date),tags:l.tags||[],billable:l.billable||!0,hourlyRate:l.hourly_rate||0,currency:l.currency||"USD",isRunning:!1,createdAt:new Date(l.created_at),updatedAt:new Date(l.updated_at)}},async updateTimeEntry(u,l){const{data:s,error:i}=await Me.from("time_entries").update({project_id:l.projectId,resource_name:l.resourceName,description:l.description,start_time:l.startTime?.toISOString(),duration:l.duration,date:l.date?.toISOString().split("T")[0],tags:l.tags,billable:l.billable,hourly_rate:l.hourlyRate,currency:l.currency}).eq("id",u).select().single();if(i)throw i;return{id:s.id,projectId:s.project_id||"",resourceName:s.resource_name,description:s.description||"",startTime:new Date(s.start_time||new Date),duration:s.duration||0,date:new Date(s.date),tags:s.tags||[],billable:s.billable||!0,hourlyRate:s.hourly_rate||0,currency:s.currency||"USD",isRunning:!1,createdAt:new Date(s.created_at),updatedAt:new Date(s.updated_at)}},async deleteTimeEntry(u){const{error:l}=await Me.from("time_entries").delete().eq("id",u);if(l)throw l},async getUsers(){const{data:u,error:l}=await Me.from("users").select("*").order("created_at",{ascending:!1});if(l)throw l;return(u||[]).map(s=>({id:s.id,username:s.username,email:s.email||"",firstName:s.first_name||"",lastName:s.last_name||"",isActive:s.is_active||!0,lastLogin:s.last_login?new Date(s.last_login):void 0,createdAt:new Date(s.created_at),updatedAt:new Date(s.updated_at)}))},async createUser(u){const s=await _o.hash(u.password,10),{data:i,error:c}=await Me.from("users").insert([{username:u.username,email:u.email||null,password_hash:s,first_name:u.firstName||null,last_name:u.lastName||null,is_active:!0}]).select().single();if(c)throw c;return{id:i.id,username:i.username,email:i.email||"",firstName:i.first_name||"",lastName:i.last_name||"",isActive:i.is_active||!0,lastLogin:i.last_login?new Date(i.last_login):void 0,createdAt:new Date(i.created_at),updatedAt:new Date(i.updated_at)}},async loginUser(u,l){const{data:s,error:i}=await Me.from("users").select("*").eq("username",u).single();if(i||!s)throw new Error("User not found");if(!await _o.compare(l,s.password_hash))throw new Error("Invalid password");const{error:d}=await Me.from("users").update({last_login:new Date().toISOString()}).eq("id",s.id);return d&&console.warn("Failed to update last login:",d),{id:s.id,username:s.username,email:s.email||"",firstName:s.first_name||"",lastName:s.last_name||"",isActive:s.is_active||!0,lastLogin:new Date,createdAt:new Date(s.created_at),updatedAt:new Date(s.updated_at)}},async updateUser(u,l){const s={};l.username&&(s.username=l.username),l.email!==void 0&&(s.email=l.email||null),l.firstName!==void 0&&(s.first_name=l.firstName||null),l.lastName!==void 0&&(s.last_name=l.lastName||null),l.password&&(s.password_hash=await _o.hash(l.password,10));const{data:i,error:c}=await Me.from("users").update(s).eq("id",u).select().single();if(c)throw c;return{id:i.id,username:i.username,email:i.email||"",firstName:i.first_name||"",lastName:i.last_name||"",isActive:i.is_active||!0,lastLogin:i.last_login?new Date(i.last_login):void 0,createdAt:new Date(i.created_at),updatedAt:new Date(i.updated_at)}},async deleteUser(u){const{error:l}=await Me.from("users").delete().eq("id",u);if(l)throw l},async getUserByUsername(u){const{data:l,error:s}=await Me.from("users").select("*").eq("username",u).single();if(s&&s.code!=="PGRST116")throw s;return l?{id:l.id,username:l.username,email:l.email||"",firstName:l.first_name||"",lastName:l.last_name||"",isActive:l.is_active||!0,lastLogin:l.last_login?new Date(l.last_login):void 0,createdAt:new Date(l.created_at),updatedAt:new Date(l.updated_at)}:null}},Ke=zx((u,l)=>({companies:[],contacts:[],deals:[],projects:[],timeEntries:[],timer:{isRunning:!1,currentEntry:void 0,elapsedTime:0},isLoading:!1,selectedCompany:null,selectedContact:null,selectedDeal:null,selectedProject:null,loadAllData:async()=>{u({isLoading:!0});try{console.log(" Loading data from Supabase...");const[s,i,c,d,h]=await Promise.all([Se.getCompanies(),Se.getContacts(),Se.getDeals(),Se.getProjects(),Se.getTimeEntries()]);u({companies:s,contacts:i,deals:c,projects:d,timeEntries:h}),console.log(" Data loaded from cloud database")}catch(s){console.error(" Failed to load data from Supabase:",s)}finally{u({isLoading:!1})}},refreshCompanies:async()=>{try{const s=await Se.getCompanies();u({companies:s})}catch(s){console.error("Failed to refresh companies:",s)}},refreshContacts:async()=>{try{const s=await Se.getContacts();u({contacts:s})}catch(s){console.error("Failed to refresh contacts:",s)}},refreshDeals:async()=>{try{const s=await Se.getDeals();u({deals:s})}catch(s){console.error("Failed to refresh deals:",s)}},refreshProjects:async()=>{try{const s=await Se.getProjects();u({projects:s})}catch(s){console.error("Failed to refresh projects:",s)}},refreshTimeEntries:async()=>{try{const s=await Se.getTimeEntries();u({timeEntries:s})}catch(s){console.error("Failed to refresh time entries:",s)}},addCompany:async s=>{u({isLoading:!0});try{const i=await Se.createCompany({name:s.name,industry:s.industry||"",size:s.size||"",website:s.website||"",phone:s.phone||"",email:s.email||"",address:{address:s.address||"",city:s.city||"",state:s.state||"",zipCode:s.zipCode||"",country:s.country||""},notes:s.notes||"",tags:s.tags||[]});return await l().refreshCompanies(),i}catch(i){throw console.error("Failed to add company:",i),i}finally{u({isLoading:!1})}},updateCompany:async(s,i)=>{try{const c=await Se.updateCompany(s,{name:i.name,industry:i.industry,size:i.size,website:i.website,phone:i.phone,email:i.email,address:i.address?{address:i.address,city:i.city||"",state:i.state||"",zipCode:i.zipCode||"",country:i.country||""}:void 0,notes:i.notes,tags:i.tags});return await l().refreshCompanies(),c}catch(c){throw console.error("Failed to update company:",c),c}},deleteCompany:async s=>{try{await Se.deleteCompany(s),await Promise.all([l().refreshCompanies(),l().refreshContacts(),l().refreshDeals(),l().refreshProjects()]);const{selectedCompany:i}=l();return i?.id===s&&u({selectedCompany:null}),!0}catch(i){throw console.error("Failed to delete company:",i),i}},setSelectedCompany:s=>{u({selectedCompany:s})},getCompanyById:s=>l().companies.find(i=>i.id===s),getFilteredCompanies:s=>{const{companies:i}=l();let c=i;if(s.search){const d=s.search.toLowerCase();c=c.filter(h=>h.name.toLowerCase().includes(d)||h.industry.toLowerCase().includes(d)||h.email.toLowerCase().includes(d))}return s.industry&&(c=c.filter(d=>d.industry===s.industry)),s.size&&(c=c.filter(d=>d.size===s.size)),s.tags&&s.tags.length>0&&(c=c.filter(d=>s.tags.some(h=>d.tags.includes(h)))),c},addContact:async s=>{u({isLoading:!0});try{const i=await Se.createContact({companyId:s.companyId,firstName:s.firstName,lastName:s.lastName,email:s.email||"",phone:s.phone||"",position:s.jobTitle||"",department:s.department||"",isPrimary:s.isPrimary||!1,notes:s.notes||"",tags:s.tags||[]});return await l().refreshContacts(),i}catch(i){throw console.error("Failed to add contact:",i),i}finally{u({isLoading:!1})}},updateContact:async(s,i)=>{try{const c=l().contacts.find(h=>h.id===s);if(!c)throw new Error("Contact not found");const d=await Se.updateContact(s,{companyId:i.companyId??c.companyId,firstName:i.firstName??c.firstName,lastName:i.lastName??c.lastName,email:i.email??c.email,phone:i.phone??c.phone,position:i.jobTitle??c.position,department:i.department??c.department,isPrimary:i.isPrimary??c.isPrimary,notes:i.notes??c.notes,tags:i.tags??c.tags});return await l().refreshContacts(),d}catch(c){throw console.error("Failed to update contact:",c),c}},deleteContact:async s=>{try{await Se.deleteContact(s),await l().refreshContacts();const{selectedContact:i}=l();return i?.id===s&&u({selectedContact:null}),!0}catch(i){throw console.error("Failed to delete contact:",i),i}},setSelectedContact:s=>{u({selectedContact:s})},getContactById:s=>l().contacts.find(i=>i.id===s),getContactsByCompany:s=>{const{contacts:i}=l();return i.filter(c=>c.companyId===s)},getFilteredContacts:s=>{const{contacts:i}=l();let c=i;if(s.search){const d=s.search.toLowerCase();c=c.filter(h=>h.firstName.toLowerCase().includes(d)||h.lastName.toLowerCase().includes(d)||h.email.toLowerCase().includes(d)||h.position.toLowerCase().includes(d))}return s.companyId&&(c=c.filter(d=>d.companyId===s.companyId)),s.department&&(c=c.filter(d=>d.department===s.department)),s.isPrimary!==void 0&&(c=c.filter(d=>d.isPrimary===s.isPrimary)),s.tags&&s.tags.length>0&&(c=c.filter(d=>s.tags.some(h=>d.tags.includes(h)))),c},addDeal:async s=>{u({isLoading:!0});try{const i=await Se.createDeal({companyId:s.companyId,contactId:s.contactId||"",title:s.title,value:s.value||0,currency:s.currency||"USD",stage:s.stage,probability:s.probability||0,expectedCloseDate:s.expectedCloseDate,actualCloseDate:s.actualCloseDate,description:s.description||"",notes:s.notes||"",tags:s.tags||[]});return await l().refreshDeals(),i}catch(i){throw console.error("Failed to add deal:",i),i}finally{u({isLoading:!1})}},updateDeal:async(s,i)=>{try{const c=l().deals.find(h=>h.id===s);if(!c)throw new Error("Deal not found");const d=await Se.updateDeal(s,{companyId:i.companyId??c.companyId,contactId:i.contactId??c.contactId,title:i.title??c.title,value:i.value??c.value,currency:i.currency??c.currency,stage:i.stage??c.stage,probability:i.probability??c.probability,expectedCloseDate:i.expectedCloseDate??c.expectedCloseDate,actualCloseDate:i.actualCloseDate??c.actualCloseDate,description:i.description??c.description,notes:i.notes??c.notes,tags:i.tags??c.tags});return await l().refreshDeals(),d}catch(c){throw console.error("Failed to update deal:",c),c}},deleteDeal:async s=>{try{await Se.deleteDeal(s),await l().refreshDeals();const{selectedDeal:i}=l();return i?.id===s&&u({selectedDeal:null}),!0}catch(i){throw console.error("Failed to delete deal:",i),i}},setSelectedDeal:s=>{u({selectedDeal:s})},getDealById:s=>l().deals.find(i=>i.id===s),getDealsByCompany:s=>{const{deals:i}=l();return i.filter(c=>c.companyId===s)},getFilteredDeals:s=>{const{deals:i}=l();let c=i;if(s.search){const d=s.search.toLowerCase();c=c.filter(h=>h.title.toLowerCase().includes(d)||h.description.toLowerCase().includes(d))}return s.companyId&&(c=c.filter(d=>d.companyId===s.companyId)),s.stage&&(c=c.filter(d=>d.stage===s.stage)),s.minValue!==void 0&&(c=c.filter(d=>d.value>=s.minValue)),s.maxValue!==void 0&&(c=c.filter(d=>d.value<=s.maxValue)),s.tags&&s.tags.length>0&&(c=c.filter(d=>s.tags.some(h=>d.tags.includes(h)))),c},addProject:async s=>{u({isLoading:!0});try{const i=l().calculateProjectBudget(s.budget),c=await Se.createProject({companyId:s.companyId,dealId:s.dealId||"",title:s.title,description:s.description||"",status:s.status,startDate:s.startDate,endDate:s.endDate,budget:i,tags:s.tags||[],priority:"medium",type:"development",notes:"",progressPercentage:0,milestones:[]});return await l().refreshProjects(),c}catch(i){throw console.error("Failed to add project:",i),i}finally{u({isLoading:!1})}},updateProject:async(s,i)=>{try{const c=l().projects.find(m=>m.id===s);if(!c)throw new Error("Project not found");const d=i.budget?l().calculateProjectBudget(i.budget):c.budget,h=await Se.updateProject(s,{companyId:i.companyId??c.companyId,dealId:i.dealId??c.dealId,title:i.title??c.title,description:i.description??c.description,status:i.status??c.status,startDate:i.startDate??c.startDate,endDate:i.endDate??c.endDate,budget:d,tags:i.tags??c.tags,priority:c.priority,type:c.type,notes:c.notes,progressPercentage:c.progressPercentage,milestones:c.milestones});return await l().refreshProjects(),h}catch(c){throw console.error("Failed to update project:",c),c}},deleteProject:async s=>{try{await Se.deleteProject(s),await l().refreshProjects();const{selectedProject:i}=l();return i?.id===s&&u({selectedProject:null}),!0}catch(i){throw console.error("Failed to delete project:",i),i}},convertDealToProject:async(s,i)=>{u({isLoading:!0});try{const c=l().getDealById(s);if(!c)throw new Error("Deal not found");const d={dealId:c.id,companyId:c.companyId,title:c.title,description:c.description,status:"planning",startDate:new Date,endDate:new Date(Date.now()+2160*60*60*1e3),budget:{totalRevenue:c.value,resources:[],expenses:[],contingencyPercentage:10,currency:c.currency},tags:c.tags,...i},h=l().calculateProjectBudget(d.budget),m=await Se.createProject({companyId:d.companyId,dealId:d.dealId,title:d.title,description:d.description||"",status:d.status,startDate:d.startDate,endDate:d.endDate,budget:h,tags:d.tags,priority:"medium",type:"development",notes:"",progressPercentage:0,milestones:[]});return await l().updateDeal(s,{stage:"closed-won"}),await l().refreshProjects(),m}catch(c){throw console.error("Failed to convert deal to project:",c),c}finally{u({isLoading:!1})}},setSelectedProject:s=>{u({selectedProject:s})},getProjectById:s=>l().projects.find(i=>i.id===s),getProjectsByCompany:s=>{const{projects:i}=l();return i.filter(c=>c.companyId===s)},getFilteredProjects:s=>{const{projects:i}=l();let c=i;if(s.search){const d=s.search.toLowerCase();c=c.filter(h=>h.title.toLowerCase().includes(d)||h.description.toLowerCase().includes(d))}return s.companyId&&(c=c.filter(d=>d.companyId===s.companyId)),s.status&&(c=c.filter(d=>d.status===s.status)),s.tags&&s.tags.length>0&&(c=c.filter(d=>s.tags.some(h=>d.tags.includes(h)))),c},calculateProjectBudget:s=>{const i=s.resources.reduce((g,p)=>p.rateType==="daily"&&p.dailyRate&&p.daysAllocated?g+p.dailyRate*p.daysAllocated:g+p.hourlyRate*p.hoursAllocated,0),c=s.expenses.reduce((g,p)=>g+p.plannedCost,0),d=(i+c)*(s.contingencyPercentage/100),h=i+c+d,m=s.totalRevenue-h,x=s.totalRevenue>0?m/s.totalRevenue*100:0;return{...s,totalResourceCost:i,totalExpenseCost:c,contingencyCost:d,totalCost:h,grossMargin:m,marginPercentage:x}},addResourceToProject:async(s,i)=>{try{const c=l().projects.find(x=>x.id===s);if(!c)throw new Error("Project not found");const d={id:crypto.randomUUID(),...i},h={...c.budget,resources:[...c.budget.resources,d]},m=l().calculateProjectBudget(h);await Se.updateProject(s,{budget:m}),await l().refreshProjects()}catch(c){throw console.error("Failed to add resource to project:",c),c}},updateProjectResource:async(s,i,c)=>{try{const d=l().projects.find(x=>x.id===s);if(!d)throw new Error("Project not found");const h={...d.budget,resources:d.budget.resources.map(x=>x.id===i?{...x,...c}:x)},m=l().calculateProjectBudget(h);await Se.updateProject(s,{budget:m}),await l().refreshProjects()}catch(d){throw console.error("Failed to update project resource:",d),d}},removeResourceFromProject:async(s,i)=>{try{const c=l().projects.find(m=>m.id===s);if(!c)throw new Error("Project not found");const d={...c.budget,resources:c.budget.resources.filter(m=>m.id!==i)},h=l().calculateProjectBudget(d);await Se.updateProject(s,{budget:h}),await l().refreshProjects()}catch(c){throw console.error("Failed to remove resource from project:",c),c}},addExpenseToProject:async(s,i)=>{try{const c=l().projects.find(x=>x.id===s);if(!c)throw new Error("Project not found");const d={id:crypto.randomUUID(),...i},h={...c.budget,expenses:[...c.budget.expenses,d]},m=l().calculateProjectBudget(h);await Se.updateProject(s,{budget:m}),await l().refreshProjects()}catch(c){throw console.error("Failed to add expense to project:",c),c}},updateProjectExpense:async(s,i,c)=>{try{const d=l().projects.find(x=>x.id===s);if(!d)throw new Error("Project not found");const h={...d.budget,expenses:d.budget.expenses.map(x=>x.id===i?{...x,...c}:x)},m=l().calculateProjectBudget(h);await Se.updateProject(s,{budget:m}),await l().refreshProjects()}catch(d){throw console.error("Failed to update project expense:",d),d}},removeExpenseFromProject:async(s,i)=>{try{const c=l().projects.find(m=>m.id===s);if(!c)throw new Error("Project not found");const d={...c.budget,expenses:c.budget.expenses.filter(m=>m.id!==i)},h=l().calculateProjectBudget(d);await Se.updateProject(s,{budget:h}),await l().refreshProjects()}catch(c){throw console.error("Failed to remove expense from project:",c),c}},addTimeEntry:async s=>{try{const i=await Se.createTimeEntry({projectId:s.projectId,resourceName:s.resourceName,description:s.description||"",startTime:s.startTime||new Date,duration:s.duration||0,date:s.date||new Date,tags:s.tags||[],billable:s.billable??!0,hourlyRate:s.hourlyRate||0,currency:s.currency||"USD",isRunning:!1});return await l().refreshTimeEntries(),i}catch(i){throw console.error("Failed to add time entry:",i),i}},updateTimeEntry:async(s,i)=>{try{const c=l().timeEntries.find(h=>h.id===s);if(!c)throw new Error("Time entry not found");const d=await Se.updateTimeEntry(s,{projectId:i.projectId??c.projectId,resourceName:i.resourceName??c.resourceName,description:i.description??c.description,startTime:i.startTime??c.startTime,duration:i.duration??c.duration,date:i.date??c.date,tags:i.tags??c.tags,billable:i.billable??c.billable,hourlyRate:i.hourlyRate??c.hourlyRate,currency:i.currency??c.currency});return await l().refreshTimeEntries(),d}catch(c){throw console.error("Failed to update time entry:",c),c}},deleteTimeEntry:async s=>{try{return await Se.deleteTimeEntry(s),await l().refreshTimeEntries(),!0}catch(i){throw console.error("Failed to delete time entry:",i),i}},getTimeEntryById:s=>{const{timeEntries:i}=l();return i.find(c=>c.id===s)},getTimeEntriesByProject:s=>{const{timeEntries:i}=l();return i.filter(c=>c.projectId===s)},getTimeEntriesForDateRange:(s,i)=>{const{timeEntries:c}=l();return c.filter(d=>d.date>=s&&d.date<=i)},getFilteredTimeEntries:s=>{const{timeEntries:i,projects:c}=l();let d=i;if(s.search){const h=s.search.toLowerCase();d=d.filter(m=>m.description.toLowerCase().includes(h)||m.tags.some(x=>x.toLowerCase().includes(h)))}if(s.projectId&&(d=d.filter(h=>h.projectId===s.projectId)),s.companyId){const h=c.filter(m=>m.companyId===s.companyId).map(m=>m.id);d=d.filter(m=>h.includes(m.projectId))}return s.dateFrom&&(d=d.filter(h=>h.date>=s.dateFrom)),s.dateTo&&(d=d.filter(h=>h.date<=s.dateTo)),s.billable!==void 0&&(d=d.filter(h=>h.billable===s.billable)),s.tags&&s.tags.length>0&&(d=d.filter(h=>s.tags.some(m=>h.tags.includes(m)))),s.minDuration!==void 0&&(d=d.filter(h=>h.duration>=s.minDuration)),s.maxDuration!==void 0&&(d=d.filter(h=>h.duration<=s.maxDuration)),d},startTimer:(s,i,c=!0,d)=>{const{timer:h}=l();h.isRunning&&l().stopTimer();const m=new Date;u({timer:{isRunning:!0,currentEntry:{projectId:s,description:i,startTime:m,tags:[],billable:c,hourlyRate:d},elapsedTime:0}});const x=setInterval(()=>{const{timer:g}=l();if(!g.isRunning){clearInterval(x);return}const p=Math.floor((Date.now()-m.getTime())/1e3);u({timer:{...g,elapsedTime:p}})},1e3)},stopTimer:async()=>{const{timer:s}=l();if(!s.isRunning||!s.currentEntry)return null;const i=new Date,c=Math.round((i.getTime()-s.currentEntry.startTime.getTime())/(1e3*60));try{const d=await l().addTimeEntry({projectId:s.currentEntry.projectId,description:s.currentEntry.description,startTime:s.currentEntry.startTime,endTime:i,duration:c,date:s.currentEntry.startTime,tags:s.currentEntry.tags,billable:s.currentEntry.billable,hourlyRate:s.currentEntry.hourlyRate,currency:"USD"});return u({timer:{isRunning:!1,currentEntry:void 0,elapsedTime:0}}),d}catch(d){return console.error("Failed to save time entry:",d),null}},pauseTimer:()=>{const{timer:s}=l();s.isRunning&&u({timer:{...s,isRunning:!1}})},resumeTimer:()=>{const{timer:s}=l();!s.isRunning&&s.currentEntry&&u({timer:{...s,isRunning:!0}})},updateTimerDescription:s=>{const{timer:i}=l();i.currentEntry&&u({timer:{...i,currentEntry:{...i.currentEntry,description:s}}})},getTimerElapsed:()=>{const{timer:s}=l();return s.elapsedTime},getWeeklyTimeReport:s=>{const{projects:i,companies:c,timeEntries:d}=l(),h=new Date(s);h.setDate(h.getDate()+6);const m=d.filter(j=>j.date>=s&&j.date<=h),x=m.reduce((j,S)=>j+S.duration,0),g=m.filter(j=>j.billable).reduce((j,S)=>j+S.duration,0),p=m.filter(j=>j.billable).reduce((j,S)=>j+S.duration/60*(S.hourlyRate||0),0),b=i.map(j=>{const S=m.filter(N=>N.projectId===j.id),_=c.find(N=>N.id===j.companyId);if(S.length===0)return null;const R=S.reduce((N,X)=>N+X.duration,0),D=S.filter(N=>N.billable).reduce((N,X)=>N+X.duration/60*(X.hourlyRate||0),0);return{projectId:j.id,projectTitle:j.title,companyName:_?.name||"Unknown Company",totalMinutes:R,totalHours:R/60,totalRevenue:D,entryCount:S.length}}).filter(Boolean);return{weekStart:s,weekEnd:h,totalHours:x/60,billableHours:g/60,totalRevenue:p,entries:m,projectBreakdown:b.map(j=>({projectId:j.projectId,projectTitle:j.projectTitle,companyName:j.companyName,hours:j.totalHours,billableHours:j.totalHours,revenue:j.totalRevenue}))}},getProjectTimeStats:s=>{const{projects:i,timeEntries:c}=l(),d=i.find(S=>S.id===s),h=c.filter(S=>S.projectId===s),x=h.reduce((S,_)=>S+_.duration,0)/60,g=h.filter(S=>S.billable).reduce((S,_)=>S+_.duration,0)/60,p=h.filter(S=>S.billable).reduce((S,_)=>S+_.duration/60*(_.hourlyRate||0),0),b=g>0?p/g:0;let j=0;return d&&(j=d.budget.resources.reduce((S,_)=>S+_.hoursAllocated,0)),{projectId:s,totalTrackedHours:x,totalBillableHours:g,totalRevenue:p,budgetedHours:j,remainingHours:Math.max(0,j-x),hoursUtilization:j>0?x/j*100:0,averageHourlyRate:b,lastActivity:h.length>0?new Date(Math.max(...h.map(S=>S.date.getTime()))):new Date}},getDailyTimeEntries:s=>{const{timeEntries:i}=l(),c=s.toISOString().split("T")[0];return i.filter(d=>d.date.toISOString().split("T")[0]===c)},getTimeEntriesForWeek:s=>{const i=new Date(s);return i.setDate(i.getDate()+6),l().getTimeEntriesForDateRange(s,i)},formatDuration:s=>{const i=Math.floor(s/60),c=s%60;return i===0?`${c}m`:c===0?`${i}h`:`${i}h ${c}m`},calculateProjectMargins:s=>{const{projects:i}=l(),c=i.find(p=>p.id===s),d=l().getProjectTimeStats(s);if(!c)return{budgetedMargin:0,actualMargin:0,variance:0};const h=c.budget.grossMargin,m=d.totalTrackedHours*(d.averageHourlyRate||0),x=c.budget.totalRevenue-m,g=x-h;return{budgetedMargin:h,actualMargin:x,variance:g}},setLoading:s=>{u({isLoading:s})},initializeSampleData:async()=>{u({isLoading:!0});try{console.log("Loading data from Supabase..."),await l().loadAllData(),console.log(" Data loaded from cloud database")}catch(s){console.error("Failed to initialize sample data:",s)}finally{u({isLoading:!1})}},clearAndReinitializeData:async()=>{u({isLoading:!0});try{u({companies:[],contacts:[],deals:[],projects:[],timeEntries:[],selectedCompany:null,selectedContact:null,selectedDeal:null,selectedProject:null}),await l().loadAllData(),console.log(" Data reinitialized successfully")}catch(s){throw console.error("Failed to reinitialize data:",s),s}finally{u({isLoading:!1})}},recoverDataFromBackup:async()=>{u({isLoading:!0});try{return await l().loadAllData(),console.log(" Data recovered from cloud database"),!0}catch(s){return console.error("Failed to recover data:",s),!1}finally{u({isLoading:!1})}},exportAllData:()=>{const s=l();return{companies:s.companies,contacts:s.contacts,deals:s.deals,projects:s.projects,timeEntries:s.timeEntries}},importAllData:async s=>{u({isLoading:!0});try{console.log(" Import to cloud database not yet implemented"),console.log("Data to import:",s),await l().loadAllData(),console.log(" Data reloaded from cloud")}catch(i){throw console.error("Failed to import data:",i),i}finally{u({isLoading:!1})}}})),tv=({isCollapsed:u=!1,onToggleCollapse:l,currentPage:s,onPageChange:i})=>{const c=[{icon:"",label:"Dashboard",page:"dashboard"},{icon:"",label:"Companies",page:"companies"},{icon:"",label:"Contacts",page:"contacts"},{icon:"",label:"Deals",page:"deals"},{icon:"",label:"Projects",page:"projects"},{icon:"",label:"Time Tracking",page:"time-tracking"},{icon:"",label:"Invoices",page:"invoices"},{icon:"",label:"Settings",page:"settings"}];return r.jsxs("aside",{className:`
        fixed left-0 top-0 h-full bg-white border-r border-gray-200 transition-all duration-300 z-40
        ${u?"w-18":"w-64"}
      `,children:[r.jsxs("div",{className:"h-16 flex items-center justify-between px-6 border-b border-gray-200",children:[!u&&r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-md flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-sm",children:"I"})}),r.jsx("span",{className:"font-semibold text-gray-800 text-lg",children:"Ikigai"})]}),r.jsx("button",{onClick:l,className:"p-2 rounded-md hover:bg-gray-100 transition-colors",children:r.jsx("span",{className:"text-gray-500",children:u?"":""})})]}),r.jsx("nav",{className:"mt-6",children:r.jsx("ul",{className:"space-y-1 px-4",children:c.map(d=>r.jsx("li",{children:r.jsxs("button",{onClick:()=>i(d.page),className:`
                  w-full flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium transition-colors
                  ${s===d.page?"bg-primary-600 text-white":"text-gray-600 hover:bg-primary-50 hover:text-primary-600"}
                  ${u?"justify-center":""}
                `,children:[r.jsx("span",{className:"text-lg",children:d.icon}),!u&&r.jsx("span",{children:d.label})]})},d.page))})}),!u&&r.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 border-t border-gray-200",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-primary-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white font-medium",children:"JD"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-800 truncate",children:"John Doe"}),r.jsx("p",{className:"text-xs text-gray-500 truncate",children:"john@company.com"})]})]})})]})},av=({sidebarCollapsed:u=!1,onAddCompany:l,onExportData:s})=>r.jsx("header",{className:`
        fixed top-0 right-0 h-16 bg-white border-b border-gray-200 z-30 transition-all duration-300
        ${u?"left-18":"left-64"}
      `,children:r.jsxs("div",{className:"h-full flex items-center justify-between px-6",children:[r.jsx("div",{className:"flex-1 max-w-lg",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx("span",{className:"text-gray-400",children:""})}),r.jsx("input",{type:"text",placeholder:"Search your Ikigai CRM...",className:`
                block w-full pl-10 pr-3 py-2 border border-gray-200 rounded-md
                leading-5 bg-gray-50 placeholder-gray-400 text-gray-900
                focus:outline-none focus:bg-white focus:border-primary-500 focus:ring-2 focus:ring-primary-500 focus:ring-opacity-20
                transition-colors
              `})]})}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{onClick:s,className:"relative p-2 text-gray-400 hover:text-gray-600 transition-colors",title:"Export Data Backup",children:r.jsx("span",{className:"text-xl",children:""})}),r.jsxs("button",{className:"relative p-2 text-gray-400 hover:text-gray-600 transition-colors",children:[r.jsx("span",{className:"text-xl",children:""}),r.jsx("span",{className:"absolute top-1 right-1 block h-2 w-2 rounded-full bg-red-500"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:l,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 transition-colors",children:"+ Company"}),r.jsx("button",{className:"px-4 py-2 text-sm font-medium text-primary-600 bg-primary-50 rounded-md hover:bg-primary-100 transition-colors",children:"+ Contact"}),r.jsx("button",{className:"px-4 py-2 text-sm font-medium text-primary-600 bg-primary-50 rounded-md hover:bg-primary-100 transition-colors",children:"+ Deal"})]}),r.jsx("div",{className:"relative",children:r.jsxs("button",{className:"flex items-center space-x-2 p-2 rounded-md hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"w-8 h-8 bg-primary-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white font-medium text-sm",children:"JD"})}),r.jsx("span",{className:"text-gray-400",children:""})]})})]})]})}),sv=({children:u,currentPage:l,onPageChange:s,onAddCompany:i,onExportData:c})=>{const[d,h]=Z.useState(!1),m=()=>{h(!d)};return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(tv,{isCollapsed:d,onToggleCollapse:m,currentPage:l,onPageChange:s}),r.jsx(av,{sidebarCollapsed:d,onAddCompany:i,onExportData:c}),r.jsx("main",{className:`
          pt-16 transition-all duration-300
          ${d?"ml-18":"ml-64"}
        `,children:r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:u})})})]})},de=({children:u,className:l="",padding:s="lg",hover:i=!1,onClick:c})=>{const d={sm:"p-4",md:"p-6",lg:"p-8"};return r.jsx("div",{className:`
        bg-white rounded-lg border border-gray-200 shadow-sm
        ${i?"hover:shadow-md transition-shadow duration-200":""}
        ${c?"cursor-pointer":""}
        ${d[s]}
        ${l}
      `,onClick:c,children:u})},ee=({children:u,variant:l="primary",size:s="md",onClick:i,disabled:c=!1,type:d="button",className:h=""})=>{const m="inline-flex items-center justify-center font-semibold rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-opacity-50",x={primary:"bg-primary-600 text-white hover:bg-primary-700 disabled:bg-gray-300",secondary:"bg-transparent border-2 border-primary-600 text-primary-600 hover:bg-primary-600 hover:text-white disabled:border-gray-300 disabled:text-gray-300",outline:"bg-transparent border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:border-gray-200 disabled:text-gray-400",ghost:"bg-transparent text-gray-600 hover:bg-gray-100 hover:text-gray-700 disabled:text-gray-300",success:"bg-green-600 text-white hover:bg-green-700 disabled:bg-gray-300",destructive:"bg-red-600 text-white hover:bg-red-700 disabled:bg-gray-300"},g={sm:"px-3 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"};return r.jsx("button",{type:d,onClick:i,disabled:c,className:`
        ${m}
        ${x[l]}
        ${g[s]}
        ${c?"cursor-not-allowed opacity-50":"cursor-pointer"}
        ${h}
      `,children:u})},nv=()=>{const{companies:u,contacts:l,deals:s,projects:i}=Ke();return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Dashboard"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Welcome back! Here's what's happening with your business."})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx(ee,{variant:"secondary",size:"sm",children:"Export"}),r.jsx(ee,{variant:"primary",size:"sm",children:"+ New Deal"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(de,{hover:!0,className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:s.length}),r.jsx("div",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Total Deals"}),r.jsxs("div",{className:"text-sm text-gray-600",children:[s.filter(c=>c.status==="active").length," active  ",s.filter(c=>c.status==="on-hold").length," on hold"]}),r.jsxs("div",{className:"text-xs text-blue-600 mt-2",children:["$",Math.round(s.reduce((c,d)=>c+d.value,0)).toLocaleString()," total value"]})]})}),r.jsx(de,{hover:!0,className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-4xl font-bold text-green-600 mb-2",children:s.filter(c=>c.stage==="closed-won").length}),r.jsx("div",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Won Deals"}),r.jsxs("div",{className:"text-sm text-gray-600",children:["$",Math.round(s.filter(c=>c.stage==="closed-won").reduce((c,d)=>c+d.value,0)).toLocaleString()," won"]}),r.jsxs("div",{className:"text-xs text-green-600 mt-2",children:[s.length>0?Math.round(s.filter(c=>c.stage==="closed-won").length/s.length*100):0,"% win rate"]})]})}),r.jsx(de,{hover:!0,className:"bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-4xl font-bold text-orange-600 mb-2",children:["$",Math.round(s.filter(c=>!["closed-won","closed-lost"].includes(c.stage)).reduce((c,d)=>c+d.value*d.probability/100,0)).toLocaleString()]}),r.jsx("div",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Pipeline Value"}),r.jsxs("div",{className:"text-sm text-gray-600",children:[s.filter(c=>!["closed-won","closed-lost"].includes(c.stage)).length," active deals"]}),r.jsx("div",{className:"text-xs text-orange-600 mt-2",children:"Expected revenue"})]})}),r.jsx(de,{hover:!0,className:"bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-4xl font-bold text-purple-600 mb-2",children:i.filter(c=>c.status==="active").length}),r.jsx("div",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Active Projects"}),r.jsxs("div",{className:"text-sm text-gray-600",children:["$",Math.round(i.filter(c=>c.status==="active").reduce((c,d)=>c+d.budget.totalRevenue,0)).toLocaleString()," revenue"]}),r.jsxs("div",{className:"text-xs text-purple-600 mt-2",children:[i.filter(c=>c.status==="active").length>0?Math.round(i.filter(c=>c.status==="active").reduce((c,d)=>c+d.progressPercentage,0)/i.filter(c=>c.status==="active").length):0,"% avg progress"]})]})})]}),r.jsxs(de,{children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-6",children:"Recent Activity"}),r.jsxs("div",{className:"space-y-4",children:[s.slice(0,3).map(c=>{const d=u.find(p=>p.id===c.companyId),h=new Date().getTime()-c.updatedAt.getTime(),m=Math.floor(h/(1e3*60*60)),x=Math.floor(m/24),g=x>0?`${x} day${x>1?"s":""} ago`:m>0?`${m} hour${m>1?"s":""} ago`:"Just now";return r.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-md bg-gray-50",children:[r.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${c.stage==="closed-won"?"bg-green-500":c.stage==="closed-lost"?"bg-red-500":c.priority==="high"||c.priority==="critical"?"bg-yellow-500":"bg-blue-500"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-gray-700",children:c.stage==="closed-won"?`Deal won: "${c.title}"`:c.stage==="closed-lost"?`Deal lost: "${c.title}"`:c.createdAt.getTime()>Date.now()-1440*60*1e3?`New deal created: "${c.title}"`:`Deal updated: "${c.title}"`}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[d?.name||"Unknown Company","  ",g]})]})]},`deal-${c.id}`)}),l.slice(0,2).map(c=>{const d=u.find(p=>p.id===c.companyId),h=new Date().getTime()-c.updatedAt.getTime(),m=Math.floor(h/(1e3*60*60)),x=Math.floor(m/24),g=x>0?`${x} day${x>1?"s":""} ago`:m>0?`${m} hour${m>1?"s":""} ago`:"Just now";return r.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-md bg-gray-50",children:[r.jsx("div",{className:"w-2 h-2 rounded-full mt-2 bg-blue-500"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-gray-700",children:c.createdAt.getTime()>Date.now()-1440*60*1e3?`New contact added: ${c.firstName} ${c.lastName}`:`Contact updated: ${c.firstName} ${c.lastName}`}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[d?.name||"Unknown Company","  ",g]})]})]},`contact-${c.id}`)}),i.slice(0,2).map(c=>{const d=u.find(p=>p.id===c.companyId),h=new Date().getTime()-c.updatedAt.getTime(),m=Math.floor(h/(1e3*60*60)),x=Math.floor(m/24),g=x>0?`${x} day${x>1?"s":""} ago`:m>0?`${m} hour${m>1?"s":""} ago`:"Just now";return r.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-md bg-gray-50",children:[r.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${c.status==="completed"?"bg-green-500":c.status==="active"?"bg-purple-500":"bg-gray-500"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-gray-700",children:c.status==="completed"?`Project completed: "${c.title}"`:c.createdAt.getTime()>Date.now()-1440*60*1e3?`New project started: "${c.title}"`:`Project updated: "${c.title}"`}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[d?.name||"Unknown Company","  ",g]})]})]},`project-${c.id}`)}),s.length===0&&l.length===0&&i.length===0&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx("p",{children:"No recent activity yet."}),r.jsx("p",{className:"text-sm mt-1",children:"Start by creating companies, deals, or projects to see activity here."})]})]})]})]})},te=({label:u,type:l="text",placeholder:s,value:i,onChange:c,required:d=!1,disabled:h=!1,error:m,className:x="",min:g,max:p,step:b})=>r.jsxs("div",{className:`space-y-1 ${x}`,children:[u&&r.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[u," ",d&&r.jsx("span",{className:"text-error",children:"*"})]}),r.jsx("input",{type:l,placeholder:s,value:i,onChange:j=>c(j.target.value),required:d,disabled:h,min:g,max:p,step:b,className:`
          block w-full px-3 py-2 border rounded-md shadow-sm placeholder-gray-400
          focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500
          disabled:bg-gray-50 disabled:text-gray-500 disabled:cursor-not-allowed
          ${m?"border-error focus:ring-error focus:border-error":"border-gray-300"}
        `}),m&&r.jsx("p",{className:"text-sm text-error",children:m})]}),ye=({label:u,value:l,onChange:s,options:i,children:c,placeholder:d,required:h=!1,disabled:m=!1,error:x,className:g=""})=>r.jsxs("div",{className:`space-y-1 ${g}`,children:[u&&r.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[u," ",h&&r.jsx("span",{className:"text-error",children:"*"})]}),r.jsxs("select",{value:l,onChange:p=>s(p.target.value),required:h,disabled:m,className:`
          block w-full px-3 py-2 border rounded-md shadow-sm bg-white
          focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500
          disabled:bg-gray-50 disabled:text-gray-500 disabled:cursor-not-allowed
          ${x?"border-error focus:ring-error focus:border-error":"border-gray-300"}
        `,children:[d&&r.jsx("option",{value:"",disabled:!0,children:d}),i?i.map(p=>r.jsx("option",{value:p.value,children:p.label},p.value)):c]}),x&&r.jsx("p",{className:"text-sm text-error",children:x})]}),lv=({onAddCompany:u,onEditCompany:l,onViewCompany:s})=>{const{getFilteredCompanies:i,deleteCompany:c,getContactsByCompany:d}=Ke(),[h,m]=Z.useState({search:"",status:void 0,industry:void 0,size:void 0}),x=i(h),g=R=>{window.confirm(`Are you sure you want to delete ${R.name}? This will also delete all associated contacts.`)&&c(R.id)},p=R=>{switch(R){case"active":return"bg-green-100 text-green-700";case"inactive":return"bg-gray-100 text-gray-700";case"prospect":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},b=R=>{switch(R){case"startup":return"bg-purple-100 text-purple-700";case"small":return"bg-blue-100 text-blue-700";case"medium":return"bg-yellow-100 text-yellow-700";case"large":return"bg-orange-100 text-orange-700";case"enterprise":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},j=[{value:"",label:"All Statuses"},{value:"prospect",label:"Prospect"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],S=[{value:"",label:"All Industries"},{value:"technology",label:"Technology"},{value:"healthcare",label:"Healthcare"},{value:"finance",label:"Finance"},{value:"education",label:"Education"},{value:"retail",label:"Retail"},{value:"manufacturing",label:"Manufacturing"},{value:"real-estate",label:"Real Estate"},{value:"consulting",label:"Consulting"},{value:"other",label:"Other"}],_=[{value:"",label:"All Sizes"},{value:"startup",label:"Startup (1-10)"},{value:"small",label:"Small (11-50)"},{value:"medium",label:"Medium (51-200)"},{value:"large",label:"Large (201-1000)"},{value:"enterprise",label:"Enterprise (1000+)"}];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Companies"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Manage your company database"})]}),r.jsx(ee,{onClick:u,children:"+ Add Company"})]}),r.jsx(de,{padding:"md",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(te,{placeholder:"Search companies...",value:h.search||"",onChange:R=>m({...h,search:R})}),r.jsx(ye,{value:h.status||"",onChange:R=>m({...h,status:R||void 0}),options:j}),r.jsx(ye,{value:h.industry||"",onChange:R=>m({...h,industry:R||void 0}),options:S}),r.jsx(ye,{value:h.size||"",onChange:R=>m({...h,size:R||void 0}),options:_})]})}),x.length===0?r.jsxs(de,{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 mb-4",children:r.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No companies found"}),r.jsx("p",{className:"text-gray-400 mb-4",children:h.search||h.status||h.industry||h.size?"Try adjusting your filters or search terms.":"Get started by adding your first company."}),r.jsx(ee,{onClick:u,children:"+ Add Your First Company"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(R=>{const D=d(R.id).length;return r.jsx(de,{hover:!0,className:"relative",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 truncate",children:R.name}),r.jsx("div",{className:"flex space-x-1",children:r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${p(R.status)}`,children:R.status})})]}),R.industry&&r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx("span",{className:"text-sm text-gray-500",children:R.industry}),R.size&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-gray-300",children:""}),r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${b(R.size)}`,children:R.size})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx("span",{className:"w-4 text-gray-400",children:""}),r.jsx("span",{className:"ml-2 truncate",children:R.email})]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx("span",{className:"w-4 text-gray-400",children:""}),r.jsx("span",{className:"ml-2",children:R.phone})]}),R.website&&r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx("span",{className:"w-4 text-gray-400",children:""}),r.jsx("a",{href:R.website,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-primary-600 hover:text-primary-700 truncate",children:R.website})]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[r.jsxs("span",{className:"text-sm text-gray-500",children:[D," contact",D!==1?"s":""]}),r.jsx("span",{className:"text-sm text-gray-400",children:new Date(R.createdAt).toLocaleDateString()})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 pt-2",children:[r.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>s(R),className:"text-xs",children:"View"}),r.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>l(R),className:"text-xs",children:"Edit"}),r.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>g(R),className:"text-xs text-error hover:bg-red-50",children:"Delete"})]})]})},R.id)})})]})},da=({label:u,placeholder:l,value:s,onChange:i,rows:c=4,required:d=!1,disabled:h=!1,error:m,className:x=""})=>r.jsxs("div",{className:`space-y-1 ${x}`,children:[u&&r.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[u," ",d&&r.jsx("span",{className:"text-error",children:"*"})]}),r.jsx("textarea",{placeholder:l,value:s,onChange:g=>i(g.target.value),rows:c,required:d,disabled:h,className:`
          block w-full px-3 py-2 border rounded-md shadow-sm placeholder-gray-400 resize-vertical
          focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500
          disabled:bg-gray-50 disabled:text-gray-500 disabled:cursor-not-allowed
          ${m?"border-error focus:ring-error focus:border-error":"border-gray-300"}
        `}),m&&r.jsx("p",{className:"text-sm text-error",children:m})]}),iv=({company:u,onSubmit:l,onCancel:s,isLoading:i=!1})=>{const[c,d]=Z.useState({name:u?.name||"",email:u?.email||"",phone:u?.phone||"",website:u?.website||"",address:u?.address||"",city:u?.city||"",state:u?.state||"",zipCode:u?.zipCode||"",country:u?.country||"",industry:u?.industry||"",size:u?.size||void 0,notes:u?.notes||"",status:u?.status||"prospect"}),[h,m]=Z.useState({}),x=()=>{const _={};return c.name.trim()||(_.name="Company name is required"),c.email.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.email)&&(_.email="Please enter a valid email address"),m(_),Object.keys(_).length===0},g=_=>{_.preventDefault(),x()&&l(c)},p=(_,R)=>{d(D=>({...D,[_]:R})),h[_]&&m(D=>({...D,[_]:void 0}))},b=[{value:"technology",label:"Technology"},{value:"healthcare",label:"Healthcare"},{value:"finance",label:"Finance"},{value:"education",label:"Education"},{value:"retail",label:"Retail"},{value:"manufacturing",label:"Manufacturing"},{value:"real-estate",label:"Real Estate"},{value:"consulting",label:"Consulting"},{value:"other",label:"Other"}],j=[{value:"startup",label:"Startup (1-10)"},{value:"small",label:"Small (11-50)"},{value:"medium",label:"Medium (51-200)"},{value:"large",label:"Large (201-1000)"},{value:"enterprise",label:"Enterprise (1000+)"}],S=[{value:"prospect",label:"Prospect"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}];return r.jsxs("form",{onSubmit:g,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(te,{label:"Company Name",value:c.name,onChange:_=>p("name",_),placeholder:"Enter company name",required:!0,error:h.name}),r.jsx(ye,{label:"Status",value:c.status,onChange:_=>p("status",_),options:S})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(te,{label:"Email",type:"email",value:c.email,onChange:_=>p("email",_),placeholder:"company@example.com",error:h.email}),r.jsx(te,{label:"Phone",type:"tel",value:c.phone,onChange:_=>p("phone",_),placeholder:"+1 (555) 123-4567",error:h.phone})]}),r.jsx(te,{label:"Website",type:"url",value:c.website||"",onChange:_=>p("website",_),placeholder:"https://company.com"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h4",{className:"text-lg font-medium text-gray-800",children:"Address Information"}),r.jsx(te,{label:"Address",value:c.address||"",onChange:_=>p("address",_),placeholder:"123 Business Street"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(te,{label:"City",value:c.city||"",onChange:_=>p("city",_),placeholder:"New York"}),r.jsx(te,{label:"State/Province",value:c.state||"",onChange:_=>p("state",_),placeholder:"NY"}),r.jsx(te,{label:"ZIP/Postal Code",value:c.zipCode||"",onChange:_=>p("zipCode",_),placeholder:"10001"})]}),r.jsx(te,{label:"Country",value:c.country||"",onChange:_=>p("country",_),placeholder:"United States"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ye,{label:"Industry",value:c.industry||"",onChange:_=>p("industry",_),options:b,placeholder:"Select industry"}),r.jsx(ye,{label:"Company Size",value:c.size||"",onChange:_=>p("size",_),options:j,placeholder:"Select company size"})]}),r.jsx(da,{label:"Notes",value:c.notes,onChange:_=>p("notes",_),placeholder:"Additional notes about this company...",rows:4}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[r.jsx(ee,{variant:"ghost",onClick:s,disabled:i,children:"Cancel"}),r.jsx(ee,{type:"submit",disabled:i,children:i?"Saving...":u?"Update Company":"Create Company"})]})]})},fa=({isOpen:u,onClose:l,title:s,children:i,size:c="md"})=>{if(Z.useEffect(()=>{const h=m=>{m.key==="Escape"&&l()};return u&&(document.addEventListener("keydown",h),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",h),document.body.style.overflow="unset"}},[u,l]),!u)return null;const d={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl","2xl":"max-w-6xl",full:"max-w-7xl"};return r.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:l}),r.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:r.jsxs("div",{className:`
            relative bg-white rounded-lg shadow-xl w-full ${d[c]}
            transform transition-all animate-fade-in
          `,onClick:h=>h.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),r.jsxs("button",{onClick:l,className:"text-gray-400 hover:text-gray-600 transition-colors",children:[r.jsx("span",{className:"sr-only",children:"Close"}),r.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),r.jsx("div",{className:"px-6 py-4",children:i})]})})]})},rv=({forceOpenModal:u=!1,onModalStateChange:l})=>{const{addCompany:s,updateCompany:i}=Ke(),[c,d]=Z.useState(!1),[h,m]=Z.useState(null),[x,g]=Z.useState(!1);Z.useEffect(()=>{u&&!c&&p()},[u]),Z.useEffect(()=>{l?.(c)},[c,l]);const p=()=>{m(null),d(!0)},b=R=>{m(R),d(!0)},j=R=>{b(R)},S=()=>{d(!1),m(null)},_=async R=>{g(!0);try{await new Promise(D=>setTimeout(D,500)),h?i(h.id,R):s(R),S()}catch(D){console.error("Error saving company:",D)}finally{g(!1)}};return r.jsxs(r.Fragment,{children:[r.jsx(lv,{onAddCompany:p,onEditCompany:b,onViewCompany:j}),r.jsx(fa,{isOpen:c,onClose:S,title:h?"Edit Company":"Add New Company",size:"lg",children:r.jsx(iv,{company:h||void 0,onSubmit:_,onCancel:S,isLoading:x})})]})},cv=({onAddContact:u,onEditContact:l,onViewContact:s})=>{const{getFilteredContacts:i,deleteContact:c,companies:d,getCompanyById:h}=Ke(),[m,x]=Z.useState({search:"",companyId:void 0,status:void 0}),g=i(m),p=_=>{const R=h(_.companyId),D=`${_.firstName} ${_.lastName}`,N=R?` from ${R.name}`:"";window.confirm(`Are you sure you want to delete ${D}${N}?`)&&c(_.id)},b=_=>{switch(_){case"active":return"bg-green-100 text-green-700";case"inactive":return"bg-gray-100 text-gray-700";default:return"bg-gray-100 text-gray-700"}},j=[{value:"",label:"All Statuses"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],S=[{value:"",label:"All Companies"},...d.map(_=>({value:_.id,label:_.name}))];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Contacts"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Manage your contact database"})]}),r.jsx(ee,{onClick:u,children:"+ Add Contact"})]}),r.jsx(de,{padding:"md",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(te,{placeholder:"Search contacts...",value:m.search||"",onChange:_=>x({...m,search:_})}),r.jsx(ye,{value:m.companyId||"",onChange:_=>x({...m,companyId:_||void 0}),options:S}),r.jsx(ye,{value:m.status||"",onChange:_=>x({...m,status:_||void 0}),options:j})]})}),g.length===0?r.jsxs(de,{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 mb-4",children:r.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No contacts found"}),r.jsx("p",{className:"text-gray-400 mb-4",children:m.search||m.companyId||m.status?"Try adjusting your filters or search terms.":"Get started by adding your first contact."}),r.jsx(ee,{onClick:u,children:"+ Add Your First Contact"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(_=>{const R=h(_.companyId);return r.jsx(de,{hover:!0,className:"relative",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[_.firstName," ",_.lastName]}),r.jsxs("div",{className:"flex space-x-1",children:[_.isPrimary&&r.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-primary-100 text-primary-700",children:"Primary"}),r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${b(_.status)}`,children:_.status})]})]}),r.jsxs("div",{className:"space-y-1",children:[R&&r.jsx("p",{className:"text-sm font-medium text-primary-600",children:R.name}),_.jobTitle&&r.jsx("p",{className:"text-sm text-gray-600",children:_.jobTitle}),_.department&&r.jsx("p",{className:"text-xs text-gray-500",children:_.department})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx("span",{className:"w-4 text-gray-400",children:""}),r.jsx("span",{className:"ml-2 truncate",children:_.email})]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx("span",{className:"w-4 text-gray-400",children:""}),r.jsx("span",{className:"ml-2",children:_.phone})]})]}),_.notes&&r.jsx("div",{className:"border-t border-gray-100 pt-3",children:r.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:_.notes})}),r.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100 text-xs text-gray-400",children:[r.jsxs("span",{children:["Added ",new Date(_.createdAt).toLocaleDateString()]}),_.updatedAt.getTime()!==_.createdAt.getTime()&&r.jsxs("span",{children:["Updated ",new Date(_.updatedAt).toLocaleDateString()]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 pt-2",children:[r.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>s(_),className:"text-xs",children:"View"}),r.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>l(_),className:"text-xs",children:"Edit"}),r.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>p(_),className:"text-xs text-error hover:bg-red-50",children:"Delete"})]})]})},_.id)})})]})},ov=({contact:u,onSubmit:l,onCancel:s,isLoading:i=!1,preselectedCompanyId:c})=>{const{companies:d}=Ke(),[h,m]=Z.useState({companyId:u?.companyId||c||"",firstName:u?.firstName||"",lastName:u?.lastName||"",email:u?.email||"",phone:u?.phone||"",jobTitle:u?.jobTitle||"",department:u?.department||"",isPrimary:u?.isPrimary||!1,notes:u?.notes||"",status:u?.status||"active"}),[x,g]=Z.useState({}),p=()=>{const N={};return h.companyId||(N.companyId="Company is required"),h.firstName.trim()||(N.firstName="First name is required"),h.lastName.trim()||(N.lastName="Last name is required"),h.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h.email)||(N.email="Please enter a valid email address"):N.email="Email is required",h.phone.trim()||(N.phone="Phone number is required"),g(N),Object.keys(N).length===0},b=N=>{N.preventDefault(),p()&&l(h)},j=(N,X)=>{m(q=>({...q,[N]:X})),x[N]&&g(q=>({...q,[N]:void 0}))},S=d.map(N=>({value:N.id,label:N.name})),_=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],R=[{value:"executive",label:"Executive"},{value:"sales",label:"Sales"},{value:"marketing",label:"Marketing"},{value:"technology",label:"Technology"},{value:"engineering",label:"Engineering"},{value:"finance",label:"Finance"},{value:"hr",label:"Human Resources"},{value:"operations",label:"Operations"},{value:"support",label:"Customer Support"},{value:"other",label:"Other"}],D=d.find(N=>N.id===h.companyId);return r.jsxs("form",{onSubmit:b,className:"space-y-6",children:[r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx(ye,{label:"Company",value:h.companyId,onChange:N=>j("companyId",N),options:S,placeholder:"Select a company",required:!0,error:x.companyId}),D&&r.jsx("div",{className:"mt-2 text-sm text-gray-600",children:r.jsxs("p",{children:[D.email,"  ",D.phone]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(te,{label:"First Name",value:h.firstName,onChange:N=>j("firstName",N),placeholder:"John",required:!0,error:x.firstName}),r.jsx(te,{label:"Last Name",value:h.lastName,onChange:N=>j("lastName",N),placeholder:"Doe",required:!0,error:x.lastName})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(te,{label:"Email",type:"email",value:h.email,onChange:N=>j("email",N),placeholder:"john.doe@company.com",required:!0,error:x.email}),r.jsx(te,{label:"Phone",type:"tel",value:h.phone,onChange:N=>j("phone",N),placeholder:"+1 (555) 123-4567",required:!0,error:x.phone})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(te,{label:"Job Title",value:h.jobTitle||"",onChange:N=>j("jobTitle",N),placeholder:"e.g., Marketing Director"}),r.jsx(ye,{label:"Department",value:h.department||"",onChange:N=>j("department",N),options:R,placeholder:"Select department"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ye,{label:"Status",value:h.status,onChange:N=>j("status",N),options:_,required:!0}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Contact Type"}),r.jsx("div",{className:"flex items-center space-x-3 pt-2",children:r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:h.isPrimary,onChange:N=>j("isPrimary",N.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),r.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Primary Contact"})]})}),r.jsx("p",{className:"text-xs text-gray-500",children:"Primary contacts are the main point of contact for their company"})]})]}),r.jsx(da,{label:"Notes",value:h.notes||"",onChange:N=>j("notes",N),placeholder:"Additional notes about this contact...",rows:3}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[r.jsx(ee,{variant:"ghost",onClick:s,disabled:i,children:"Cancel"}),r.jsx(ee,{type:"submit",disabled:i,children:i?"Saving...":u?"Update Contact":"Create Contact"})]})]})},uv=()=>{const{addContact:u,updateContact:l}=Ke(),[s,i]=Z.useState(!1),[c,d]=Z.useState(null),[h,m]=Z.useState(!1),x=()=>{d(null),i(!0)},g=S=>{d(S),i(!0)},p=S=>{g(S)},b=()=>{i(!1),d(null)},j=async S=>{m(!0);try{await new Promise(_=>setTimeout(_,500)),c?l(c.id,S):u(S),b()}catch(_){console.error("Error saving contact:",_)}finally{m(!1)}};return r.jsxs(r.Fragment,{children:[r.jsx(cv,{onAddContact:x,onEditContact:g,onViewContact:p}),r.jsx(fa,{isOpen:s,onClose:b,title:c?"Edit Contact":"Add New Contact",size:"lg",children:r.jsx(ov,{contact:c||void 0,onSubmit:j,onCancel:b,isLoading:h})})]})},W0=({isOpen:u,onClose:l,dealId:s})=>{const{companies:i,addProject:c,convertDealToProject:d,getDealById:h,calculateProjectBudget:m}=Ke(),x=s?h(s):null,g=x?i.find(A=>A.id===x.companyId):null,p=()=>({dealId:s||"",companyId:x?.companyId||"",title:x?.title||"",description:x?.description||"",projectManager:"",status:"planning",priority:x?.priority||"medium",type:"development",startDate:new Date,endDate:new Date(Date.now()+2160*60*60*1e3),budget:{totalRevenue:x?.value||0,resources:[],expenses:[],contingencyPercentage:10,currency:x?.currency||"USD"},progressPercentage:0,tags:x?.tags||[],notes:x?.notes||""}),[b,j]=Z.useState(p);Z.useEffect(()=>{s&&x&&j({dealId:s||"",companyId:x?.companyId||"",title:x?.title||"",description:x?.description||"",projectManager:"",status:"planning",priority:x?.priority||"medium",type:"development",startDate:new Date,endDate:new Date(Date.now()+2160*60*60*1e3),budget:{totalRevenue:x?.value||0,resources:[],expenses:[],contingencyPercentage:10,currency:x?.currency||"USD"},progressPercentage:0,tags:x?.tags||[],notes:x?.notes||""})},[s,x]);const[S,_]=Z.useState({}),[R,D]=Z.useState(!1),[N,X]=Z.useState(!1),[q,L]=Z.useState(!1),[H,V]=Z.useState(null),[F,xe]=Z.useState(null),[J,K]=Z.useState({name:"",type:"internal",role:"",rateType:"hourly",hourlyRate:0,dailyRate:0,currency:"USD",hoursAllocated:0,daysAllocated:0,startDate:new Date,endDate:new Date,skills:[],notes:""}),[B,ie]=Z.useState({category:"software",description:"",plannedCost:0,currency:"USD",status:"planned",vendor:"",notes:""}),le=m(b.budget),ae=()=>{const A={};return b.title.trim()||(A.title="Title is required"),b.companyId||(A.companyId="Company is required"),b.budget.totalRevenue<=0&&(A.totalRevenue="Revenue must be greater than 0"),b.startDate>=b.endDate&&(A.endDate="End date must be after start date"),_(A),Object.keys(A).length===0},ne=async A=>{if(A.preventDefault(),!!ae()){D(!0);try{s?d(s,b):c(b),l()}catch(Q){console.error("Error creating project:",Q)}finally{D(!1)}}},T=()=>{const A=[...b.budget.resources];H!==null?A[H]={...J,id:A[H].id}:A.push({...J,id:Math.random().toString(36).substr(2,9)}),j({...b,budget:{...b.budget,resources:A}}),X(!1),V(null),K({name:"",type:"internal",role:"",rateType:"hourly",hourlyRate:0,dailyRate:0,currency:"USD",hoursAllocated:0,daysAllocated:0,startDate:new Date,endDate:new Date,skills:[],notes:""})},I=A=>{const Q=b.budget.resources[A];K({...Q}),V(A),X(!0)},W=A=>{const Q=b.budget.resources.filter((ce,we)=>we!==A);j({...b,budget:{...b.budget,resources:Q}})},Ne=()=>{const A=[...b.budget.expenses];F!==null?A[F]={...B,id:A[F].id}:A.push({...B,id:Math.random().toString(36).substr(2,9)}),j({...b,budget:{...b.budget,expenses:A}}),L(!1),xe(null),ie({category:"software",description:"",plannedCost:0,currency:"USD",status:"planned",vendor:"",notes:""})},E=A=>{const Q=b.budget.expenses[A];ie({...Q}),xe(A),L(!0)},Y=A=>{const Q=b.budget.expenses.filter((ce,we)=>we!==A);j({...b,budget:{...b.budget,expenses:Q}})};return r.jsxs(r.Fragment,{children:[r.jsx(fa,{isOpen:u,onClose:l,title:s?`Convert Deal to Project: ${x?.title}`:"Create New Project",size:"xl",children:r.jsxs("form",{onSubmit:ne,className:"space-y-6",children:[r.jsxs(de,{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Project Details"}),s&&g&&r.jsx("div",{className:"mb-4 p-3 bg-blue-50 rounded-md",children:r.jsxs("p",{className:"text-sm text-blue-800",children:["Converting deal from ",r.jsx("strong",{children:g.name}),"  Value: ",r.jsxs("strong",{children:["$",x?.value.toLocaleString()]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(te,{label:"Project Title",value:b.title,onChange:A=>j({...b,title:A}),error:S.title,required:!0}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Company ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{value:b.companyId,onChange:A=>j({...b,companyId:A.target.value}),required:!0,disabled:!!s,className:`
                    block w-full px-3 py-2 border rounded-md shadow-sm bg-white
                    focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500
                    disabled:bg-gray-50 disabled:text-gray-500 disabled:cursor-not-allowed
                    ${S.companyId?"border-red-500":"border-gray-300"}
                  `,children:[r.jsx("option",{value:"",children:"Select Company"}),i.map(A=>r.jsx("option",{value:A.id,children:A.name},A.id))]}),S.companyId&&r.jsx("p",{className:"text-sm text-red-500 mt-1",children:S.companyId})]}),r.jsx(te,{label:"Project Manager",value:b.projectManager||"",onChange:A=>j({...b,projectManager:A})}),r.jsxs(ye,{label:"Project Type",value:b.type,onChange:A=>j({...b,type:A}),children:[r.jsx("option",{value:"development",children:"Development"}),r.jsx("option",{value:"consulting",children:"Consulting"}),r.jsx("option",{value:"implementation",children:"Implementation"}),r.jsx("option",{value:"support",children:"Support"}),r.jsx("option",{value:"other",children:"Other"})]}),r.jsxs(ye,{label:"Status",value:b.status,onChange:A=>j({...b,status:A}),children:[r.jsx("option",{value:"planning",children:"Planning"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"on-hold",children:"On Hold"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"cancelled",children:"Cancelled"})]}),r.jsxs(ye,{label:"Priority",value:b.priority,onChange:A=>j({...b,priority:A}),children:[r.jsx("option",{value:"low",children:"Low"}),r.jsx("option",{value:"medium",children:"Medium"}),r.jsx("option",{value:"high",children:"High"}),r.jsx("option",{value:"critical",children:"Critical"})]}),r.jsx(te,{label:"Start Date",type:"date",value:b.startDate.toISOString().split("T")[0],onChange:A=>j({...b,startDate:new Date(A)})}),r.jsx(te,{label:"End Date",type:"date",value:b.endDate.toISOString().split("T")[0],onChange:A=>j({...b,endDate:new Date(A)}),error:S.endDate})]}),r.jsx(da,{label:"Description",value:b.description||"",onChange:A=>j({...b,description:A}),rows:3,className:"mt-4"})]}),r.jsxs(de,{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Budget Management"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[r.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",le.totalRevenue.toLocaleString()]}),r.jsx("div",{className:"text-sm text-green-700",children:"Total Revenue"})]}),r.jsxs("div",{className:"p-4 bg-red-50 rounded-lg",children:[r.jsxs("div",{className:"text-2xl font-bold text-red-600",children:["$",le.totalCost.toLocaleString()]}),r.jsx("div",{className:"text-sm text-red-700",children:"Total Cost"})]}),r.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[r.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["$",le.grossMargin.toLocaleString()]}),r.jsx("div",{className:"text-sm text-blue-700",children:"Gross Margin"})]}),r.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg",children:[r.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[le.marginPercentage.toFixed(1),"%"]}),r.jsx("div",{className:"text-sm text-purple-700",children:"Margin %"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[r.jsx(te,{label:"Total Revenue",type:"number",value:b.budget.totalRevenue.toString(),onChange:A=>j({...b,budget:{...b.budget,totalRevenue:parseFloat(A)||0}}),error:S.totalRevenue,required:!0}),r.jsx(te,{label:"Contingency %",type:"number",value:b.budget.contingencyPercentage.toString(),onChange:A=>j({...b,budget:{...b.budget,contingencyPercentage:parseFloat(A)||0}}),min:"0",max:"50"})]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h4",{className:"text-md font-semibold text-gray-700",children:"Project Resources"}),r.jsx(ee,{type:"button",variant:"secondary",size:"sm",onClick:()=>X(!0),children:"+ Add Resource"})]}),b.budget.resources.length>0?r.jsx("div",{className:"space-y-3",children:b.budget.resources.map((A,Q)=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-800",children:A.name}),r.jsxs("div",{className:"text-sm text-gray-600",children:[A.role," ",A.rateType==="daily"?r.jsxs(r.Fragment,{children:["$",A.dailyRate,"/day  ",A.daysAllocated," days"]}):r.jsxs(r.Fragment,{children:["$",A.hourlyRate,"/hr  ",A.hoursAllocated,"h"]})]}),r.jsxs("div",{className:"text-sm text-gray-500",children:["Total: $",A.rateType==="daily"?((A.dailyRate||0)*(A.daysAllocated||0)).toLocaleString():(A.hourlyRate*A.hoursAllocated).toLocaleString()]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(ee,{type:"button",variant:"ghost",size:"sm",onClick:()=>I(Q),children:"Edit"}),r.jsx(ee,{type:"button",variant:"ghost",size:"sm",onClick:()=>W(Q),className:"text-red-600 hover:text-red-700",children:"Remove"})]})]},Q))}):r.jsx("div",{className:"text-center py-8 text-gray-500",children:'No resources added yet. Click "Add Resource" to get started.'})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h4",{className:"text-md font-semibold text-gray-700",children:"Project Expenses"}),r.jsx(ee,{type:"button",variant:"secondary",size:"sm",onClick:()=>L(!0),children:"+ Add Expense"})]}),b.budget.expenses.length>0?r.jsx("div",{className:"space-y-3",children:b.budget.expenses.map((A,Q)=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-800",children:A.description}),r.jsxs("div",{className:"text-sm text-gray-600",children:[A.category,"  $",A.plannedCost.toLocaleString()]}),A.vendor&&r.jsxs("div",{className:"text-sm text-gray-500",children:["Vendor: ",A.vendor]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(ee,{type:"button",variant:"ghost",size:"sm",onClick:()=>E(Q),children:"Edit"}),r.jsx(ee,{type:"button",variant:"ghost",size:"sm",onClick:()=>Y(Q),className:"text-red-600 hover:text-red-700",children:"Remove"})]})]},Q))}):r.jsx("div",{className:"text-center py-8 text-gray-500",children:'No expenses added yet. Click "Add Expense" to get started.'})]})]}),r.jsxs(de,{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Additional Details"}),r.jsx(te,{label:"Tags (comma-separated)",value:b.tags.join(", "),onChange:A=>j({...b,tags:A.split(",").map(Q=>Q.trim()).filter(Q=>Q)}),className:"mb-4"}),r.jsx(da,{label:"Notes",value:b.notes,onChange:A=>j({...b,notes:A}),rows:3})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[r.jsx(ee,{type:"button",variant:"secondary",onClick:l,disabled:R,children:"Cancel"}),r.jsx(ee,{type:"submit",variant:"primary",disabled:R,children:R?"Creating...":s?"Convert to Project":"Create Project"})]})]})}),r.jsx(fa,{isOpen:N,onClose:()=>{X(!1),V(null)},title:H!==null?"Edit Resource":"Add Resource",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(te,{label:"Resource Name",value:J.name,onChange:A=>K({...J,name:A}),required:!0}),r.jsxs(ye,{label:"Type",value:J.type,onChange:A=>K({...J,type:A}),children:[r.jsx("option",{value:"internal",children:"Internal"}),r.jsx("option",{value:"external",children:"External"}),r.jsx("option",{value:"contractor",children:"Contractor"})]}),r.jsx(te,{label:"Role",value:J.role,onChange:A=>K({...J,role:A}),required:!0}),r.jsxs(ye,{label:"Rate Type",value:J.rateType,onChange:A=>{const Q=A;K({...J,rateType:Q,...Q==="daily"&&J.hourlyRate>0?{daysAllocated:Math.ceil(J.hoursAllocated/8),dailyRate:J.hourlyRate*8}:{},...Q==="hourly"&&(J.dailyRate??0)>0?{hoursAllocated:(J.daysAllocated||0)*8,hourlyRate:(J.dailyRate??0)/8}:{}})},children:[r.jsx("option",{value:"hourly",children:"Hourly Rate"}),r.jsx("option",{value:"daily",children:"Daily Rate"})]}),J.rateType==="hourly"?r.jsxs(r.Fragment,{children:[r.jsx(te,{label:"Hourly Rate",type:"number",value:J.hourlyRate.toString(),onChange:A=>K({...J,hourlyRate:parseFloat(A)||0}),required:!0}),r.jsx(te,{label:"Hours Allocated",type:"number",value:J.hoursAllocated.toString(),onChange:A=>K({...J,hoursAllocated:parseFloat(A)||0}),required:!0})]}):r.jsxs(r.Fragment,{children:[r.jsx(te,{label:"Daily Rate",type:"number",value:J.dailyRate?.toString()||"",onChange:A=>K({...J,dailyRate:parseFloat(A)||0,hourlyRate:(parseFloat(A)||0)/8}),required:!0}),r.jsx(te,{label:"Days Allocated",type:"number",value:J.daysAllocated?.toString()||"",onChange:A=>K({...J,daysAllocated:parseFloat(A)||0,hoursAllocated:(parseFloat(A)||0)*8}),required:!0})]}),r.jsxs(ye,{label:"Currency",value:J.currency,onChange:A=>K({...J,currency:A}),children:[r.jsx("option",{value:"USD",children:"USD"}),r.jsx("option",{value:"EUR",children:"EUR"}),r.jsx("option",{value:"GBP",children:"GBP"}),r.jsx("option",{value:"CAD",children:"CAD"}),r.jsx("option",{value:"AUD",children:"AUD"})]}),r.jsx(te,{label:"Start Date",type:"date",value:J.startDate.toISOString().split("T")[0],onChange:A=>K({...J,startDate:new Date(A)})}),r.jsx(te,{label:"End Date",type:"date",value:J.endDate.toISOString().split("T")[0],onChange:A=>K({...J,endDate:new Date(A)})})]}),J.rateType==="daily"&&(J.dailyRate??0)>0&&r.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg text-sm text-blue-700",children:[r.jsxs("div",{children:["Daily rate of $",J.dailyRate," = $",((J.dailyRate??0)/8).toFixed(2),"/hour (8 hours/day)"]}),(J.daysAllocated??0)>0&&r.jsxs("div",{children:[J.daysAllocated," days = ",(J.daysAllocated??0)*8," hours"]})]}),J.rateType==="hourly"&&J.hourlyRate>0&&J.hoursAllocated>0&&r.jsx("div",{className:"p-3 bg-green-50 rounded-lg text-sm text-green-700",children:r.jsxs("div",{children:[J.hoursAllocated," hours at $",J.hourlyRate,"/hour = $",(J.hoursAllocated*J.hourlyRate).toLocaleString()," total"]})}),r.jsx(te,{label:"Skills (comma-separated)",value:J.skills.join(", "),onChange:A=>K({...J,skills:A.split(",").map(Q=>Q.trim()).filter(Q=>Q)})}),r.jsx(da,{label:"Notes",value:J.notes||"",onChange:A=>K({...J,notes:A}),rows:2}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[r.jsx(ee,{type:"button",variant:"secondary",onClick:()=>{X(!1),V(null)},children:"Cancel"}),r.jsx(ee,{type:"button",variant:"primary",onClick:T,children:H!==null?"Update Resource":"Add Resource"})]})]})}),r.jsx(fa,{isOpen:q,onClose:()=>{L(!1),xe(null)},title:F!==null?"Edit Expense":"Add Expense",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs(ye,{label:"Category",value:B.category,onChange:A=>ie({...B,category:A}),children:[r.jsx("option",{value:"software",children:"Software"}),r.jsx("option",{value:"hardware",children:"Hardware"}),r.jsx("option",{value:"travel",children:"Travel"}),r.jsx("option",{value:"materials",children:"Materials"}),r.jsx("option",{value:"licenses",children:"Licenses"}),r.jsx("option",{value:"other",children:"Other"})]}),r.jsx(te,{label:"Planned Cost",type:"number",value:B.plannedCost.toString(),onChange:A=>ie({...B,plannedCost:parseFloat(A)||0}),required:!0}),r.jsxs(ye,{label:"Currency",value:B.currency,onChange:A=>ie({...B,currency:A}),children:[r.jsx("option",{value:"USD",children:"USD"}),r.jsx("option",{value:"EUR",children:"EUR"}),r.jsx("option",{value:"GBP",children:"GBP"}),r.jsx("option",{value:"CAD",children:"CAD"}),r.jsx("option",{value:"AUD",children:"AUD"})]}),r.jsxs(ye,{label:"Status",value:B.status,onChange:A=>ie({...B,status:A}),children:[r.jsx("option",{value:"planned",children:"Planned"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"ordered",children:"Ordered"}),r.jsx("option",{value:"received",children:"Received"}),r.jsx("option",{value:"paid",children:"Paid"})]}),r.jsx(te,{label:"Due Date",type:"date",value:B.dueDate?.toISOString().split("T")[0]||"",onChange:A=>ie({...B,dueDate:A?new Date(A):void 0})}),r.jsx(te,{label:"Vendor",value:B.vendor||"",onChange:A=>ie({...B,vendor:A})})]}),r.jsx(te,{label:"Description",value:B.description,onChange:A=>ie({...B,description:A}),required:!0}),r.jsx(da,{label:"Notes",value:B.notes||"",onChange:A=>ie({...B,notes:A}),rows:2}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[r.jsx(ee,{type:"button",variant:"secondary",onClick:()=>{L(!1),xe(null)},children:"Cancel"}),r.jsx(ee,{type:"button",variant:"primary",onClick:Ne,children:F!==null?"Update Expense":"Add Expense"})]})]})})]})},dv=({onAddDeal:u,onEditDeal:l,onViewDeal:s})=>{const{getFilteredDeals:i,deleteDeal:c,companies:d,getCompanyById:h}=Ke(),[m,x]=Z.useState({search:"",companyId:void 0,stage:void 0,priority:void 0,status:void 0}),[g,p]=Z.useState("cards"),[b,j]=Z.useState(null),S=i(m),_=g==="converted"?S.filter(B=>B.convertedToProject):S.filter(B=>!B.convertedToProject),R=async B=>{const ie=h(B.companyId),le=ie?` from ${ie.name}`:"";if(window.confirm(`Are you sure you want to delete "${B.title}"${le}?`))try{await c(B.id)}catch(ae){console.error("Failed to delete deal:",ae),alert("Failed to delete deal. Please try again.")}},D=B=>{switch(B){case"prospecting":return"bg-gray-100 text-gray-700";case"qualification":return"bg-blue-100 text-blue-700";case"proposal":return"bg-yellow-100 text-yellow-700";case"negotiation":return"bg-orange-100 text-orange-700";case"closed-won":return"bg-green-100 text-green-700";case"closed-lost":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},N=B=>{switch(B){case"low":return"bg-gray-100 text-gray-700";case"medium":return"bg-blue-100 text-blue-700";case"high":return"bg-orange-100 text-orange-700";case"critical":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},X=(B,ie)=>new Intl.NumberFormat("en-US",{style:"currency",currency:ie,minimumFractionDigits:0,maximumFractionDigits:0}).format(B),q=[{value:"",label:"All Stages"},{value:"prospecting",label:"Prospecting"},{value:"qualification",label:"Qualification"},{value:"proposal",label:"Proposal"},{value:"negotiation",label:"Negotiation"},{value:"closed-won",label:"Closed Won"},{value:"closed-lost",label:"Closed Lost"}],L=[{value:"",label:"All Priorities"},{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"critical",label:"Critical"}],H=[{value:"",label:"All Statuses"},{value:"active",label:"Active"},{value:"won",label:"Won"},{value:"lost",label:"Lost"},{value:"on-hold",label:"On Hold"}],V=[{value:"",label:"All Companies"},...d.map(B=>({value:B.id,label:B.name}))],F=S.filter(B=>!["closed-won","closed-lost"].includes(B.stage)).reduce((B,ie)=>B+ie.value*ie.probability/100,0),xe=S.filter(B=>B.stage==="closed-won").reduce((B,ie)=>B+ie.value,0),J=S.filter(B=>B.convertedToProject).length,K=S.filter(B=>B.convertedToProject).reduce((B,ie)=>B+ie.value,0);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Deals"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Manage your sales pipeline"})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsxs("div",{className:"flex rounded-md shadow-sm",children:[r.jsx("button",{onClick:()=>p("cards"),className:`px-4 py-2 text-sm font-medium rounded-l-md border ${g==="cards"?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Cards"}),r.jsx("button",{onClick:()=>p("converted"),className:`px-4 py-2 text-sm font-medium rounded-r-md border-t border-r border-b ${g==="converted"?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Converted"})]}),r.jsx(ee,{onClick:u,children:"+ Add Deal"})]})]}),r.jsx(de,{padding:"md",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[r.jsx(te,{placeholder:"Search deals...",value:m.search||"",onChange:B=>x({...m,search:B})}),r.jsx(ye,{value:m.companyId||"",onChange:B=>x({...m,companyId:B||void 0}),options:V}),r.jsx(ye,{value:m.stage||"",onChange:B=>x({...m,stage:B||void 0}),options:q}),r.jsx(ye,{value:m.priority||"",onChange:B=>x({...m,priority:B||void 0}),options:L}),r.jsx(ye,{value:m.status||"",onChange:B=>x({...m,status:B||void 0}),options:H})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(de,{padding:"md",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-primary-600",children:g==="converted"?J:_.length}),r.jsx("div",{className:"text-sm text-gray-500",children:g==="converted"?"Converted Deals":"Total Deals"})]})}),r.jsx(de,{padding:"md",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:["$",Math.round(g==="converted"?K:F).toLocaleString()]}),r.jsx("div",{className:"text-sm text-gray-500",children:g==="converted"?"Converted Value":"Pipeline Value"})]})}),r.jsx(de,{padding:"md",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",Math.round(xe).toLocaleString()]}),r.jsx("div",{className:"text-sm text-gray-500",children:"Won Deals"})]})}),r.jsx(de,{padding:"md",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-primary-600",children:S.filter(B=>B.status==="active").length}),r.jsx("div",{className:"text-sm text-gray-500",children:"Active Deals"})]})})]}),_.length===0?r.jsxs(de,{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 mb-4",children:r.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:g==="converted"?"No converted deals found":"No deals found"}),r.jsx("p",{className:"text-gray-400 mb-4",children:g==="converted"?"Convert some closed-won deals to projects to see them here.":Object.values(m).some(B=>B)?"Try adjusting your filters or search terms.":"Get started by adding your first deal."}),g!=="converted"&&r.jsx(ee,{onClick:u,children:"+ Add Your First Deal"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(B=>{const ie=h(B.companyId),le=Math.round(B.value*(B.probability/100));return r.jsx(de,{hover:!0,className:"relative",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 truncate",children:B.title}),r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${D(B.stage)}`,children:B.stage.replace("-"," ")}),r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${N(B.priority)}`,children:B.priority}),B.convertedToProject&&r.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-purple-100 text-purple-700",children:" Project"})]})]}),ie&&r.jsx("p",{className:"text-sm font-medium text-primary-600 mb-1",children:ie.name}),B.description&&r.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:B.description})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Deal Value:"}),r.jsx("span",{className:"font-semibold text-gray-800",children:X(B.value,B.currency)})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Probability:"}),r.jsxs("span",{className:"font-semibold text-gray-800",children:[B.probability,"%"]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Expected:"}),r.jsx("span",{className:"font-semibold text-primary-600",children:X(le,B.currency)})]})]}),r.jsx("div",{className:"space-y-1",children:B.convertedToProject&&B.convertedToProjectAt?r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Converted to Project:"}),r.jsx("span",{className:"text-green-600 font-medium",children:B.convertedToProjectAt.toLocaleDateString()})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Expected Close:"}),r.jsx("span",{className:"text-gray-800",children:B.expectedCloseDate?B.expectedCloseDate.toLocaleDateString():"Not set"})]}),r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Days Left:"}),r.jsx("span",{className:`font-medium ${B.expectedCloseDate&&Math.ceil((B.expectedCloseDate.getTime()-new Date().getTime())/(1e3*60*60*24))<7?"text-error":"text-gray-800"}`,children:B.expectedCloseDate?Math.ceil((B.expectedCloseDate.getTime()-new Date().getTime())/(1e3*60*60*24)):"N/A"})]})]})}),B.tags.length>0&&r.jsxs("div",{className:"flex flex-wrap gap-1",children:[B.tags.slice(0,3).map(ae=>r.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-600",children:ae},ae)),B.tags.length>3&&r.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-600",children:["+",B.tags.length-3," more"]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2 border-t border-gray-100",children:[r.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>s(B),className:"text-xs",children:"View"}),r.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>l(B),className:"text-xs",children:"Edit"}),r.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>j(B.id),className:"text-xs text-purple-600 hover:bg-purple-50",disabled:B.stage==="closed-lost"||B.convertedToProject,children:B.convertedToProject?"Already Converted":"Convert to Project"}),r.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>R(B),className:"text-xs text-error hover:bg-red-50",children:"Delete"})]})]})},B.id)})}),r.jsx(W0,{isOpen:!!b,onClose:()=>j(null),dealId:b||void 0})]})},fv=({deal:u,onSubmit:l,onCancel:s,isLoading:i=!1,preselectedCompanyId:c})=>{const{companies:d}=Ke(),[h,m]=Z.useState({companyId:u?.companyId||c||"",title:u?.title||"",description:u?.description||"",value:u?.value||0,currency:u?.currency||"USD",probability:u?.probability||50,stage:u?.stage||"prospecting",priority:u?.priority||"medium",source:u?.source||"website",expectedCloseDate:u?.expectedCloseDate||new Date(Date.now()+720*60*60*1e3),valueSource:u?.valueSource||"manual",tags:u?.tags||[],notes:u?.notes||"",status:u?.status||"active"}),[x,g]=Z.useState({}),[p,b]=Z.useState(""),j=()=>{const K={};return h.companyId||(K.companyId="Company is required"),h.title.trim()||(K.title="Deal title is required"),h.value<=0&&(K.value="Deal value must be greater than 0"),(h.probability<0||h.probability>100)&&(K.probability="Probability must be between 0 and 100"),g(K),Object.keys(K).length===0},S=K=>{K.preventDefault(),j()&&l(h)},_=(K,B)=>{m(ie=>({...ie,[K]:B})),x[K]&&g(ie=>({...ie,[K]:void 0}))},R=()=>{p.trim()&&!h.tags.includes(p.trim())&&(_("tags",[...h.tags,p.trim()]),b(""))},D=K=>{_("tags",h.tags.filter(B=>B!==K))},N=K=>{K.key==="Enter"&&(K.preventDefault(),R())},X=d.map(K=>({value:K.id,label:K.name})),q=[{value:"USD",label:"USD ($)"},{value:"EUR",label:"EUR ()"},{value:"GBP",label:"GBP ()"},{value:"CAD",label:"CAD (C$)"},{value:"AUD",label:"AUD (A$)"}],L=[{value:"prospecting",label:"Prospecting"},{value:"qualification",label:"Qualification"},{value:"proposal",label:"Proposal"},{value:"negotiation",label:"Negotiation"},{value:"closed-won",label:"Closed Won"},{value:"closed-lost",label:"Closed Lost"}],H=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"critical",label:"Critical"}],V=[{value:"website",label:"Website"},{value:"referral",label:"Referral"},{value:"cold-call",label:"Cold Call"},{value:"email",label:"Email Campaign"},{value:"social-media",label:"Social Media"},{value:"event",label:"Event/Conference"},{value:"other",label:"Other"}],F=[{value:"active",label:"Active"},{value:"won",label:"Won"},{value:"lost",label:"Lost"},{value:"on-hold",label:"On Hold"}],xe=d.find(K=>K.id===h.companyId),J=Math.round(h.value*(h.probability/100));return r.jsxs("form",{onSubmit:S,className:"space-y-6",children:[r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx(ye,{label:"Company",value:h.companyId,onChange:K=>_("companyId",K),options:X,placeholder:"Select a company",required:!0,error:x.companyId}),xe&&r.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[r.jsxs("p",{children:[xe.email,"  ",xe.phone]}),xe.industry&&r.jsxs("p",{children:["Industry: ",xe.industry]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(te,{label:"Deal Title",value:h.title,onChange:K=>_("title",K),placeholder:"e.g., Enterprise Software License",required:!0,error:x.title}),r.jsx(da,{label:"Description",value:h.description||"",onChange:K=>_("description",K),placeholder:"Describe the deal details...",rows:3})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h4",{className:"text-lg font-medium text-gray-800",children:"Financial Details"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Deal Value ",r.jsx("span",{className:"text-error",children:"*"})]})}),r.jsxs("div",{className:"flex",children:[r.jsx(ye,{value:h.currency,onChange:K=>_("currency",K),options:q,className:"w-24 mr-2"}),r.jsx(te,{type:"number",value:h.value.toString(),onChange:K=>_("value",parseFloat(K)||0),placeholder:"0",required:!0,error:x.value,className:"flex-1"})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Probability (%) ",r.jsx("span",{className:"text-error",children:"*"})]}),r.jsx(te,{type:"number",value:h.probability.toString(),onChange:K=>_("probability",parseInt(K)||0),placeholder:"50",min:"0",max:"100",required:!0,error:x.probability}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Expected revenue: ",h.currency," ",J.toLocaleString()]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ye,{label:"Deal Stage",value:h.stage,onChange:K=>_("stage",K),options:L,required:!0}),r.jsx(ye,{label:"Priority",value:h.priority,onChange:K=>_("priority",K),options:H,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ye,{label:"Lead Source",value:h.source,onChange:K=>_("source",K),options:V,required:!0}),r.jsx(ye,{label:"Status",value:h.status,onChange:K=>_("status",K),options:F,required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Expected Close Date ",r.jsx("span",{className:"text-error",children:"*"})]}),r.jsx("input",{type:"date",value:h.expectedCloseDate.toISOString().split("T")[0],onChange:K=>_("expectedCloseDate",new Date(K.target.value)),required:!0,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tags"}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:h.tags.map(K=>r.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-primary-100 text-primary-700",children:[K,r.jsx("button",{type:"button",onClick:()=>D(K),className:"ml-1 text-primary-500 hover:text-primary-700",children:""})]},K))}),r.jsxs("div",{className:"flex",children:[r.jsx("input",{type:"text",value:p,onChange:K=>b(K.target.value),onKeyPress:N,placeholder:"Add a tag...",className:"block w-full px-3 py-2 border border-gray-300 rounded-l-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),r.jsx("button",{type:"button",onClick:R,className:"px-4 py-2 bg-primary-600 text-white rounded-r-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",children:"Add"})]})]}),r.jsx(da,{label:"Notes",value:h.notes,onChange:K=>_("notes",K),placeholder:"Additional notes about this deal...",rows:4}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[r.jsx(ee,{variant:"ghost",onClick:s,disabled:i,children:"Cancel"}),r.jsx(ee,{type:"submit",disabled:i,children:i?"Saving...":u?"Update Deal":"Create Deal"})]})]})},hv=({isOpen:u,onClose:l,deal:s})=>{const{getCompanyById:i,getDealById:c}=Ke(),[d,h]=Z.useState("details"),m=c(s.id)||s,x=i(m.companyId),g=(S,_)=>new Intl.NumberFormat("en-US",{style:"currency",currency:_}).format(S),p=S=>{switch(S){case"prospecting":return"bg-gray-100 text-gray-700";case"qualification":return"bg-blue-100 text-blue-700";case"proposal":return"bg-yellow-100 text-yellow-700";case"negotiation":return"bg-orange-100 text-orange-700";case"closed-won":return"bg-green-100 text-green-700";case"closed-lost":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},b=S=>{switch(S){case"low":return"bg-gray-100 text-gray-700";case"medium":return"bg-blue-100 text-blue-700";case"high":return"bg-orange-100 text-orange-700";case"critical":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},j=S=>{switch(S){case"active":return"bg-green-100 text-green-700";case"won":return"bg-green-100 text-green-700";case"lost":return"bg-red-100 text-red-700";case"on-hold":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return r.jsx(r.Fragment,{children:r.jsx(fa,{isOpen:u,onClose:l,title:`Deal: ${m.title}`,size:"xl",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"-mb-px flex space-x-8",children:r.jsx("button",{onClick:()=>h("details"),className:`py-2 px-1 border-b-2 font-medium text-sm ${d==="details"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Deal Details"})})}),d==="details"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Company"}),r.jsx("p",{className:"text-gray-600",children:x?.name||"Unknown Company"}),x?.email&&r.jsx("p",{className:"text-sm text-gray-500",children:x.email})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Deal Value"}),r.jsx("p",{className:"text-lg font-bold text-green-600",children:g(m.value,m.currency)}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Expected: ",g(m.value*(m.probability/100),m.currency)," (",m.probability,"%)"]})]})]})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stage"}),r.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${p(m.stage)}`,children:m.stage.replace("-"," ").toUpperCase()})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),r.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${b(m.priority)}`,children:m.priority.toUpperCase()})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),r.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${j(m.status)}`,children:m.status.toUpperCase()})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Source"}),r.jsx("p",{className:"text-gray-600",children:m.source.replace("-"," ")})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected Close Date"}),r.jsx("p",{className:"text-gray-600",children:m.expectedCloseDate.toLocaleDateString()}),m.actualCloseDate&&r.jsxs("p",{className:"text-sm text-gray-500",children:["Actual: ",m.actualCloseDate.toLocaleDateString()]})]})]}),m.description&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("p",{className:"text-gray-600",children:m.description})]}),m.tags&&m.tags.length>0&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:m.tags.map(S=>r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-primary-100 text-primary-700",children:S},S))})]}),m.notes&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),r.jsx("p",{className:"text-gray-600 whitespace-pre-wrap",children:m.notes})]}),r.jsx("div",{className:"pt-4 border-t border-gray-200",children:r.jsxs("div",{className:"flex justify-between text-sm text-gray-500",children:[r.jsxs("span",{children:["Created: ",m.createdAt.toLocaleDateString()]}),r.jsxs("span",{children:["Updated: ",m.updatedAt.toLocaleDateString()]})]})})]})]}),r.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:r.jsx(ee,{variant:"ghost",onClick:l,children:"Close"})})]})})})},mv=()=>{const{addDeal:u,updateDeal:l}=Ke(),[s,i]=Z.useState(!1),[c,d]=Z.useState(null),[h,m]=Z.useState(null),[x,g]=Z.useState(!1),p=()=>{d(null),i(!0)},b=D=>{d(D),i(!0)},j=D=>{m(D)},S=()=>{i(!1),d(null)},_=()=>{m(null)},R=async D=>{g(!0);try{c?await l(c.id,D):await u(D),S()}catch(N){console.error("Error saving deal:",N)}finally{g(!1)}};return r.jsxs(r.Fragment,{children:[r.jsx(dv,{onAddDeal:p,onEditDeal:b,onViewDeal:j}),r.jsx(fa,{isOpen:s,onClose:S,title:c?"Edit Deal":"Add New Deal",size:"xl",children:r.jsx(fv,{deal:c||void 0,onSubmit:R,onCancel:S,isLoading:x})}),h&&r.jsx(hv,{isOpen:!0,onClose:_,deal:h})]})},gv=()=>{const{projects:u,companies:l,getFilteredProjects:s,setSelectedProject:i,deleteProject:c}=Ke(),[d,h]=Z.useState({search:"",companyId:void 0,status:void 0,priority:void 0,type:void 0,projectManager:""}),[m,x]=Z.useState(!1),[g,p]=Z.useState("cards"),b=s(d),j=N=>{switch(N){case"active":return"bg-green-100 text-green-700";case"planning":return"bg-blue-100 text-blue-700";case"on-hold":return"bg-yellow-100 text-yellow-700";case"completed":return"bg-gray-100 text-gray-700";case"cancelled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},S=N=>{switch(N){case"critical":return"bg-red-100 text-red-700";case"high":return"bg-orange-100 text-orange-700";case"medium":return"bg-yellow-100 text-yellow-700";case"low":return"bg-gray-100 text-gray-700";default:return"bg-gray-100 text-gray-700"}},_=N=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(N),R=N=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(new Date(N)),D=(N,X)=>{window.confirm(`Are you sure you want to delete "${X}"? This action cannot be undone.`)&&c(N)};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Projects"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Manage your project portfolio and budgets"})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[r.jsx(ee,{variant:g==="cards"?"primary":"ghost",size:"sm",onClick:()=>p("cards"),children:"Cards"}),r.jsx(ee,{variant:g==="table"?"primary":"ghost",size:"sm",onClick:()=>p("table"),children:"Table"})]}),r.jsx(ee,{variant:"primary",onClick:()=>x(!0),children:"+ New Project"})]})]}),r.jsx(de,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:[r.jsx(te,{placeholder:"Search projects...",value:d.search||"",onChange:N=>h({...d,search:N})}),r.jsxs(ye,{value:d.companyId||"",onChange:N=>h({...d,companyId:N||void 0}),children:[r.jsx("option",{value:"",children:"All Companies"}),l.map(N=>r.jsx("option",{value:N.id,children:N.name},N.id))]}),r.jsxs(ye,{value:d.status||"",onChange:N=>h({...d,status:N||void 0}),children:[r.jsx("option",{value:"",children:"All Statuses"}),r.jsx("option",{value:"planning",children:"Planning"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"on-hold",children:"On Hold"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"cancelled",children:"Cancelled"})]}),r.jsxs(ye,{value:d.priority||"",onChange:N=>h({...d,priority:N||void 0}),children:[r.jsx("option",{value:"",children:"All Priorities"}),r.jsx("option",{value:"critical",children:"Critical"}),r.jsx("option",{value:"high",children:"High"}),r.jsx("option",{value:"medium",children:"Medium"}),r.jsx("option",{value:"low",children:"Low"})]}),r.jsxs(ye,{value:d.type||"",onChange:N=>h({...d,type:N||void 0}),children:[r.jsx("option",{value:"",children:"All Types"}),r.jsx("option",{value:"development",children:"Development"}),r.jsx("option",{value:"consulting",children:"Consulting"}),r.jsx("option",{value:"implementation",children:"Implementation"}),r.jsx("option",{value:"support",children:"Support"}),r.jsx("option",{value:"other",children:"Other"})]}),r.jsx(te,{placeholder:"Project Manager",value:d.projectManager||"",onChange:N=>h({...d,projectManager:N})})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(de,{hover:!0,children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-primary-600",children:u.length}),r.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Total Projects"}),r.jsxs("div",{className:"text-xs text-green-600 mt-2",children:[u.filter(N=>N.status==="active").length," active"]})]})}),r.jsx(de,{hover:!0,children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-green-600",children:_(u.reduce((N,X)=>N+X.budget.totalRevenue,0))}),r.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Total Revenue"}),r.jsx("div",{className:"text-xs text-green-600 mt-2",children:"Across all projects"})]})}),r.jsx(de,{hover:!0,children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-blue-600",children:_(u.reduce((N,X)=>N+X.budget.grossMargin,0))}),r.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Total Margin"}),r.jsx("div",{className:"text-xs text-blue-600 mt-2",children:"Gross profit"})]})}),r.jsx(de,{hover:!0,children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-purple-600",children:u.length>0?(u.reduce((N,X)=>N+X.budget.marginPercentage,0)/u.length).toFixed(1)+"%":"0%"}),r.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Avg Margin"}),r.jsx("div",{className:"text-xs text-purple-600 mt-2",children:"Average percentage"})]})})]}),g==="cards"?r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:b.length>0?b.map(N=>{const X=l.find(q=>q.id===N.companyId);return r.jsx(de,{hover:!0,className:"cursor-pointer",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:N.title}),r.jsx("p",{className:"text-sm text-gray-600",children:X?.name||"Unknown Company"}),N.createdFromDeal&&r.jsx("span",{className:"inline-flex items-center text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full mt-1",children:"Converted from Deal"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${j(N.status)}`,children:N.status}),r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${S(N.priority)}`,children:N.priority})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-1",children:[r.jsx("span",{children:"Progress"}),r.jsxs("span",{children:[N.progressPercentage,"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:`${N.progressPercentage}%`}})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 py-3 border-t border-b border-gray-100",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-bold text-green-600",children:_(N.budget.totalRevenue)}),r.jsx("div",{className:"text-xs text-gray-500",children:"Revenue"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-bold text-blue-600",children:_(N.budget.grossMargin)}),r.jsxs("div",{className:"text-xs text-gray-500",children:["Margin (",N.budget.marginPercentage.toFixed(1),"%)"]})]})]}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Timeline:"}),r.jsxs("span",{children:[R(N.startDate)," - ",R(N.endDate)]})]}),N.projectManager&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Manager:"}),r.jsx("span",{children:N.projectManager})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Resources:"}),r.jsxs("span",{children:[N.budget.resources.length," resources"]})]})]}),N.tags.length>0&&r.jsxs("div",{className:"flex flex-wrap gap-1",children:[N.tags.slice(0,3).map((q,L)=>r.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded",children:q},L)),N.tags.length>3&&r.jsxs("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded",children:["+",N.tags.length-3," more"]})]}),r.jsxs("div",{className:"flex space-x-2 pt-3 border-t border-gray-100",children:[r.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>i(N),className:"flex-1",children:"View Details"}),r.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>D(N.id,N.title),className:"text-red-600 hover:text-red-700",children:"Delete"})]})]})},N.id)}):r.jsx("div",{className:"col-span-full",children:r.jsx(de,{children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:""}),r.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"No projects found"}),r.jsx("p",{className:"text-gray-500 mb-6",children:u.length===0?"Get started by creating your first project or converting a deal.":"Try adjusting your filters to see more results."}),r.jsx(ee,{variant:"primary",onClick:()=>x(!0),children:"Create New Project"})]})})})}):r.jsx(de,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Revenue"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Margin"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timeline"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.length>0?b.map(N=>{const X=l.find(q=>q.id===N.companyId);return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.title}),r.jsxs("div",{className:"text-sm text-gray-500",children:[N.type,"  ",N.projectManager||"No manager"]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:X?.name||"Unknown"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${j(N.status)}`,children:N.status}),r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${S(N.priority)}`,children:N.priority})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:_(N.budget.totalRevenue)}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:_(N.budget.grossMargin)}),r.jsxs("div",{className:"text-sm text-gray-500",children:[N.budget.marginPercentage.toFixed(1),"%"]})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:r.jsx("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:`${N.progressPercentage}%`}})}),r.jsxs("span",{className:"text-sm text-gray-900",children:[N.progressPercentage,"%"]})]})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[r.jsx("div",{children:R(N.startDate)}),r.jsx("div",{children:R(N.endDate)})]}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[r.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>i(N),children:"View"}),r.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>D(N.id,N.title),className:"text-red-600 hover:text-red-700",children:"Delete"})]})]},N.id)}):r.jsx("tr",{children:r.jsxs("td",{colSpan:8,className:"px-6 py-12 text-center",children:[r.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:""}),r.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"No projects found"}),r.jsx("p",{className:"text-gray-500 mb-6",children:u.length===0?"Get started by creating your first project or converting a deal.":"Try adjusting your filters to see more results."}),r.jsx(ee,{variant:"primary",onClick:()=>x(!0),children:"Create New Project"})]})})})]})})}),r.jsx(W0,{isOpen:m,onClose:()=>x(!1)})]})},xv=()=>r.jsx(gv,{}),yv=()=>{const{projects:u,companies:l,addTimeEntry:s,updateTimeEntry:i,timeEntries:c}=Ke(),[d,h]=Z.useState(""),[m,x]=Z.useState(""),[g,p]=Z.useState(R(new Date)),[b,j]=Z.useState({}),[S,_]=Z.useState(!1);function R(ae){const ne=new Date(ae),T=ne.getDay(),I=ne.getDate()-T+(T===0?-6:1);return new Date(ne.setDate(I))}function D(ae){const ne=[];for(let T=0;T<7;T++){const I=new Date(ae);I.setDate(ae.getDate()+T),ne.push({date:I,hours:"",timeEntryId:void 0})}return ne}const N=D(g),X=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],q=u.find(ae=>ae.id===d),L=q?.budget.resources||[],H=L.find(ae=>ae.name===m);Z.useEffect(()=>{if(!d||!m)return;const ae=new Date(g);ae.setDate(g.getDate()+6);const ne=c.filter(I=>{const W=new Date(I.date);return I.projectId===d&&I.resourceName===m&&W>=g&&W<=ae}),T={};N.forEach((I,W)=>{const Ne=X[W],E=ne.find(Y=>new Date(Y.date).toDateString()===I.date.toDateString());T[Ne]={date:I.date,hours:E?(E.duration/60).toString():"",timeEntryId:E?.id}}),j(T)},[d,m,g,c]);const V=(ae,ne)=>{j(T=>({...T,[ae]:{...T[ae],hours:ne}}))},F=async()=>{if(!d||!m||!H){alert("Please select a project and resource first");return}_(!0);try{for(const[ae,ne]of Object.entries(b)){const T=parseFloat(ne.hours);if(isNaN(T)||T<=0)continue;const I={projectId:d,resourceName:m,description:`${ae} work`,startTime:new Date(ne.date.getTime()+540*60*1e3),duration:Math.round(T*60),date:ne.date,tags:[],billable:!0,hourlyRate:H.hourlyRate,currency:H.currency};ne.timeEntryId?await i(ne.timeEntryId,I):await s(I)}alert(" Timesheet saved successfully!")}catch(ae){console.error("Failed to save timesheet:",ae),alert(" Failed to save timesheet. Please try again.")}finally{_(!1)}},xe=ae=>{const ne=new Date(g);ne.setDate(g.getDate()+(ae==="next"?7:-7)),p(ne)},J=()=>{p(R(new Date))},K=ae=>ae.toLocaleDateString("en-US",{month:"short",day:"numeric"}),B=()=>Object.values(b).reduce((ae,ne)=>{const T=parseFloat(ne.hours)||0;return ae+T},0),ie=()=>H?B()*H.hourlyRate:0,le=u.map(ae=>{const ne=l.find(T=>T.id===ae.companyId);return{value:ae.id,label:`${ae.title} (${ne?.name||"Unknown Company"})`}});return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Weekly Timesheet"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Track your hours for the week"})]})}),r.jsxs(de,{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Project & Resource"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ye,{label:"Project",value:d,onChange:h,options:[{value:"",label:"Select a project..."},...le],required:!0}),q&&L.length>0&&r.jsx(ye,{label:"Resource",value:m,onChange:x,options:[{value:"",label:"Select a resource..."},...L.map(ae=>({value:ae.name,label:`${ae.name} (${ae.role}) - $${ae.hourlyRate}/hr`}))],required:!0})]}),q&&L.length===0&&r.jsxs("div",{className:"p-3 bg-red-50 rounded-lg text-sm text-red-700 mt-4",children:[r.jsx("div",{className:"font-medium",children:" No resources found in project budget"}),r.jsx("div",{children:"Please add resources to the project budget first."})]}),H&&r.jsxs("div",{className:"mt-4 p-3 bg-green-50 rounded-lg text-sm",children:[r.jsx("div",{className:"font-medium text-green-800",children:H.name}),r.jsxs("div",{className:"text-green-700",children:[H.role,"  $",H.hourlyRate,"/hour"]})]})]}),r.jsxs(de,{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>xe("prev"),children:" Previous Week"}),r.jsx(ee,{variant:"ghost",size:"sm",onClick:J,children:"Current Week"}),r.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>xe("next"),children:"Next Week "})]}),r.jsxs("div",{className:"text-lg font-semibold text-gray-800",children:["Week of ",K(g)," - ",K(new Date(g.getTime()+8640*60*1e3))]})]}),d&&m?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-8 gap-4",children:[r.jsx("div",{className:"font-medium text-gray-700",children:"Day"}),X.map((ae,ne)=>r.jsx("div",{className:`font-medium text-center ${ne>=5?"text-gray-400":"text-gray-700"}`,children:ae.substring(0,3)},ae))]}),r.jsxs("div",{className:"grid grid-cols-8 gap-4",children:[r.jsx("div",{className:"text-sm text-gray-500",children:"Date"}),N.map((ae,ne)=>r.jsx("div",{className:`text-sm text-center ${ne>=5?"text-gray-400":"text-gray-500"}`,children:K(ae.date)},ne))]}),r.jsxs("div",{className:"grid grid-cols-8 gap-4",children:[r.jsx("div",{className:"flex items-center text-sm font-medium text-gray-700",children:"Hours"}),X.map((ae,ne)=>r.jsx("div",{children:r.jsx(te,{type:"number",value:b[ae]?.hours||"",onChange:T=>V(ae,T),placeholder:"0",min:"0",max:"24",step:"0.25",className:`text-center ${ne>=5?"bg-gray-50 text-gray-400 placeholder-gray-300":""}`})},ae))]}),H&&r.jsxs("div",{className:"grid grid-cols-8 gap-4 pt-2 border-t",children:[r.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Cost"}),X.map((ae,ne)=>{const I=parseFloat(b[ae]?.hours||"0")*H.hourlyRate;return r.jsx("div",{className:`text-sm text-center ${ne>=5?"text-gray-400":"text-gray-600"}`,children:I>0?`$${I.toFixed(0)}`:"-"},ae)})]}),r.jsxs("div",{className:"grid grid-cols-8 gap-4 pt-4 border-t bg-blue-50 rounded-lg p-4",children:[r.jsx("div",{className:"font-bold text-blue-900",children:"Total"}),r.jsx("div",{className:"col-span-6 text-center",children:r.jsxs("span",{className:"font-bold text-blue-900",children:[B().toFixed(1)," hours"]})}),r.jsx("div",{className:"text-center",children:r.jsxs("span",{className:"font-bold text-blue-900",children:["$",ie().toFixed(0)]})})]}),r.jsx("div",{className:"flex justify-end pt-4",children:r.jsx(ee,{onClick:F,disabled:S||B()===0,variant:"primary",children:S?"Saving...":"Save Timesheet"})})]}):r.jsxs("div",{className:"text-center py-12 text-gray-500",children:[r.jsx("div",{className:"text-4xl mb-4",children:""}),r.jsx("p",{children:"Select a project and resource to start tracking time"})]})]})]})},pv=({entry:u,onSuccess:l,onCancel:s,preselectedProjectId:i})=>{const{projects:c,companies:d,addTimeEntry:h,updateTimeEntry:m,formatDuration:x}=Ke(),[g,p]=Z.useState({projectId:u?.projectId||i||"",resourceName:u?.resourceName||"",description:u?.description||"",startTime:u?.startTime||new Date,endTime:u?.endTime||new Date,duration:u?.duration,date:u?.date||new Date,tags:u?.tags||[],billable:u?.billable??!0,hourlyRate:u?.hourlyRate,currency:u?.currency||"USD"}),[b,j]=Z.useState({}),[S,_]=Z.useState(""),[R,D]=Z.useState(!1),[N,X]=Z.useState(!!u?.endTime);Z.useEffect(()=>{if(N&&g.startTime&&g.endTime){const T=Math.round((g.endTime.getTime()-g.startTime.getTime())/6e4);T>0&&p(I=>({...I,duration:T}))}},[g.startTime,g.endTime,N]);const q=()=>{const T={};g.projectId||(T.projectId="Project is required");const W=c.find(Ne=>Ne.id===g.projectId)?.budget.resources||[];return W.length>0&&!g.resourceName&&(T.resourceName="Resource selection is required for cost calculation"),W.length===0&&(T.projectId="Selected project must have resources in budget to track time"),g.description.trim()||(T.description="Description is required"),g.startTime||(T.startTime="Start time is required"),N?g.endTime?g.endTime<=g.startTime&&(T.endTime="End time must be after start time"):T.endTime="End time is required when using time range":(!g.duration||g.duration<=0)&&(T.duration="Duration must be greater than 0"),j(T),Object.keys(T).length===0},L=async T=>{if(T.preventDefault(),!!q()){D(!0);try{const I=ie.find(Ne=>Ne.name===g.resourceName),W={...g,endTime:N?g.endTime:void 0,duration:N?void 0:g.duration,billable:!!I,hourlyRate:I?I.hourlyRate:void 0,currency:I?I.currency:g.currency};u?await m(u.id,W):await h(W),l()}catch(I){console.error("Failed to save time entry:",I),alert("Failed to save time entry. Please try again.")}finally{D(!1)}}},H=(T,I)=>{p(W=>({...W,[T]:I})),b[T]&&j(W=>({...W,[T]:void 0}))},V=()=>{S.trim()&&!g.tags.includes(S.trim())&&(H("tags",[...g.tags,S.trim()]),_(""))},F=T=>{H("tags",g.tags.filter(I=>I!==T))},xe=T=>{T.key==="Enter"&&(T.preventDefault(),V())},J=c.map(T=>{const I=d.find(W=>W.id===T.companyId);return{value:T.id,label:`${T.title} (${I?.name||"Unknown Company"})`}}),K=c.find(T=>T.id===g.projectId),B=K?d.find(T=>T.id===K.companyId):null,ie=K?.budget.resources||[],le=ie.find(T=>T.name===g.resourceName),ae=T=>{const I=ie.find(W=>W.name===T);p(I?W=>({...W,resourceName:T,hourlyRate:I.hourlyRate,currency:I.currency,billable:!0}):W=>({...W,resourceName:T,hourlyRate:void 0,billable:!1}))},ne=g.duration?x(g.duration):"";return r.jsxs("form",{onSubmit:L,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx(ye,{label:"Project",value:g.projectId,onChange:T=>H("projectId",T),options:[{value:"",label:"Select a project..."},...J],required:!0,error:b.projectId}),K&&r.jsxs("div",{className:"mt-2 p-3 bg-gray-50 rounded-lg text-sm",children:[r.jsx("div",{className:"font-medium text-gray-800",children:K.title}),r.jsx("div",{className:"text-gray-600",children:B?.name}),r.jsxs("div",{className:"text-gray-500 mt-1",children:["Status: ",r.jsx("span",{className:"capitalize",children:K.status}),"  Progress: ",K.progressPercentage,"%"]})]})]}),K&&ie.length>0&&r.jsxs("div",{children:[r.jsx(ye,{label:"Resource",value:g.resourceName||"",onChange:ae,options:[{value:"",label:"Select a resource..."},...ie.map(T=>({value:T.name,label:`${T.name} (${T.role}) - ${T.rateType==="daily"?`$${T.dailyRate}/day`:`$${T.hourlyRate}/hr`}`}))],required:!0,error:b.resourceName}),le&&r.jsxs("div",{className:"mt-2 p-3 bg-green-50 rounded-lg text-sm",children:[r.jsx("div",{className:"font-medium text-green-800",children:le.name}),r.jsxs("div",{className:"text-green-700",children:[le.role," ",le.rateType==="daily"?`$${le.dailyRate}/day ($${le.hourlyRate}/hr)`:`$${le.hourlyRate}/hr`]}),r.jsx("div",{className:"text-green-600 mt-1",children:"Costs will be calculated automatically based on resource rate"})]})]}),K&&ie.length===0&&r.jsxs("div",{className:"p-3 bg-red-50 rounded-lg text-sm text-red-700",children:[r.jsx("div",{className:"font-medium",children:" No resources found in project budget"}),r.jsx("div",{children:"You need to add resources to the project budget before tracking time. Time entries require resource selection for cost calculation."})]}),r.jsx(da,{label:"Description",value:g.description,onChange:T=>H("description",T),placeholder:"What were you working on?",rows:3,required:!0,error:b.description}),r.jsx(te,{label:"Date",type:"date",value:g.date.toISOString().split("T")[0],onChange:T=>H("date",new Date(T)),required:!0}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("label",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"radio",checked:N,onChange:()=>X(!0),className:"text-primary-600"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Time Range"})]}),r.jsxs("label",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"radio",checked:!N,onChange:()=>X(!1),className:"text-primary-600"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Duration"})]})]}),N?r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(te,{label:"Start Time",type:"datetime-local",value:g.startTime.toISOString().slice(0,16),onChange:T=>H("startTime",new Date(T)),required:!0,error:b.startTime}),r.jsx(te,{label:"End Time",type:"datetime-local",value:g.endTime?.toISOString().slice(0,16)||"",onChange:T=>H("endTime",T?new Date(T):void 0),required:!0,error:b.endTime})]}):r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(te,{label:"Start Time",type:"datetime-local",value:g.startTime.toISOString().slice(0,16),onChange:T=>H("startTime",new Date(T)),required:!0,error:b.startTime}),r.jsxs("div",{children:[r.jsx(te,{label:"Duration (minutes)",type:"number",value:g.duration?.toString()||"",onChange:T=>H("duration",T?parseInt(T):void 0),min:"1",placeholder:"60",required:!0,error:b.duration}),g.duration&&r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:ne})]})]}),N&&g.duration&&r.jsxs("div",{className:"text-sm text-gray-600",children:["Duration: ",ne]})]}),le&&g.duration&&r.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:r.jsxs("div",{className:"text-sm text-blue-800",children:[r.jsx("div",{className:"font-medium text-blue-900 mb-2",children:" Automatic Cost Calculation"}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Resource:"})," ",le.name," (",le.role,")"]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Time:"})," ",(g.duration/60).toFixed(2)," hours"]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Rate:"})," $",le.hourlyRate,"/hour",le.rateType==="daily"&&r.jsxs("span",{className:"text-blue-600",children:[" ($",le.dailyRate,"/day)"]})]}),r.jsxs("div",{className:"border-t border-blue-300 pt-2 mt-2",children:[r.jsx("span",{className:"font-medium text-blue-900",children:"Total Cost:"}),r.jsxs("span",{className:"font-bold text-lg ml-2 text-blue-900",children:["$",(g.duration/60*le.hourlyRate).toFixed(2)]})]})]})]})}),!le&&K&&ie.length>0&&r.jsx("div",{className:"p-3 bg-gray-50 rounded-lg text-sm text-gray-600 text-center",children:"Select a resource above to see automatic cost calculation"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tags"}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:g.tags.map(T=>r.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-primary-100 text-primary-700",children:[T,r.jsx("button",{type:"button",onClick:()=>F(T),className:"ml-1 text-primary-500 hover:text-primary-700",children:""})]},T))}),r.jsxs("div",{className:"flex",children:[r.jsx("input",{type:"text",value:S,onChange:T=>_(T.target.value),onKeyPress:xe,placeholder:"Add a tag...",className:"block w-full px-3 py-2 border border-gray-300 rounded-l-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),r.jsx("button",{type:"button",onClick:V,className:"px-4 py-2 bg-primary-600 text-white rounded-r-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",children:"Add"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[r.jsx(ee,{variant:"ghost",onClick:s,disabled:R,children:"Cancel"}),r.jsx(ee,{type:"submit",disabled:R,children:R?"Saving...":u?"Update Entry":"Add Entry"})]})]})},vv=({entries:u,showProject:l=!1,compact:s=!1})=>{const{projects:i,companies:c,deleteTimeEntry:d,formatDuration:h}=Ke(),[m,x]=Z.useState(null),[g,p]=Z.useState(!1),b=X=>{x(X),p(!0)},j=async X=>{if(window.confirm("Are you sure you want to delete this time entry?"))try{await d(X)}catch{alert("Failed to delete time entry. Please try again.")}},S=()=>{x(null),p(!1)},_=X=>{const q={};return X.forEach(L=>{const H=L.date.toDateString();q[H]||(q[H]=[]),q[H].push(L)}),Object.entries(q).sort(([L],[H])=>new Date(H).getTime()-new Date(L).getTime()).map(([L,H])=>({date:new Date(L),entries:H.sort((V,F)=>F.startTime.getTime()-V.startTime.getTime())}))},R=X=>X.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),D=X=>{const q=new Date,L=new Date(q);return L.setDate(L.getDate()-1),X.toDateString()===q.toDateString()?"Today":X.toDateString()===L.toDateString()?"Yesterday":X.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})};if(u.length===0)return r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx("div",{className:"text-4xl mb-4",children:""}),r.jsx("p",{children:"No time entries found."}),r.jsx("p",{className:"text-sm mt-1",children:"Start tracking time to see entries here."})]});const N=_(u);return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"space-y-6",children:N.map(({date:X,entries:q})=>{const L=q.reduce((V,F)=>V+F.duration,0),H=q.filter(V=>V.billable).reduce((V,F)=>V+F.duration,0);return r.jsxs("div",{children:[!s&&r.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b border-gray-200",children:[r.jsx("h4",{className:"font-medium text-gray-800",children:D(X)}),r.jsxs("div",{className:"text-sm text-gray-500",children:[h(L)," total  ",h(H)," billable"]})]}),r.jsx("div",{className:"space-y-2",children:q.map(V=>{const F=i.find(K=>K.id===V.projectId),xe=F?c.find(K=>K.id===F.companyId):null,J=V.billable&&V.hourlyRate?V.duration/60*V.hourlyRate:0;return r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${V.isRunning?"border-green-200 bg-green-50":"border-gray-200 bg-white"} hover:shadow-sm transition-shadow`,children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[V.isRunning&&r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),r.jsx("p",{className:"font-medium text-gray-800",children:V.description}),V.billable&&r.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-700",children:"Billable"})]}),(l||s)&&F&&r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[F.title," ",xe&&` ${xe.name}`]}),r.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[r.jsxs("span",{children:[R(V.startTime),V.endTime&&` - ${R(V.endTime)}`]}),V.tags.length>0&&r.jsx("div",{className:"flex items-center space-x-1",children:V.tags.map((K,B)=>r.jsx("span",{className:"px-2 py-1 text-xs rounded bg-gray-100 text-gray-600",children:K},B))})]})]}),r.jsxs("div",{className:"text-right ml-4",children:[r.jsx("div",{className:"font-medium text-gray-800",children:h(V.duration)}),J>0&&r.jsxs("div",{className:"text-sm text-green-600",children:["$",J.toFixed(2)]}),V.hourlyRate&&r.jsxs("div",{className:"text-xs text-gray-500",children:["$",V.hourlyRate,"/hr"]})]})]})}),!s&&!V.isRunning&&r.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[r.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>b(V),children:"Edit"}),r.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>j(V.id),className:"text-red-600 hover:text-red-700",children:"Delete"})]})]},V.id)})})]},X.toDateString())})}),r.jsx(fa,{isOpen:g,onClose:S,title:"Edit Time Entry",children:m&&r.jsx(pv,{entry:m,onSuccess:S,onCancel:S})})]})},bv=()=>{const{projects:u,companies:l,timeEntries:s}=Ke(),[i,c]=Z.useState("timesheet"),d=()=>{const g=new Map;return u.forEach(p=>{const b=l.find(j=>j.id===p.companyId);g.set(p.id,{project:p,company:b,totalHours:0,billableHours:0,totalRevenue:0,entries:[],budgetedRevenue:p.budget?.totalRevenue||0,budgetedHours:p.budget?.resources?.reduce((j,S)=>j+S.hoursAllocated,0)||0,budgetedCosts:p.budget?.totalResourceCost||0,budgetedMargin:p.budget?.grossMargin||0})}),s.forEach(p=>{const b=g.get(p.projectId);if(b){const j=p.duration/60;b.totalHours+=j,b.entries.push(p),p.billable&&(b.billableHours+=j,p.hourlyRate&&(b.totalRevenue+=j*p.hourlyRate))}}),Array.from(g.values()).map(p=>{const b=p.entries.reduce((D,N)=>N.billable&&N.hourlyRate?D+N.duration/60*N.hourlyRate:D,0),j=p.budgetedRevenue-b,S=p.budgetedRevenue>0?p.budgetedMargin/p.budgetedRevenue*100:0,_=p.budgetedRevenue>0?j/p.budgetedRevenue*100:0,R=p.budgetedHours>0?p.totalHours/p.budgetedHours*100:0;return{...p,actualCosts:b,actualMargin:j,budgetedMarginPercentage:S,actualMarginPercentage:_,marginVariance:j-p.budgetedMargin,hoursUtilization:R,hoursVariance:p.totalHours-p.budgetedHours}}).filter(p=>p.totalHours>0||p.budgetedHours>0)},h=g=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(g),m=g=>`${g.toFixed(1)}h`,x=[{key:"timesheet",label:"Weekly Timesheet",icon:""},{key:"entries",label:"Time Entries",icon:""},{key:"reports",label:"Project Reports",icon:""}];return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Time Tracking"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Track hours worked and monitor project margins."})]})}),r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"-mb-px flex space-x-8",children:x.map(g=>r.jsxs("button",{onClick:()=>c(g.key),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${i===g.key?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx("span",{children:g.icon}),r.jsx("span",{children:g.label})]},g.key))})}),i==="timesheet"&&r.jsx(yv,{}),i==="entries"&&r.jsxs(de,{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Time Entries (",s.length,")"]}),r.jsxs("div",{className:"text-sm text-gray-500",children:["Total: ",m(s.reduce((g,p)=>g+p.duration/60,0))]})]}),r.jsx(vv,{entries:s.sort((g,p)=>new Date(p.date).getTime()-new Date(g.date).getTime()),showProject:!0})]}),i==="reports"&&r.jsx("div",{className:"space-y-6",children:r.jsxs(de,{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-6",children:"Project Margin Analysis"}),d().length>0?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hours"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Revenue"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Budgeted Margin"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actual Margin"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Variance"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d().map(g=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:g.project.title}),r.jsx("div",{className:"text-sm text-gray-500",children:g.company?.name})]})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsxs("div",{className:"text-sm text-gray-900",children:[m(g.totalHours)," / ",m(g.budgetedHours)]}),r.jsxs("div",{className:"text-xs text-gray-500",children:[g.hoursUtilization.toFixed(0),"% utilization"]})]}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm text-gray-900",children:h(g.totalRevenue)}),r.jsxs("div",{className:"text-xs text-gray-500",children:["of ",h(g.budgetedRevenue)," budgeted"]})]}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm text-gray-900",children:h(g.budgetedMargin)}),r.jsxs("div",{className:"text-xs text-gray-500",children:[g.budgetedMarginPercentage.toFixed(1),"%"]})]}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:`text-sm font-medium ${g.actualMargin>=0?"text-green-600":"text-red-600"}`,children:h(g.actualMargin)}),r.jsxs("div",{className:"text-xs text-gray-500",children:[g.actualMarginPercentage.toFixed(1),"%"]})]}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsxs("div",{className:`text-sm font-medium ${g.marginVariance>=0?"text-green-600":"text-red-600"}`,children:[g.marginVariance>=0?"+":"",h(g.marginVariance)]}),r.jsx("div",{className:"text-xs text-gray-500",children:"vs budget"})]})]},g.project.id))})]})}):r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx("div",{className:"text-4xl mb-4",children:""}),r.jsx("p",{children:"No project data available."}),r.jsx("p",{className:"text-sm mt-1",children:"Add time entries to see margin analysis."})]})]})})]})},jv=({invoices:u,onCreateInvoice:l,onViewInvoice:s,onEditInvoice:i,onMarkPaid:c,onSendReminder:d,isLoading:h=!1})=>{const[m,x]=Z.useState({search:"",status:void 0,paymentStatus:void 0,overdue:void 0}),g=u.filter(D=>{if(m.search){const N=m.search.toLowerCase();if(!D.invoiceNumber.toLowerCase().includes(N)&&!D.description.toLowerCase().includes(N))return!1}return!(m.status&&D.status!==m.status||m.paymentStatus&&D.paymentStatus!==m.paymentStatus||m.overdue&&!(D.status==="overdue"||D.paymentStatus!=="paid"&&new Date>D.dueDate))}),p={total:u.length,sent:u.filter(D=>D.status==="sent").length,paid:u.filter(D=>D.paymentStatus==="paid").length,overdue:u.filter(D=>D.status==="overdue"||D.paymentStatus!=="paid"&&new Date>D.dueDate).length,totalAmount:u.reduce((D,N)=>D+N.totalAmount,0),paidAmount:u.reduce((D,N)=>D+N.payments.reduce((X,q)=>X+q.amount,0),0),overdueAmount:u.filter(D=>D.status==="overdue"||D.paymentStatus!=="paid"&&new Date>D.dueDate).reduce((D,N)=>D+(N.totalAmount-N.payments.reduce((X,q)=>X+q.amount,0)),0)},b=D=>{switch(D){case"draft":return"bg-gray-100 text-gray-700";case"sent":return"bg-blue-100 text-blue-700";case"viewed":return"bg-yellow-100 text-yellow-700";case"partial":return"bg-orange-100 text-orange-700";case"paid":return"bg-green-100 text-green-700";case"overdue":return"bg-red-100 text-red-700";case"cancelled":return"bg-gray-100 text-gray-700";default:return"bg-gray-100 text-gray-700"}},j=D=>{switch(D){case"pending":return"bg-yellow-100 text-yellow-700";case"partial":return"bg-orange-100 text-orange-700";case"paid":return"bg-green-100 text-green-700";case"failed":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},S=D=>{if(D.paymentStatus==="paid")return 0;const X=new Date().getTime()-D.dueDate.getTime();return Math.ceil(X/(1e3*60*60*24))},_=[{value:"",label:"All Statuses"},{value:"draft",label:"Draft"},{value:"sent",label:"Sent"},{value:"viewed",label:"Viewed"},{value:"partial",label:"Partial"},{value:"paid",label:"Paid"},{value:"overdue",label:"Overdue"},{value:"cancelled",label:"Cancelled"}],R=[{value:"",label:"All Payment Status"},{value:"pending",label:"Pending"},{value:"partial",label:"Partial"},{value:"paid",label:"Paid"},{value:"failed",label:"Failed"}];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Invoices"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Manage project invoices and payments"})]}),r.jsx(ee,{onClick:l,disabled:h,children:"+ Create Invoice"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(de,{padding:"md",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-primary-600",children:p.total}),r.jsx("div",{className:"text-sm text-gray-500",children:"Total Invoices"})]})}),r.jsx(de,{padding:"md",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",p.paidAmount.toLocaleString()]}),r.jsx("div",{className:"text-sm text-gray-500",children:"Paid Amount"})]})}),r.jsx(de,{padding:"md",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:["$",(p.totalAmount-p.paidAmount).toLocaleString()]}),r.jsx("div",{className:"text-sm text-gray-500",children:"Outstanding"})]})}),r.jsx(de,{padding:"md",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-2xl font-bold text-red-600",children:["$",p.overdueAmount.toLocaleString()]}),r.jsxs("div",{className:"text-sm text-gray-500",children:["Overdue (",p.overdue,")"]})]})})]}),r.jsx(de,{padding:"md",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(te,{placeholder:"Search invoices...",value:m.search||"",onChange:D=>x({...m,search:D})}),r.jsx(ye,{value:m.status||"",onChange:D=>x({...m,status:D||void 0}),options:_}),r.jsx(ye,{value:m.paymentStatus||"",onChange:D=>x({...m,paymentStatus:D||void 0}),options:R}),r.jsxs("label",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",checked:m.overdue||!1,onChange:D=>x({...m,overdue:D.target.checked||void 0}),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Show only overdue"})]})]})}),g.length===0?r.jsxs(de,{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 mb-4",children:r.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No invoices found"}),r.jsx("p",{className:"text-gray-400 mb-4",children:Object.values(m).some(D=>D)?"Try adjusting your filters or search terms.":"Get started by creating your first invoice."}),r.jsx(ee,{onClick:l,children:"+ Create Your First Invoice"})]}):r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:g.map(D=>{const N=S(D),X=N>0,q=D.payments.reduce((H,V)=>H+V.amount,0),L=D.totalAmount-q;return r.jsx(de,{hover:!0,className:`relative ${X?"border-red-200 bg-red-50":""}`,children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{children:r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:D.invoiceNumber}),r.jsx("p",{className:"text-sm text-gray-600 truncate",children:D.description})]}),r.jsxs("div",{className:"flex flex-col space-y-1 items-end",children:[r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${b(D.status)}`,children:D.status.replace("-"," ")}),r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${j(D.paymentStatus)}`,children:D.paymentStatus})]})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Total Amount:"}),r.jsxs("span",{className:"font-semibold text-gray-800",children:["$",D.totalAmount.toLocaleString()]})]}),q>0&&r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Paid:"}),r.jsxs("span",{className:"font-semibold text-green-600",children:["$",q.toLocaleString()]})]}),L>0&&r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Outstanding:"}),r.jsxs("span",{className:`font-semibold ${X?"text-red-600":"text-orange-600"}`,children:["$",L.toLocaleString()]})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Issue Date:"}),r.jsx("span",{className:"text-gray-800",children:D.issueDate.toLocaleDateString()})]}),r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Due Date:"}),r.jsxs("span",{className:`${X?"text-red-600 font-medium":"text-gray-800"}`,children:[D.dueDate.toLocaleDateString(),X&&` (${N} days overdue)`]})]}),D.paidDate&&r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Paid Date:"}),r.jsx("span",{className:"text-green-600 font-medium",children:D.paidDate.toLocaleDateString()})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2 border-t border-gray-100",children:[r.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>s(D),className:"text-xs",children:"View"}),r.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>i(D),className:"text-xs",disabled:D.status==="paid",children:"Edit"}),D.paymentStatus!=="paid"&&r.jsxs(r.Fragment,{children:[r.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>c(D.id,L),className:"text-xs text-green-600 hover:bg-green-50",children:"Mark Paid"}),r.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>d(D.id),className:"text-xs text-blue-600 hover:bg-blue-50",disabled:D.status==="draft",children:"Send Reminder"})]})]})]})},D.id)})})]})},_v=({projectId:u,projectTitle:l,companyName:s,initialData:i,onSubmit:c,onCancel:d,isLoading:h=!1})=>{const[m,x]=Z.useState({projectId:u,description:`Invoice for ${l}`,issueDate:new Date,lineItems:[{description:l,quantity:1,unitPrice:0,totalPrice:0,category:"fixed"}],taxRate:0,...i}),[g,p]=Z.useState(0),[b,j]=Z.useState(0),[S,_]=Z.useState(0);Z.useEffect(()=>{const L=m.lineItems.reduce((xe,J)=>xe+J.totalPrice,0),H=L*(m.taxRate/100),V=m.discountAmount||0,F=L+H-V;p(L),j(H),_(F)},[m.lineItems,m.taxRate,m.discountAmount]);const R=L=>{L.preventDefault(),c(m)},D=()=>{x(L=>({...L,lineItems:[...L.lineItems,{description:"",quantity:1,unitPrice:0,totalPrice:0,category:"fixed"}]}))},N=(L,H)=>{x(V=>({...V,lineItems:V.lineItems.map((F,xe)=>{if(xe===L){const J={...F,...H};return J.totalPrice=J.quantity*J.unitPrice,J}return F})}))},X=L=>{m.lineItems.length>1&&x(H=>({...H,lineItems:H.lineItems.filter((V,F)=>F!==L)}))},q=[{value:"time",label:"Time/Hours"},{value:"expense",label:"Expense"},{value:"fixed",label:"Fixed Price"},{value:"milestone",label:"Milestone"}];return r.jsxs("form",{onSubmit:R,className:"space-y-6",children:[r.jsxs(de,{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:" Invoice Details"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client"}),r.jsx("div",{className:"p-3 bg-gray-50 rounded-md text-gray-800 font-medium",children:s})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project"}),r.jsx("div",{className:"p-3 bg-gray-50 rounded-md text-gray-600",children:l})]}),r.jsx(te,{label:"Invoice Description",value:m.description,onChange:L=>x({...m,description:L}),placeholder:"Description for this invoice",required:!0}),r.jsx(te,{label:"Issue Date",type:"date",value:m.issueDate.toISOString().split("T")[0],onChange:L=>x({...m,issueDate:new Date(L)}),required:!0}),m.dueDate&&r.jsx(te,{label:"Due Date (Optional)",type:"date",value:m.dueDate.toISOString().split("T")[0],onChange:L=>x({...m,dueDate:new Date(L)})})]})]}),r.jsxs(de,{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:" Line Items"}),r.jsx(ee,{type:"button",variant:"outline",onClick:D,disabled:h,children:"+ Add Item"})]}),r.jsx("div",{className:"space-y-4",children:m.lineItems.map((L,H)=>r.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-end",children:[r.jsx("div",{className:"md:col-span-2",children:r.jsx(te,{label:"Description",value:L.description,onChange:V=>N(H,{description:V}),placeholder:"Item description",required:!0})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),r.jsx("select",{value:L.category,onChange:V=>N(H,{category:V.target.value}),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-primary-500 focus:border-primary-500",children:q.map(V=>r.jsx("option",{value:V.value,children:V.label},V.value))})]}),r.jsx("div",{children:r.jsx(te,{label:"Quantity",type:"number",value:L.quantity.toString(),onChange:V=>N(H,{quantity:parseFloat(V)||1}),min:"0.01",step:"0.01",required:!0})}),r.jsx("div",{children:r.jsx(te,{label:"Unit Price ($)",type:"number",value:L.unitPrice.toString(),onChange:V=>N(H,{unitPrice:parseFloat(V)||0}),min:"0",step:"0.01",required:!0})}),r.jsxs("div",{className:"flex items-end space-x-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total"}),r.jsxs("div",{className:"p-2 bg-gray-50 rounded-md text-gray-800 font-medium",children:["$",L.totalPrice.toFixed(2)]})]}),m.lineItems.length>1&&r.jsx(ee,{type:"button",variant:"destructive",size:"sm",onClick:()=>X(H),disabled:h,children:""})]})]})},H))})]}),r.jsxs(de,{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:" Invoice Totals"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(te,{label:"Tax Rate (%)",type:"number",value:m.taxRate.toString(),onChange:L=>x({...m,taxRate:parseFloat(L)||0}),min:"0",max:"100",step:"0.01"}),r.jsx(te,{label:"Discount Amount ($)",type:"number",value:m.discountAmount?.toString()||"",onChange:L=>x({...m,discountAmount:parseFloat(L)||void 0}),min:"0",step:"0.01"})]}),r.jsx("div",{className:"mt-6 border-t border-gray-200 pt-4",children:r.jsxs("div",{className:"space-y-2 text-right",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),r.jsxs("span",{className:"font-medium",children:["$",g.toFixed(2)]})]}),m.taxRate>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"text-gray-600",children:["Tax (",m.taxRate,"%):"]}),r.jsxs("span",{className:"font-medium",children:["$",b.toFixed(2)]})]}),m.discountAmount&&m.discountAmount>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Discount:"}),r.jsxs("span",{className:"font-medium text-green-600",children:["-$",m.discountAmount.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between text-lg font-bold border-t border-gray-200 pt-2",children:[r.jsx("span",{children:"Total:"}),r.jsxs("span",{className:"text-primary-600",children:["$",S.toFixed(2)]})]})]})})]}),r.jsxs(de,{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:" Notes"}),r.jsx("textarea",{value:m.notes||"",onChange:L=>x({...m,notes:L.target.value}),placeholder:"Additional notes for this invoice...",rows:4,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-primary-500 focus:border-primary-500"})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx(ee,{type:"button",variant:"outline",onClick:d,disabled:h,children:"Cancel"}),r.jsx(ee,{type:"submit",variant:"primary",disabled:h||S<=0,children:h?"Creating...":"Create Invoice"})]})]})},wv=()=>{const{projects:u,companies:l,getCompanyById:s,getProjectById:i}=Ke(),[c]=Z.useState([{id:"1",projectId:u[0]?.id||"1",companyId:u[0]?.companyId||"1",invoiceNumber:"INV-2024-001",description:"Website Development Project - Final Invoice",subtotal:45e3,taxRate:10,taxAmount:4500,totalAmount:49500,currency:"USD",issueDate:new Date("2024-01-15"),dueDate:new Date("2024-03-15"),status:"sent",paymentStatus:"pending",lineItems:[{id:"1",description:"Frontend Development",quantity:200,unitPrice:150,totalPrice:3e4,category:"time"},{id:"2",description:"Backend Development",quantity:100,unitPrice:150,totalPrice:15e3,category:"time"}],payments:[],remindersSent:[{id:"1",invoiceId:"1",type:"due-soon",sentDate:new Date("2024-03-10"),method:"telegram",status:"sent",daysFromDue:5}],createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")},{id:"2",projectId:u[1]?.id||"2",companyId:u[1]?.companyId||"2",invoiceNumber:"INV-2024-002",description:"CRM System Development - Milestone 1",subtotal:25e3,taxRate:10,taxAmount:2500,totalAmount:27500,currency:"USD",issueDate:new Date("2024-02-01"),dueDate:new Date("2024-01-20"),status:"overdue",paymentStatus:"pending",lineItems:[{id:"3",description:"Project Setup & Planning",quantity:1,unitPrice:25e3,totalPrice:25e3,category:"milestone"}],payments:[],remindersSent:[{id:"2",invoiceId:"2",type:"overdue",sentDate:new Date("2024-01-25"),method:"telegram",status:"sent",daysFromDue:-5}],createdAt:new Date("2024-02-01"),updatedAt:new Date("2024-02-01")}]),[d,h]=Z.useState(!1),[m,x]=Z.useState(""),[g,p]=Z.useState(!1),b=()=>{if(u.length===0){alert("Please create a project first before generating invoices.");return}x(u[0].id),h(!0)},j=async q=>{p(!0);try{console.log("Creating invoice:",q),await new Promise(L=>setTimeout(L,1e3)),alert("Invoice created successfully!"),h(!1),x("")}catch(L){console.error("Failed to create invoice:",L),alert("Failed to create invoice. Please try again.")}finally{p(!1)}},S=q=>{console.log("Viewing invoice:",q),alert(`Viewing invoice ${q.invoiceNumber}`)},_=q=>{console.log("Editing invoice:",q),alert(`Editing invoice ${q.invoiceNumber}`)},R=async(q,L)=>{console.log("Marking invoice as paid:",q,L),alert(`Marked invoice as paid: $${L.toLocaleString()}`)},D=async q=>{console.log("Sending reminder for invoice:",q),alert("Payment reminder sent successfully!")},X=(()=>{if(!m)return null;const q=i(m);if(!q)return null;const L=s(q.companyId);return{project:q,company:L}})();return r.jsxs(r.Fragment,{children:[r.jsx(jv,{invoices:c,onCreateInvoice:b,onViewInvoice:S,onEditInvoice:_,onMarkPaid:R,onSendReminder:D,isLoading:g}),r.jsx(fa,{isOpen:d,onClose:()=>h(!1),title:"Create New Invoice",size:"xl",children:X&&r.jsx(_v,{projectId:X.project.id,projectTitle:X.project.title,companyName:X.company?.name||"Unknown Company",onSubmit:j,onCancel:()=>h(!1),isLoading:g})})]})},Sv=()=>{const[u,l]=Z.useState(null),[s,i]=Z.useState(!1),[c,d]=Z.useState(""),[h,m]=Z.useState(""),[x,g]=Z.useState(""),[p,b]=Z.useState(""),[j,S]=Z.useState(""),[_,R]=Z.useState(""),[D,N]=Z.useState(""),[X,q]=Z.useState(!1),[L,H]=Z.useState(!1),[V,F]=Z.useState("");Z.useEffect(()=>{const le=localStorage.getItem("crm_user"),ae=localStorage.getItem("crm_logged_in");if(le&&ae==="true")try{const ne=JSON.parse(le);l({...ne,createdAt:new Date(ne.createdAt),updatedAt:new Date(ne.updatedAt),lastLogin:ne.lastLogin?new Date(ne.lastLogin):void 0}),i(!0)}catch(ne){console.error("Failed to parse saved user data:",ne),localStorage.removeItem("crm_user"),localStorage.removeItem("crm_logged_in")}},[]);const xe=async()=>{if(!c.trim()||!x.trim()){F("Username and password are required");return}H(!0),F("");try{const le=await Se.createUser({username:c.trim(),email:h.trim()||void 0,password:x.trim(),firstName:p.trim()||void 0,lastName:j.trim()||void 0});localStorage.setItem("crm_user",JSON.stringify(le)),localStorage.setItem("crm_logged_in","true"),l(le),i(!0),d(""),m(""),g(""),b(""),S(""),q(!1)}catch(le){console.error("Registration failed:",le),le.message?.includes("duplicate key")?F("Username or email already exists"):F(le.message||"Registration failed. Please try again.")}finally{H(!1)}},J=async()=>{if(!_.trim()||!D.trim()){F("Username and password are required");return}H(!0),F("");try{const le=await Se.loginUser(_.trim(),D.trim());localStorage.setItem("crm_user",JSON.stringify(le)),localStorage.setItem("crm_logged_in","true"),l(le),i(!0),R(""),N("")}catch(le){console.error("Login failed:",le),F(le.message||"Login failed. Please check your credentials.")}finally{H(!1)}},K=()=>{localStorage.setItem("crm_logged_in","false"),l(null),i(!1),R("")},B=async()=>{if(!c.trim()){F("Please enter a new username");return}H(!0),F("");try{const le=await Se.updateUser(u.id,{username:c.trim()});localStorage.setItem("crm_user",JSON.stringify(le)),l(le),d(""),alert("Username updated successfully!")}catch(le){console.error("Update failed:",le),le.message?.includes("duplicate key")?F("Username already exists"):F(le.message||"Update failed. Please try again.")}finally{H(!1)}},ie=async()=>{if(confirm("Are you sure you want to delete your account? This will permanently remove your user profile from the cloud database but keep your CRM data.")){H(!0),F("");try{await Se.deleteUser(u.id),localStorage.removeItem("crm_user"),localStorage.removeItem("crm_logged_in"),l(null),i(!1),alert("Account deleted successfully.")}catch(le){console.error("Delete failed:",le),F(le.message||"Failed to delete account. Please try again.")}finally{H(!1)}}};return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Settings"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Manage your user account and preferences"})]})}),s?r.jsxs("div",{className:"space-y-6",children:[r.jsxs(de,{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:" User Profile"}),r.jsx("div",{className:"space-y-4",children:r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-green-800",children:"Logged in as"}),r.jsx("p",{className:"text-green-700 text-lg",children:u?.username}),u?.email&&r.jsx("p",{className:"text-green-600 text-sm",children:u.email}),(u?.firstName||u?.lastName)&&r.jsx("p",{className:"text-green-600 text-sm",children:[u.firstName,u.lastName].filter(Boolean).join(" ")}),r.jsxs("p",{className:"text-green-600 text-xs",children:["Account created: ",u?.createdAt?new Date(u.createdAt).toLocaleDateString():"Unknown"]}),u?.lastLogin&&r.jsxs("p",{className:"text-green-600 text-xs",children:["Last login: ",new Date(u.lastLogin).toLocaleDateString()]})]}),r.jsx(ee,{onClick:K,variant:"ghost",size:"sm",children:"Logout"})]})})})]}),r.jsxs(de,{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:" Update Profile"}),V&&r.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:r.jsx("p",{className:"text-red-600 text-sm",children:V})}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(te,{label:"New Username",value:c,onChange:d,placeholder:`Current: ${u?.username}`,disabled:L}),r.jsx(ee,{onClick:B,variant:"primary",disabled:!c.trim()||L,children:L?"Updating...":"Update Username"})]})]}),r.jsxs(de,{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:" CRM Status"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-blue-800",children:"Cloud Database"}),r.jsx("div",{className:"text-blue-600 text-sm",children:"All CRM data and user accounts saved to Supabase"})]}),r.jsx("div",{className:"text-blue-500",children:" Connected"})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-green-800",children:"Weekly Timesheet"}),r.jsx("div",{className:"text-green-600 text-sm",children:"Time tracking with cloud persistence"})]}),r.jsx("div",{className:"text-green-500",children:" Active"})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-purple-800",children:"User Authentication"}),r.jsx("div",{className:"text-purple-600 text-sm",children:"Cloud-based user management with encrypted passwords"})]}),r.jsxs("div",{className:"text-purple-500",children:[" ",u?.username]})]})]})]}),r.jsxs(de,{children:[r.jsx("h3",{className:"text-lg font-semibold text-red-600 mb-4",children:" Danger Zone"}),r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"p-4 border border-red-200 rounded-lg bg-red-50",children:[r.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Delete Account"}),r.jsx("p",{className:"text-red-600 text-sm mb-3",children:"This will permanently delete your user profile from the cloud database but keep all your CRM data (companies, projects, time entries) intact."}),r.jsx(ee,{onClick:ie,variant:"destructive",size:"sm",disabled:L,children:L?"Deleting...":"Delete Account"})]})})]})]}):r.jsx("div",{className:"max-w-md mx-auto",children:r.jsxs(de,{children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:X?"Create Account":"Welcome Back"}),r.jsx("p",{className:"text-gray-600",children:X?"Set up your CRM user profile":"Login to access your CRM settings"})]}),V&&r.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:r.jsx("p",{className:"text-red-600 text-sm",children:V})}),X?r.jsxs("div",{className:"space-y-4",children:[r.jsx(te,{label:"Username *",value:c,onChange:d,placeholder:"Enter your username",required:!0,disabled:L}),r.jsx(te,{label:"Password *",type:"password",value:x,onChange:g,placeholder:"Enter your password",required:!0,disabled:L}),r.jsx(te,{label:"Email (optional)",type:"email",value:h,onChange:m,placeholder:"Enter your email",disabled:L}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(te,{label:"First Name (optional)",value:p,onChange:b,placeholder:"First name",disabled:L}),r.jsx(te,{label:"Last Name (optional)",value:j,onChange:S,placeholder:"Last name",disabled:L})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx(ee,{onClick:xe,variant:"primary",className:"flex-1",disabled:L,children:L?"Creating...":"Create Account"}),r.jsx(ee,{onClick:()=>{q(!1),F("")},variant:"ghost",className:"flex-1",disabled:L,children:"Back to Login"})]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx(te,{label:"Username",value:_,onChange:R,placeholder:"Enter your username",required:!0,disabled:L}),r.jsx(te,{label:"Password",type:"password",value:D,onChange:N,placeholder:"Enter your password",required:!0,disabled:L}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx(ee,{onClick:J,variant:"primary",className:"flex-1",disabled:L,children:L?"Logging in...":"Login"}),r.jsx(ee,{onClick:()=>{q(!0),F("")},variant:"ghost",className:"flex-1",disabled:L,children:"Create Account"})]})]})]})})]})};function Nv(){const[u,l]=Z.useState("dashboard"),[s,i]=Z.useState(!1),{initializeSampleData:c,loadAllData:d,isLoading:h}=Ke(),m=()=>{l("companies"),setTimeout(()=>{i(!0)},100)},x=()=>{try{const{exportAllData:p}=Ke.getState(),b=p(),j=JSON.stringify(b,null,2),S=new Blob([j],{type:"application/json"}),_=URL.createObjectURL(S),R=document.createElement("a");R.href=_,R.download=`crm-data-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL(_),console.log(" Data exported successfully")}catch(p){console.error(" Failed to export data:",p)}};Z.useEffect(()=>{(async()=>{try{await c(),await d()}catch(b){console.error("Failed to initialize app:",b)}})()},[c,d]);const g=()=>{switch(u){case"companies":return r.jsx(rv,{forceOpenModal:s,onModalStateChange:i});case"contacts":return r.jsx(uv,{});case"deals":return r.jsx(mv,{});case"projects":return r.jsx(xv,{});case"time-tracking":return r.jsx(bv,{});case"invoices":return r.jsx(wv,{});case"settings":return r.jsx(Sv,{});case"dashboard":default:return r.jsx(nv,{})}};return h?r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary-600 border-t-transparent mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading your CRM data..."})]})}):r.jsx(sv,{currentPage:u,onPageChange:l,onAddCompany:m,onExportData:x,children:g()})}Rx.createRoot(document.getElementById("root")).render(r.jsx(Z.StrictMode,{children:r.jsx(Nv,{})}));
